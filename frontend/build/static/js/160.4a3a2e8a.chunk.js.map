{"version":3,"file":"static/js/160.4a3a2e8a.chunk.js","mappings":"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","sources":["pages/ClubDash/EventsManagement/components/EventDashboard/EventDashboardHeader.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/RSVPGrowthChart.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventOverview.jsx","pages/CreateEventV2/Steps/Where/RoomSelectorV2/RoomSelectorV2.jsx","pages/CreateEventV2/Steps/When/When.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventEditorTab/EventEditorTab.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventAgendaBuilder/AgendaItem.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventAgendaBuilder/AgendaItemEditor.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventAgendaBuilder/PublishConfirmModal.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventAgendaBuilder/AgendaBuilder.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventJobsManager/JobShiftScheduler.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventJobsManager/JobPicker.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventJobsManager/JobSignup.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventJobsManager/MemberDropdown.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventJobsManager/JobsManager.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventAnalyticsDetail.jsx","components/EventCheckIn/QRCodeDisplay.jsx","components/EventCheckIn/CheckInLink.jsx","components/EventCheckIn/CheckInList.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventCheckInTab/EventCheckInTab.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/RegistrationsTab/RegistrationsTab.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/ComingSoon.jsx","pages/ClubDash/EventsManagement/components/EventDashboard/EventDashboard.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useGradient } from '../../../../../hooks/useGradient';\nimport { useNotification } from '../../../../../NotificationContext';\nimport './EventDashboard.scss';\n\nexport const EVENT_DASHBOARD_CONFIG_PORTAL_ID = 'event-dashboard-config-portal';\n\nfunction EventDashboardHeader({ event, stats, onClose, onRefresh, orgId, activeTab }) {\n    const [showConfigPanel, setShowConfigPanel] = useState(false);\n    const panelRef = useRef(null);\n\n    useEffect(() => {\n        const handleClickOutside = (e) => {\n            if (panelRef.current && !panelRef.current.contains(e.target)) {\n                setShowConfigPanel(false);\n            }\n        };\n        if (showConfigPanel) {\n            document.addEventListener('mousedown', handleClickOutside);\n        }\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, [showConfigPanel]);\n    const { AtlasMain } = useGradient();\n    const { addNotification } = useNotification();\n\n    const getEventStatus = () => {\n        if (!event?.start_time) return null;\n        const now = new Date();\n        const start = new Date(event.start_time);\n        return start > now ? 'upcoming' : 'passed';\n    };\n\n    const formatDate = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        return date.toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n\n    const formatTime = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        return date.toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const getTimeUntilEvent = () => {\n        if (!event?.start_time) return '';\n        const now = new Date();\n        const start = new Date(event.start_time);\n        const diff = start - now;\n\n        if (diff < 0) {\n            return 'Event has started';\n        }\n\n        const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n        if (days > 0) {\n            return `${days} day${days !== 1 ? 's' : ''} until event`;\n        } else if (hours > 0) {\n            return `${hours} hour${hours !== 1 ? 's' : ''} until event`;\n        } else {\n            return `${minutes} minute${minutes !== 1 ? 's' : ''} until event`;\n        }\n    };\n\n    const handlePreview = () => {\n        if (!event?._id) return;\n        const eventUrl = `${window.location.origin}/event/${event._id}`;\n        window.open(eventUrl, '_blank', 'noopener,noreferrer');\n    };\n\n    const handleShare = async () => {\n        if (!event?._id) return;\n        const eventUrl = `${window.location.origin}/event/${event._id}`;\n        try {\n            await navigator.clipboard.writeText(eventUrl);\n            addNotification({\n                title: 'Success',\n                message: 'Event link copied to clipboard',\n                type: 'success'\n            });\n        } catch (err) {\n            // Fallback for older browsers\n            const textArea = document.createElement('textarea');\n            textArea.value = eventUrl;\n            textArea.style.position = 'fixed';\n            textArea.style.left = '-999999px';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n                addNotification({\n                    title: 'Success',\n                    message: 'Event link copied to clipboard',\n                    type: 'success'\n                });\n            } catch (err) {\n                addNotification({\n                    title: 'Error',\n                    message: 'Failed to copy link to clipboard',\n                    type: 'error'\n                });\n            }\n            document.body.removeChild(textArea);\n        }\n    };\n\n    const eventStatus = getEventStatus();\n\n    return (\n        <div className=\"event-dashboard-header\">\n            <div className=\"header-background\">\n                <img src={AtlasMain} alt=\"\" />\n            </div>\n            <div className=\"header-content\">\n                <div className=\"header-top\">\n                    <button className=\"close-btn\" onClick={onClose}>\n                        <Icon icon=\"mdi:close\" />\n                    </button>\n                    <div className=\"header-actions\" ref={panelRef}>\n                        {activeTab === 'edit' && (\n                            <div className=\"header-config-toggle\">\n                                <button\n                                    type=\"button\"\n                                    className={`action-btn settings ${showConfigPanel ? 'active' : ''}`}\n                                    onClick={() => setShowConfigPanel((v) => !v)}\n                                    title=\"Event configuration\"\n                                >\n                                    <Icon icon=\"mdi:cog\" />\n                                    <span>Configuration</span>\n                                </button>\n                                <div\n                                    className=\"event-dashboard-config-panel\"\n                                    style={{ display: showConfigPanel ? 'block' : 'none' }}\n                                    aria-hidden={!showConfigPanel}\n                                >\n                                    <div id={EVENT_DASHBOARD_CONFIG_PORTAL_ID} className=\"event-dashboard-config-portal\" />\n                                </div>\n                            </div>\n                        )}\n                        <button className=\"action-btn refresh\" onClick={onRefresh} title=\"Refresh\">\n                            <Icon icon=\"mdi:refresh\" />\n                        </button>\n                        <button \n                            className=\"action-btn share\" \n                            onClick={handleShare}\n                            title=\"Copy Event Link\"\n                            disabled={!event?._id}\n                        >\n                            <Icon icon=\"mdi:share-variant\" />\n                        </button>\n                        <button \n                            className=\"action-btn preview\" \n                            onClick={handlePreview}\n                            title=\"Preview Event\"\n                            disabled={!event?._id}\n                        >\n                            <Icon icon=\"mdi:open-in-new\" />\n                            <span>Preview</span>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"header-main\">\n                    <div className=\"event-title-section\">\n                        <h1>{event?.name || 'Event'}</h1>\n                        <div className=\"event-meta\">\n                            {eventStatus && (\n                                <span className={`event-status-bubble ${eventStatus}`}>\n                                    {eventStatus === 'upcoming' ? 'Upcoming' : 'Passed'}\n                                </span>\n                            )}\n                        </div>\n                    </div>\n                    <div className=\"quick-stats\">\n                        <div className=\"stat-item\">\n                            <Icon icon=\"mingcute:user-group-fill\" className=\"stat-icon\" />\n                            <div className=\"stat-content\">\n                                <span className=\"stat-value\">{stats?.registrationCount ?? 0}</span>\n                                <span className=\"stat-label\">Registrations</span>\n                            </div>\n                        </div>\n                        <div className=\"stat-item\">\n                            <Icon icon=\"mdi:calendar-clock\" className=\"stat-icon\" />\n                            <div className=\"stat-content\">\n                                <span className=\"stat-value\">{getTimeUntilEvent() || 'N/A'}</span>\n                                <span className=\"stat-label\">Time Until</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"header-details\">\n                    <div className=\"detail-item\">\n                        <Icon icon=\"mdi:calendar\" />\n                        <span>{formatDate(event?.start_time)}</span>\n                    </div>\n                    <div className=\"detail-item\">\n                        <Icon icon=\"mdi:clock-outline\" />\n                        <span>{formatTime(event?.start_time)} - {formatTime(event?.end_time)}</span>\n                    </div>\n                    <div className=\"detail-item\">\n                        <Icon icon=\"fluent:location-28-filled\" />\n                        <span>{event?.location || 'TBD'}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default EventDashboardHeader;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../hooks/useFetch';\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend,\n    Filler,\n} from 'chart.js';\nimport './EventDashboard.scss';\n\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend,\n    Filler\n);\n\nfunction RSVPGrowthChart({ eventId, orgId, expectedAttendance }) {\n    const [isCumulative, setIsCumulative] = useState(true);\n    const chartRef = useRef(null);\n    \n    const { data: growthData, loading, error } = useFetch(\n        eventId && orgId ? `/org-event-management/${orgId}/events/${eventId}/rsvp-growth` : null\n    );\n\n    useEffect(() => {\n        if (chartRef.current && growthData?.data) {\n            const chart = chartRef.current;\n            const ctx = chart.ctx;\n            \n            // Create gradient for actual RSVPs\n            const gradient = ctx.createLinearGradient(0, 0, 0, 200);\n            gradient.addColorStop(0, 'rgba(77, 170, 87, 0.3)');\n            gradient.addColorStop(1, 'rgba(77, 170, 87, 0)');\n            \n            // Create gradient for required growth\n            const requiredGradient = ctx.createLinearGradient(0, 0, 0, 200);\n            requiredGradient.addColorStop(0, 'rgba(33, 150, 243, 0.2)');\n            requiredGradient.addColorStop(1, 'rgba(33, 150, 243, 0)');\n            \n            if (chart.data.datasets && chart.data.datasets.length > 0) {\n                chart.data.datasets[0].backgroundColor = gradient;\n                if (chart.data.datasets[1]) {\n                    chart.data.datasets[1].backgroundColor = requiredGradient;\n                }\n            }\n            chart.update();\n        }\n    }, [growthData, isCumulative]);\n\n    if (loading) {\n        return (\n            <div className=\"rsvp-growth-chart\">\n                <div className=\"chart-loading\">Loading growth data...</div>\n            </div>\n        );\n    }\n\n    if (error || !growthData?.success) {\n        return (\n            <div className=\"rsvp-growth-chart\">\n                <div className=\"chart-error\">Error loading growth data</div>\n            </div>\n        );\n    }\n\n    const { dailyData, requiredGrowth, targetAttendance, isFrozen } = growthData.data;\n\n    if (!dailyData || dailyData.length === 0) {\n        return (\n            <div className=\"rsvp-growth-chart\">\n                <div className=\"chart-empty\">No registration data available</div>\n            </div>\n        );\n    }\n\n    // Format labels for x-axis\n    const labels = dailyData.map(day => {\n        const date = new Date(day.date);\n        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    });\n\n    // Prepare datasets\n    const actualData = isCumulative \n        ? dailyData.map(day => day.cumulativeRSVPs)\n        : dailyData.map(day => day.dailyRSVPs);\n\n    // For cumulative mode: show linear progression from 0 to target\n    // For daily mode: show flat line at required per day\n    const requiredData = isCumulative\n        ? requiredGrowth.map(day => day.required)\n        : dailyData.map(() => Math.round(growthData.data.requiredPerDay * 10) / 10); // Round to 1 decimal\n\n    const datasets = [\n        {\n            label: isCumulative ? 'Cumulative registrations' : 'Daily registrations',\n            data: actualData,\n            fill: true,\n            backgroundColor: 'rgba(77, 170, 87, 0.1)',\n            borderColor: 'rgba(77, 170, 87, 0.8)',\n            pointBackgroundColor: 'rgba(77, 170, 87, 1)',\n            pointBorderColor: '#fff',\n            tension: 0.3,\n            borderWidth: 2,\n            pointRadius: 0,\n            pointHoverRadius: 6,\n        },\n        {\n            label: isCumulative ? 'Required Growth' : 'Required Daily',\n            data: requiredData,\n            fill: true,\n            backgroundColor: 'rgba(33, 150, 243, 0.1)',\n            borderColor: 'rgba(33, 150, 243, 0.6)',\n            pointBackgroundColor: 'rgba(33, 150, 243, 0.8)',\n            pointBorderColor: '#fff',\n            tension: 0,\n            borderWidth: 2,\n            borderDash: [5, 5],\n            pointRadius: 0,\n            pointHoverRadius: 6,\n        }\n    ];\n\n    const chartData = {\n        labels,\n        datasets\n    };\n\n    const currentRSVPs = dailyData[dailyData.length - 1]?.cumulativeRSVPs || 0;\n    const progressPercentage = targetAttendance > 0 \n        ? Math.min((currentRSVPs / targetAttendance) * 100, 100)\n        : 0;\n\n    return (\n        <div className=\"rsvp-growth-chart\" style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\n            <div className=\"chart-header\">\n                <div className=\"chart-title-section\">\n                    <h3>\n                        <Icon icon=\"mingcute:chart-line-fill\" />\n                        Registration Growth\n                    </h3>\n                    {isFrozen && (\n                        <span className=\"frozen-badge\">\n                            <Icon icon=\"mdi:lock\" />\n                            Frozen\n                        </span>\n                    )}\n                </div>\n                <div className=\"chart-controls\">\n                    <button\n                        className={`toggle-btn ${isCumulative ? 'active' : ''}`}\n                        onClick={() => setIsCumulative(true)}\n                    >\n                        Cumulative\n                    </button>\n                    <button\n                        className={`toggle-btn ${!isCumulative ? 'active' : ''}`}\n                        onClick={() => setIsCumulative(false)}\n                    >\n                        Daily\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"chart-container\">\n                <Line\n                    ref={chartRef}\n                    data={chartData}\n                    options={{\n                        responsive: true,\n                        maintainAspectRatio: false,\n                        interaction: {\n                            mode: 'index',\n                            intersect: false,\n                        },\n                        scales: {\n                            x: {\n                                grid: {\n                                    drawBorder: false,\n                                    display: true,\n                                    color: 'rgba(0, 0, 0, 0.05)',\n                                },\n                                border: {\n                                    display: false,\n                                },\n                                ticks: {\n                                    color: '#666',\n                                    autoSkip: labels.length > 15, // Auto-skip only if more than 15 dates\n                                    maxTicksLimit: labels.length > 15 ? 15 : labels.length,\n                                    maxRotation: 45,\n                                    minRotation: 0,\n                                    font: {\n                                        size: 10,\n                                        family: 'Inter',\n                                    },\n                                    padding: 8,\n                                },\n                                offset: true, // Add padding between axis and data\n                            },\n                            y: {\n                                beginAtZero: true,\n                                grid: {\n                                    drawBorder: false,\n                                    display: true,\n                                    color: 'rgba(0, 0, 0, 0.05)',\n                                },\n                                border: {\n                                    display: false,\n                                },\n                                ticks: {\n                                    color: '#666',\n                                    font: {\n                                        size: 11,\n                                        family: 'Inter',\n                                    },\n                                },\n                            },\n                        },\n                        plugins: {\n                            legend: {\n                                display: true,\n                                position: 'top',\n                                labels: {\n                                    usePointStyle: true,\n                                    padding: 15,\n                                    font: {\n                                        size: 12,\n                                        family: 'Inter',\n                                    },\n                                    color: '#333',\n                                },\n                            },\n                            tooltip: {\n                                enabled: true,\n                                backgroundColor: 'rgba(0, 0, 0, 0.8)',\n                                titleColor: '#fff',\n                                bodyColor: '#fff',\n                                borderColor: 'rgba(255, 255, 255, 0.1)',\n                                borderWidth: 1,\n                                padding: 12,\n                                cornerRadius: 6,\n                                displayColors: true,\n                                titleFont: {\n                                    family: 'Inter',\n                                    size: 13,\n                                    weight: 'bold',\n                                },\n                                bodyFont: {\n                                    family: 'Inter',\n                                    size: 12,\n                                },\n                                callbacks: {\n                                    title: (context) => {\n                                        const index = context[0].dataIndex;\n                                        return labels[index];\n                                    },\n                                    label: (context) => {\n                                        const value = context.parsed.y;\n                                        return `${context.dataset.label}: ${Math.round(value)}`;\n                                    },\n                                },\n                            },\n                        },\n                    }}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default RSVPGrowthChart;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../hooks/useFetch';\nimport RSVPGrowthChart from './RSVPGrowthChart';\nimport AgendaDailyCalendar from './EventAgendaBuilder/AgendaDailyCalendar/AgendaDailyCalendar';\nimport './EventDashboard.scss';\n\nfunction EventOverview({ event, stats, agenda, roles: rolesSummary, equipment, orgId, onRefresh }) {\n    const [rolesData, setRolesData] = useState([]);\n    \n    // Fetch full roles data to check job fill status\n    const { data: rolesResponse } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/roles` : null\n    );\n\n    useEffect(() => {\n        if (rolesResponse?.success) {\n            setRolesData(rolesResponse.data.roles || []);\n        }\n    }, [rolesResponse]);\n\n    // Calculate jobs filled status\n    const calculateJobsFilled = () => {\n        if (rolesData.length === 0) return { ready: false, filled: 0, required: 0 };\n        \n        let totalRequired = 0;\n        let totalFilled = 0;\n        \n        rolesData.forEach(role => {\n            const required = role.requiredCount || 0;\n            const confirmed = role.assignments?.filter(a => a.status === 'confirmed').length || 0;\n            totalRequired += required;\n            totalFilled += confirmed;\n        });\n        \n        return {\n            ready: totalRequired > 0 && totalFilled >= totalRequired,\n            filled: totalFilled,\n            required: totalRequired\n        };\n    };\n\n    const jobsStatus = calculateJobsFilled();\n    const jobsPercentage = jobsStatus.required > 0 \n        ? Math.round((jobsStatus.filled / jobsStatus.required) * 100) \n        : 0;\n    const jobsLowCoverage = jobsPercentage < 50;\n\n    // Readiness checks\n    const readinessChecks = [\n        {\n            id: 'agenda',\n            label: 'Agenda Published',\n            description: agenda?.isPublished \n                ? 'Agenda is published and ready' \n                : 'Agenda has pending changes - click Publish to make them publicly available',\n            ready: agenda?.isPublished || false\n        },\n        {\n            id: 'jobs',\n            label: 'Jobs Filled',\n            description: jobsStatus.required > 0 \n                ? `${jobsStatus.filled} of ${jobsStatus.required} positions filled`\n                : 'No jobs defined',\n            ready: jobsStatus.ready,\n            showProgress: jobsStatus.required > 0,\n            progressData: {\n                filled: jobsStatus.filled,\n                required: jobsStatus.required,\n                percentage: jobsPercentage,\n                lowCoverage: jobsLowCoverage\n            }\n        },\n        {\n            id: 'published',\n            label: 'Event Published',\n            description: 'Event is publicly visible',\n            // ready: event?.status === 'published' || event?.status === 'approved'\n            ready: true\n        }\n    ];\n\n    const readyCount = readinessChecks.filter(check => check.ready).length;\n    const totalChecks = readinessChecks.length;\n\n    const agendaItemsWithTimes = useMemo(() => {\n        const items = agenda?.items || [];\n        return items\n            .filter((item) => item.startTime && item.endTime)\n            .map((item) => ({\n                ...item,\n                startTime: typeof item.startTime === 'string' ? new Date(item.startTime) : item.startTime,\n                endTime: typeof item.endTime === 'string' ? new Date(item.endTime) : item.endTime\n            }));\n    }, [agenda?.items]);\n\n    const showScheduleCalendar = agendaItemsWithTimes.length > 0 && event;\n\n    return (\n        <div className=\"event-overview\">\n            <div className=\"overview-layout\">\n                {/* Left Column: Readiness (1/3 width) */}\n                <div className=\"overview-left-column\">\n                    <div className=\"overview-card readiness-card\">\n                        <h3>\n                            <Icon icon=\"mdi:clipboard-check-outline\" />\n                            Event Readiness\n                            <span className=\"readiness-count\">{readyCount}/{totalChecks}</span>\n                        </h3>\n                        <div className=\"readiness-list\">\n                            {readinessChecks.map(check => (\n                                <div key={check.id} className={`readiness-item ${check.ready ? 'ready' : 'pending'} ${check.progressData?.lowCoverage ? 'low-coverage' : ''}`}>\n                                    <Icon icon={check.ready ? 'mdi:check-circle' : 'mdi:alert-circle-outline'} />\n                                    <div className=\"readiness-content\">\n                                        <div className=\"readiness-header\">\n                                            <span className=\"readiness-label\">{check.label}</span>\n                                            {check.showProgress && check.progressData && (\n                                                <span className=\"readiness-stats\">\n                                                    {check.progressData.filled} / {check.progressData.required} ({check.progressData.percentage}%)\n                                                </span>\n                                            )}\n                                        </div>\n                                        <span className=\"readiness-description\">{check.description}</span>\n                                        {check.showProgress && check.progressData && (\n                                            <div className=\"readiness-progress\">\n                                                <div className=\"readiness-progress-bar\">\n                                                    <div \n                                                        className={`readiness-progress-fill ${check.progressData.lowCoverage ? 'low' : ''}`}\n                                                        style={{ width: `${Math.min(check.progressData.percentage, 100)}%` }}\n                                                    />\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Right Column: Chart (2/3 width) */}\n                {event?._id && orgId && event?.expectedAttendance > 0 && (\n                    <div className=\"overview-right-column\">\n                        <RSVPGrowthChart \n                            eventId={event._id}\n                            orgId={orgId}\n                            expectedAttendance={event.expectedAttendance}\n                        />\n                    </div>\n                )}\n            </div>\n\n            {showScheduleCalendar && (\n                <div className=\"overview-schedule-section\">\n                    <h3>\n                        <Icon icon=\"mdi:calendar-clock\" />\n                        Schedule\n                    </h3>\n                    <AgendaDailyCalendar\n                        agendaItems={agendaItemsWithTimes}\n                        event={event}\n                        minuteHeight={2}\n                    />\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default EventOverview;\n","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { useFetch } from '../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../NotificationContext';\nimport apiRequest from '../../../../../utils/postRequest';\nimport { Icon } from '@iconify-icon/react/dist/iconify.mjs';\nimport Loader from '../../../../../components/Loader/Loader';\nimport FilledStar from '../../../../../assets/Icons/FilledStar.svg';\nimport { attributeIcons, selectedAttributeIcons } from '../../../../../Icons';\nimport Popup from '../../../../../components/Popup/Popup';\nimport './RoomSelectorV2.scss';\n\nfunction RoomSelectorV2({ formData, setFormData, onComplete }) {\n    const { addNotification } = useNotification();\n    \n    // State\n    const [rooms, setRooms] = useState([]);\n    const [loading, setLoading] = useState(true); // Start with loading true for initial fetch\n    const [selectedRoomIds, setSelectedRoomIds] = useState(new Set());\n    const [searchQuery, setSearchQuery] = useState('');\n    const [debouncedSearchQuery, setDebouncedSearchQuery] = useState('');\n    const [selectedTags, setSelectedTags] = useState([]);\n    const [sortBy, setSortBy] = useState('name');\n    const [showFilterPopup, setShowFilterPopup] = useState(false);\n    const [page, setPage] = useState(1);\n    const [hasMore, setHasMore] = useState(true);\n    const [totalRooms, setTotalRooms] = useState(0);\n    \n    // Cache for fetched rooms to avoid re-fetching\n    const roomsCache = useRef(new Map());\n    \n    // Refs for stable callbacks\n    const setFormDataRef = useRef(setFormData);\n    const onCompleteRef = useRef(onComplete);\n    \n    useEffect(() => {\n        setFormDataRef.current = setFormData;\n        onCompleteRef.current = onComplete;\n    }, [setFormData, onComplete]);\n    \n    // Initialize selectedRoomIds from formData\n    useEffect(() => {\n        if (formData.selectedRoomIds && Array.isArray(formData.selectedRoomIds)) {\n            setSelectedRoomIds(new Set(formData.selectedRoomIds));\n        }\n    }, []); // Only on mount\n    \n    // Debounce search query\n    useEffect(() => {\n        // Don't update if query hasn't actually changed\n        if (searchQuery === debouncedSearchQuery) {\n            return;\n        }\n        \n        const timer = setTimeout(() => {\n            const wasSearching = debouncedSearchQuery.trim();\n            const willBeSearching = searchQuery.trim();\n            \n            setDebouncedSearchQuery(searchQuery);\n            \n            // Only reset page and clear rooms if transitioning between search and no-search\n            if (wasSearching !== willBeSearching) {\n                setPage(1); // Reset to first page\n                if (willBeSearching) {\n                    // Starting a new search - clear rooms\n                    setRooms([]);\n                } else {\n                    // Clearing search - will reload top rated rooms\n                    hasInitialized.current = false; // Allow reload of top rated\n                }\n            } else if (willBeSearching && searchQuery !== debouncedSearchQuery) {\n                // Search query changed but still searching - reset page\n                setPage(1);\n                setRooms([]);\n            }\n        }, 300);\n        \n        return () => clearTimeout(timer);\n    }, [searchQuery]);\n    \n    // Track if initial load has happened to prevent re-fetching\n    const hasInitialized = useRef(false);\n    const isFetching = useRef(false);\n    \n    // Fetch rooms based on search/filter - only fetch what's needed\n    useEffect(() => {\n        // Prevent concurrent fetches\n        if (isFetching.current) {\n            return;\n        }\n        \n        const fetchRooms = async () => {\n            // Prevent re-fetching initial load if already done\n            // Only skip if we have rooms loaded (not just initialized flag)\n            if (!debouncedSearchQuery.trim() && hasInitialized.current && rooms.length > 0) {\n                return;\n            }\n            \n            // If no search query and already initialized but no rooms, something went wrong - reset\n            if (!debouncedSearchQuery.trim() && hasInitialized.current && rooms.length === 0 && page === 1) {\n                hasInitialized.current = false;\n            }\n            \n            isFetching.current = true;\n            setLoading(true);\n            try {\n                // If there's a search query, use search-rooms endpoint (more efficient)\n                if (debouncedSearchQuery.trim()) {\n                    const response = await apiRequest('/search-rooms', null, {\n                        method: 'GET',\n                        params: {\n                            query: debouncedSearchQuery.trim(),\n                            limit: 20,\n                            page: page\n                        }\n                    });\n                    \n                    if (response.success && response.rooms) {\n                        const newRooms = response.rooms.map(room => ({\n                            id: room._id,\n                            name: room.name || 'Unknown Room',\n                            image: room.image || null,\n                            building: room.building || '',\n                            floor: room.floor || '',\n                            capacity: room.capacity || 0,\n                            attributes: room.attributes || [],\n                            average_rating: room.average_rating || 0,\n                            number_of_ratings: room.number_of_ratings || 0\n                        }));\n                        \n                        if (page === 1) {\n                            setRooms(newRooms);\n                        } else {\n                            setRooms(prev => [...prev, ...newRooms]);\n                        }\n                        \n                        setTotalRooms(response.pagination?.total || newRooms.length);\n                        setHasMore(page < (response.pagination?.totalPages || 1));\n                    }\n                } else {\n                    // No search query - fetch initial set and show top 10 highest rated\n                    // Only fetch once on initial load\n                    if (!hasInitialized.current) {\n                        hasInitialized.current = true;\n                        \n                        // Use optimized endpoint to get top rated rooms directly\n                        const topRatedResponse = await apiRequest('/top-rated-rooms', null, {\n                            method: 'GET',\n                            params: {\n                                limit: 10\n                            }\n                        });\n                        \n                        if (topRatedResponse && topRatedResponse.success && topRatedResponse.data) {\n                            const topRatedRooms = topRatedResponse.data;\n                            \n                            // Get total room count for display\n                            const roomsData = await apiRequest('/getrooms', null, { method: 'GET' });\n                            const totalCount = roomsData?.data ? Object.keys(roomsData.data).length : topRatedRooms.length;\n                            \n                            setRooms(topRatedRooms);\n                            setTotalRooms(totalCount);\n                            setHasMore(false);\n                        } else {\n                            // Fallback to old method if new endpoint fails\n                            const roomsData = await apiRequest('/getrooms', null, { method: 'GET' });\n                            \n                            if (roomsData && roomsData.success && roomsData.data && Object.keys(roomsData.data).length > 0) {\n                                const allRoomIds = Object.values(roomsData.data);\n                                const totalCount = allRoomIds.length;\n                                const sampleSize = Math.min(20, allRoomIds.length);\n                                const sampleRoomIds = allRoomIds.slice(0, sampleSize);\n                                \n                                if (sampleRoomIds.length > 0) {\n                                    const batchResponse = await apiRequest('/getbatch-new', {\n                                        queries: sampleRoomIds,\n                                        exhaustive: true\n                                    });\n                                    \n                                    if (batchResponse && batchResponse.success && batchResponse.data) {\n                                        const fetchedRooms = batchResponse.data\n                                            .map((item, index) => {\n                                                if (!item || !item.room) return null;\n                                                const room = item.room;\n                                                return {\n                                                    id: sampleRoomIds[index],\n                                                    name: room.name || 'Unknown Room',\n                                                    image: room.image || null,\n                                                    building: room.building || '',\n                                                    floor: room.floor || '',\n                                                    capacity: room.capacity || 0,\n                                                    attributes: room.attributes || [],\n                                                    average_rating: room.average_rating || 0,\n                                                    number_of_ratings: room.number_of_ratings || 0,\n                                                    schedule: item.data || null\n                                                };\n                                            })\n                                            .filter(Boolean);\n                                        \n                                        const sortedRooms = fetchedRooms.sort((a, b) => {\n                                            const ratingA = a.average_rating || 0;\n                                            const ratingB = b.average_rating || 0;\n                                            if (ratingB !== ratingA) {\n                                                return ratingB - ratingA;\n                                            }\n                                            return (b.number_of_ratings || 0) - (a.number_of_ratings || 0);\n                                        });\n                                        \n                                        const topRatedRooms = sortedRooms.slice(0, 10);\n                                        setRooms(topRatedRooms);\n                                        setTotalRooms(totalCount);\n                                        setHasMore(false);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error('[RoomSelectorV2] Error fetching rooms:', error);\n                addNotification({\n                    title: 'Error',\n                    message: 'Failed to load rooms. Please try again.',\n                    type: 'error'\n                });\n            } finally {\n                setLoading(false);\n                isFetching.current = false;\n            }\n        };\n        \n        fetchRooms();\n    }, [debouncedSearchQuery, page, addNotification]);\n    \n    // Extract unique attributes from visible rooms (for filter popup)\n    const availableAttributes = useMemo(() => {\n        const attributeSet = new Set();\n        rooms.forEach(room => {\n            if (room.attributes && Array.isArray(room.attributes)) {\n                room.attributes.forEach(attr => attributeSet.add(attr));\n            }\n        });\n        return Array.from(attributeSet).sort();\n    }, [rooms]);\n    \n    // Filter and sort rooms (client-side filtering for attributes and sorting)\n    const filteredRooms = useMemo(() => {\n        let filtered = [...rooms];\n        \n        // Apply attribute filter (client-side since we're already filtering by search)\n        if (selectedTags.length > 0) {\n            filtered = filtered.filter(room =>\n                selectedTags.every(tag => room.attributes?.includes(tag))\n            );\n        }\n        \n        // Apply sorting\n        filtered.sort((a, b) => {\n            switch (sortBy) {\n                case 'name':\n                    return a.name.localeCompare(b.name);\n                case 'rating':\n                    return (b.average_rating || 0) - (a.average_rating || 0);\n                case 'capacity':\n                    return (b.capacity || 0) - (a.capacity || 0);\n                default:\n                    return 0;\n            }\n        });\n        \n        return filtered;\n    }, [rooms, selectedTags, sortBy]);\n    \n    // Selected rooms for display - fetch details if not already loaded\n    const [selectedRooms, setSelectedRooms] = useState([]);\n    \n    useEffect(() => {\n        const fetchSelectedRoomDetails = async () => {\n            const selectedArray = Array.from(selectedRoomIds);\n            if (selectedArray.length === 0) {\n                setSelectedRooms([]);\n                return;\n            }\n            \n            // Find which selected rooms we already have loaded\n            const loadedRooms = selectedArray\n                .map(id => rooms.find(room => room.id === id))\n                .filter(Boolean);\n            \n            // Find which selected rooms we need to fetch\n            const missingIds = selectedArray.filter(id => !rooms.find(room => room.id === id));\n            \n            if (missingIds.length === 0) {\n                setSelectedRooms(loadedRooms);\n                return;\n            }\n            \n            // Fetch missing room details in batch\n            try {\n                const batchResponse = await apiRequest('/getbatch-new', {\n                    queries: missingIds,\n                    exhaustive: true\n                });\n                \n                if (batchResponse.success && batchResponse.data) {\n                    const fetchedRooms = batchResponse.data\n                        .map((item, index) => {\n                            if (!item.data || !item.room) return null;\n                            const room = item.room;\n                            return {\n                                id: missingIds[index],\n                                name: room.name || 'Unknown Room',\n                                image: room.image || null,\n                                building: room.building || '',\n                                floor: room.floor || '',\n                                capacity: room.capacity || 0,\n                                attributes: room.attributes || [],\n                                average_rating: room.average_rating || 0,\n                                number_of_ratings: room.number_of_ratings || 0,\n                                schedule: item.data\n                            };\n                        })\n                        .filter(Boolean);\n                    \n                    // Combine loaded and fetched rooms\n                    setSelectedRooms([...loadedRooms, ...fetchedRooms]);\n                } else {\n                    setSelectedRooms(loadedRooms);\n                }\n            } catch (error) {\n                console.error('Error fetching selected room details:', error);\n                setSelectedRooms(loadedRooms);\n            }\n        };\n        \n        fetchSelectedRoomDetails();\n    }, [selectedRoomIds, rooms]);\n    \n    // Update form data when selection changes\n    const prevSelectionRef = useRef(null);\n    useEffect(() => {\n        if (loading) return;\n        \n        const selectedArray = Array.from(selectedRoomIds);\n        const selectionKey = JSON.stringify(selectedArray.sort());\n        \n        if (prevSelectionRef.current === selectionKey) {\n            return;\n        }\n        \n        prevSelectionRef.current = selectionKey;\n        \n        // Find first selected room from either loaded rooms or selectedRooms\n        const firstSelectedRoom = selectedArray.length > 0 \n            ? (rooms.find(room => room.id === selectedArray[0]) || \n               selectedRooms.find(room => room.id === selectedArray[0])) \n            : null;\n        \n        setFormDataRef.current(prev => ({\n            ...prev,\n            selectedRoomIds: selectedArray,\n            location: firstSelectedRoom?.name || null,\n            classroomId: firstSelectedRoom?.id || null,\n            classroom_id: firstSelectedRoom?.id || null\n        }));\n        \n        onCompleteRef.current(selectedArray.length > 0);\n    }, [selectedRoomIds, rooms, selectedRooms, loading]);\n    \n    // Load more rooms (pagination) - only for search results\n    const loadMore = useCallback(() => {\n        // Only load more if we have a search query (pagination for search)\n        // For initial top-rated rooms, we don't paginate\n        if (!loading && hasMore && debouncedSearchQuery.trim()) {\n            setPage(prev => prev + 1);\n        }\n    }, [loading, hasMore, debouncedSearchQuery]);\n    \n    // Handle room toggle\n    const handleRoomToggle = useCallback((roomId) => {\n        setSelectedRoomIds(prev => {\n            const newSet = new Set(prev);\n            if (newSet.has(roomId)) {\n                newSet.delete(roomId);\n            } else {\n                newSet.add(roomId);\n            }\n            return newSet;\n        });\n    }, []);\n    \n    // Handle tag toggle\n    const handleTagToggle = useCallback((tag) => {\n        setSelectedTags(prev => {\n            if (prev.includes(tag)) {\n                return prev.filter(t => t !== tag);\n            } else {\n                return [...prev, tag];\n            }\n        });\n    }, []);\n    \n    // Intersection observer for infinite scroll - only for search results\n    const observerTarget = useRef(null);\n    \n    useEffect(() => {\n        // Only enable infinite scroll for search results, not initial top-rated load\n        if (!debouncedSearchQuery.trim()) {\n            return;\n        }\n        \n        const observer = new IntersectionObserver(\n            entries => {\n                if (entries[0].isIntersecting && hasMore && !loading) {\n                    loadMore();\n                }\n            },\n            { threshold: 0.1 }\n        );\n        \n        const currentTarget = observerTarget.current;\n        if (currentTarget) {\n            observer.observe(currentTarget);\n        }\n        \n        return () => {\n            if (currentTarget) {\n                observer.unobserve(currentTarget);\n            }\n        };\n    }, [hasMore, loading, loadMore, debouncedSearchQuery]);\n    \n    return (\n        <div className=\"room-selector-v2\">\n            <div className=\"info-box\">\n                <p className=\"info-text\">\n                    {searchQuery.trim() \n                        ? 'Search results for your query. Select one or more rooms for your event.'\n                        : 'Showing top 10 highest rated rooms. Search to find specific rooms by name, building, or attributes.'}\n                </p>\n            </div>\n            \n            {/* Search and Filter Bar */}\n            <div className=\"search-filter-bar\">\n                <div className=\"search-input-wrapper\">\n                    <Icon icon=\"mdi:magnify\" className=\"search-icon\" />\n                    <input\n                        type=\"text\"\n                        className=\"search-input\"\n                        placeholder=\"Search rooms...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                    />\n                    {searchQuery && (\n                        <button \n                            className=\"clear-search\"\n                            onClick={() => setSearchQuery('')}\n                        >\n                            <Icon icon=\"mdi:close\" />\n                        </button>\n                    )}\n                </div>\n                \n                <div className=\"filter-buttons\">\n                    <button\n                        className={`filter-btn ${selectedTags.length > 0 ? 'active' : ''}`}\n                        onClick={() => setShowFilterPopup(true)}\n                    >\n                        <Icon icon=\"mdi:filter\" />\n                        Filters\n                        {selectedTags.length > 0 && (\n                            <span className=\"filter-count\">{selectedTags.length}</span>\n                        )}\n                    </button>\n                    \n                    <div className=\"sort-dropdown\">\n                        <select\n                            className=\"sort-select\"\n                            value={sortBy}\n                            onChange={(e) => setSortBy(e.target.value)}\n                        >\n                            <option value=\"name\">Sort by Name</option>\n                            <option value=\"rating\">Sort by Rating</option>\n                            <option value=\"capacity\">Sort by Capacity</option>\n                        </select>\n                        <Icon icon=\"mdi:chevron-down\" className=\"sort-icon\" />\n                    </div>\n                </div>\n            </div>\n            \n            {/* Selected Rooms */}\n            {selectedRooms.length > 0 && (\n                <div className=\"selected-section\">\n                    <h3>Selected Rooms ({selectedRooms.length})</h3>\n                    <div className=\"selected-grid\">\n                        {selectedRooms.map(room => (\n                            <RoomCard\n                                key={room.id}\n                                room={room}\n                                isSelected={true}\n                                onToggle={() => handleRoomToggle(room.id)}\n                            />\n                        ))}\n                    </div>\n                </div>\n            )}\n            \n            {/* All Rooms List */}\n            <div className=\"rooms-section\">\n                {loading && rooms.length === 0 ? (\n                    <div className=\"loading-state\">\n                        <Loader />\n                        <p>Loading rooms...</p>\n                    </div>\n                ) : (\n                    <>\n                        <h3>\n                            {filteredRooms.length === 0 \n                                ? 'No rooms found' \n                                : debouncedSearchQuery.trim()\n                                ? `Search Results (${totalRooms}${totalRooms > filteredRooms.length ? '+' : ''})`\n                                : `Top Rated Rooms (${filteredRooms.length})`}\n                        </h3>\n                <div className=\"rooms-grid\">\n                    {filteredRooms.map(room => (\n                        <RoomCard\n                            key={room.id}\n                            room={room}\n                            isSelected={selectedRoomIds.has(room.id)}\n                            onToggle={() => handleRoomToggle(room.id)}\n                        />\n                    ))}\n                </div>\n                \n                {/* Loading indicator for pagination */}\n                {loading && rooms.length > 0 && (\n                    <div className=\"loading-more\">\n                        <Loader />\n                    </div>\n                )}\n                \n                {/* Infinite scroll trigger */}\n                {hasMore && !loading && (\n                    <div ref={observerTarget} className=\"scroll-trigger\" />\n                )}\n                \n                {/* No more rooms message */}\n                {!hasMore && rooms.length > 0 && (\n                    <div className=\"no-more-rooms\">\n                        <p>No more rooms to load</p>\n                    </div>\n                )}\n                    </>\n                )}\n            </div>\n            \n            {/* Filter Popup */}\n            <Popup \n                isOpen={showFilterPopup} \n                onClose={() => setShowFilterPopup(false)} \n                defaultStyling={true}\n            >\n                <div className=\"filter-popup-content\">\n                    <h3>Filter by Attributes</h3>\n                    <div className=\"attributes-grid\">\n                        {availableAttributes.map(attr => (\n                            <button\n                                key={attr}\n                                className={`attribute-tag ${selectedTags.includes(attr) ? 'selected' : ''}`}\n                                onClick={() => handleTagToggle(attr)}\n                            >\n                                {attr}\n                            </button>\n                        ))}\n                    </div>\n                    <div className=\"popup-actions\">\n                        <button \n                            className=\"btn-secondary\"\n                            onClick={() => {\n                                setSelectedTags([]);\n                                setShowFilterPopup(false);\n                            }}\n                        >\n                            Clear\n                        </button>\n                        <button \n                            className=\"btn-primary\"\n                            onClick={() => setShowFilterPopup(false)}\n                        >\n                            Apply\n                        </button>\n                    </div>\n                </div>\n            </Popup>\n        </div>\n    );\n}\n\n// Room Card Component\nfunction RoomCard({ room, isSelected, onToggle }) {\n    const getAttributeIcon = (attr) => {\n        const attrLower = attr.toLowerCase().trim();\n        return selectedAttributeIcons[attrLower] || attributeIcons[attrLower] || null;\n    };\n    \n    return (\n        <div \n            className={`room-card ${isSelected ? 'selected' : ''}`}\n            onClick={onToggle}\n        >\n            <div className=\"room-image\">\n                {room.image ? (\n                    <img src={room.image} alt={room.name} />\n                ) : (\n                    <div className=\"no-image\">\n                        <Icon icon=\"mdi:office-building\" />\n                    </div>\n                )}\n                {isSelected && (\n                    <div className=\"selected-badge\">\n                        <Icon icon=\"mdi:check-circle\" />\n                    </div>\n                )}\n            </div>\n            \n            <div className=\"room-content\">\n                <h4 className=\"room-name\">{room.name}</h4>\n                \n                <div className=\"room-meta\">\n                    {room.average_rating > 0 && (\n                        <div className=\"rating\">\n                            <img src={FilledStar} alt=\"star\" />\n                            <span>{room.average_rating.toFixed(1)}</span>\n                        </div>\n                    )}\n                    {room.capacity > 0 && (\n                        <div className=\"capacity\">\n                            <Icon icon=\"mdi:account-group\" />\n                            <span>{room.capacity}</span>\n                        </div>\n                    )}\n                </div>\n                \n                {room.attributes && room.attributes.length > 0 && (\n                    <div className=\"room-attributes\">\n                        {room.attributes.slice(0, 3).map((attr, idx) => {\n                            const icon = getAttributeIcon(attr);\n                            return (\n                                <div key={idx} className=\"attribute-item\">\n                                    {icon && <img src={icon} alt={attr} />}\n                                    <span>{attr}</span>\n                                </div>\n                            );\n                        })}\n                        {room.attributes.length > 3 && (\n                            <span className=\"more-attributes\">\n                                +{room.attributes.length - 3}\n                            </span>\n                        )}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default RoomSelectorV2;\n\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './When.scss'\n\nimport WeeklyCalendar from '../../../../pages/OIEDash/EventsCalendar/Week/WeeklyCalendar/WeeklyCalendar';\nimport DailyCalendar from '../../../../pages/OIEDash/EventsCalendar/Day/DailyCalendar/DailyCalendar';\nimport MonthDisplay from '../../../../pages/OIEDash/EventsCalendar/Month/MonthDisplay';\nimport Switch from '../../../../components/Switch/Switch';\nimport Filter from '../../../../components/Filter/Filter';\nimport { useNotification } from '../../../../NotificationContext';\nimport apiRequest from '../../../../utils/postRequest';\n\nfunction When({ formData, setFormData, onComplete }){\n    const {addNotification} = useNotification();\n    const [combinedBlockedEvents, setCombinedBlockedEvents] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [isInitialized, setIsInitialized] = useState(false);\n    \n    // Calendar view state\n    const [view, setView] = useState(1); // 0: month, 1: week, 2: day\n    const [contentHeight, setContentHeight] = useState(500);\n    const [startOfWeek, setStartOfWeek] = useState(new Date(new Date().setDate(new Date().getDate() - new Date().getDay())));\n    const [selectedDay, setSelectedDay] = useState(new Date());\n    const [month, setMonth] = useState(new Date().getMonth() + 1);\n    const [year, setYear] = useState(new Date().getFullYear());\n    const [filter, setFilter] = useState({type: \"all\"});\n    const [showAvailability, setShowAvailability] = useState(true);\n    \n    // Time selection state - initialize from formData if available\n    const [selectedTimeslots, setSelectedTimeslots] = useState(() => {\n        if (formData.start_time && formData.end_time) {\n            return [{\n                id: 'initial-selection',\n                startTime: new Date(formData.start_time),\n                endTime: new Date(formData.end_time),\n                startDay: new Date(formData.start_time),\n                endDay: new Date(formData.end_time),\n                duration: (new Date(formData.end_time) - new Date(formData.start_time)) / (1000 * 60)\n            }];\n        }\n        return [];\n    });\n    \n    const contentRef = useRef(null);\n    \n    // Use ref to prevent circular updates\n    const isInternalUpdate = useRef(false);\n\n    useEffect(() => {\n        if(contentRef.current){\n            setContentHeight(contentRef.current.clientHeight);\n        }\n    }, [contentRef.current]);\n\n    // Helper function to merge overlapping time intervals\n    const mergeIntervals = (intervals) => {\n        if (intervals.length === 0) return [];\n        \n        // Sort intervals by start time\n        intervals.sort((a, b) => a.start - b.start);\n        \n        const merged = [intervals[0]];\n        \n        for (let i = 1; i < intervals.length; i++) {\n            const current = intervals[i];\n            const lastMerged = merged[merged.length - 1];\n            \n            // If current interval overlaps with the last merged interval\n            if (current.start <= lastMerged.end) {\n                // Merge them by extending the end time\n                lastMerged.end = Math.max(lastMerged.end, current.end);\n            } else {\n                // No overlap, add current interval to merged list\n                merged.push(current);\n            }\n        }\n        \n        return merged;\n    };\n\n    // Function to combine all room schedules into blocked time periods\n    const combineRoomSchedules = (roomsData) => {\n        const dayMap = { 'M': 1, 'T': 2, 'W': 3, 'R': 4, 'F': 5 }; // Monday = 1, etc.\n        const combinedSchedule = {};\n        \n        // Initialize days\n        Object.keys(dayMap).forEach(day => {\n            combinedSchedule[day] = [];\n        });\n\n        // Collect all time slots from all rooms\n        roomsData.forEach(roomData => {\n            const schedule = roomData.data?.weekly_schedule;\n            if (schedule) {\n                Object.keys(dayMap).forEach(day => {\n                    if (schedule[day] && schedule[day].length > 0) {\n                        schedule[day].forEach(slot => {\n                            combinedSchedule[day].push({\n                                start: slot.start_time, // Already in minutes from midnight\n                                end: slot.end_time, // Already in minutes from midnight\n                                class_name: slot.class_name\n                            });\n                        });\n                    }\n                });\n            }\n        });\n\n        // Merge overlapping intervals for each day\n        Object.keys(combinedSchedule).forEach(day => {\n            combinedSchedule[day] = mergeIntervals(combinedSchedule[day]);\n        });\n\n        return combinedSchedule;\n    };\n\n    // Function to generate blocked events for the calendar\n    const generateBlockedEvents = (combinedSchedule) => {\n        const events = [];\n        const today = new Date();\n        const currentWeekStart = new Date(today.setDate(today.getDate() - today.getDay())); // Start of current week (Sunday)\n        \n        // Generate events for the next 4 weeks\n        for (let week = 0; week < 4; week++) {\n            Object.entries(combinedSchedule).forEach(([dayKey, slots]) => {\n                const dayMap = { 'M': 1, 'T': 2, 'W': 3, 'R': 4, 'F': 5 };\n                const dayOffset = dayMap[dayKey];\n                \n                slots.forEach((slot, index) => {\n                    const eventDate = new Date(currentWeekStart);\n                    eventDate.setDate(currentWeekStart.getDate() + (week * 7) + dayOffset);\n                    \n                    const startTime = new Date(eventDate);\n                    const startHours = Math.floor(slot.start / 60);\n                    const startMinutes = slot.start % 60;\n                    startTime.setHours(startHours, startMinutes, 0, 0);\n                    \n                    const endTime = new Date(eventDate);\n                    const endHours = Math.floor(slot.end / 60);\n                    const endMinutes = slot.end % 60;\n                    endTime.setHours(endHours, endMinutes, 0, 0);\n                    \n                    events.push({\n                        id: `blocked-${week}-${dayKey}-${index}`,\n                        name: 'Room Unavailable',\n                        type: 'blocked',\n                        location: 'Multiple Rooms',\n                        start_time: startTime,\n                        end_time: endTime,\n                        status: 'blocked',\n                        description: 'Combined unavailable time from selected rooms'\n                    });\n                });\n            });\n        }\n        \n        return events;\n    };\n\n    // Fetch and combine all selected rooms' schedules\n    const fetchAndCombineSchedules = async () => {\n        try {\n            setLoading(true);\n            \n            // If no rooms were selected in Where step, show error\n            if (!formData.selectedRoomIds || formData.selectedRoomIds.length === 0) {\n                addNotification({ \n                    title: \"No Rooms Selected\", \n                    message: \"Please select rooms in the previous step\", \n                    type: \"error\" \n                });\n                setCombinedBlockedEvents([]);\n                setLoading(false);\n                return;\n            }\n\n            // Batch fetch all selected rooms at once (more efficient than individual calls)\n            const batchResponse = await apiRequest('/getbatch-new', {\n                queries: formData.selectedRoomIds,\n                exhaustive: true\n            });\n\n            if (!batchResponse || !batchResponse.success || !batchResponse.data) {\n                throw new Error('Failed to fetch room schedules');\n            }\n\n            // Transform batch response into room data format\n            const roomsWithData = batchResponse.data.map((item, index) => {\n                const roomId = formData.selectedRoomIds[index];\n                return {\n                    id: roomId,\n                    name: item?.room?.name || `Room ${roomId}`,\n                    data: item?.data || {},\n                    roomInfo: item?.room || {}\n                };\n            });\n            \n            // Combine all schedules\n            const combinedSchedule = combineRoomSchedules(roomsWithData);\n            \n            // Generate blocked events for the calendar\n            const blockedEvents = generateBlockedEvents(combinedSchedule);\n            setCombinedBlockedEvents(blockedEvents);\n            \n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching and combining room schedules:', error);\n            addNotification({ \n                title: \"Error\", \n                message: \"Failed to load room schedules\", \n                type: \"error\" \n            });\n            setLoading(false);\n        }\n    };\n\n    // Calendar navigation functions\n    const changeToWeek = (week) => {\n        setStartOfWeek(new Date(week));\n        setView(1);\n    };\n\n    const changeToDay = (day) => {\n        setSelectedDay(new Date(day));\n        setView(2);\n    };\n\n    // Week navigation\n    const updateWeek = (days) => {\n        setStartOfWeek(prev => {\n            const newStart = new Date(prev);\n            newStart.setDate(newStart.getDate() + days);\n            return newStart;\n        });\n    };\n\n    // Day navigation\n    const updateDay = (days) => {\n        setSelectedDay(prev => {\n            const newDate = new Date(prev);\n            newDate.setDate(newDate.getDate() + days);\n            return newDate;\n        });\n    };\n\n    // Month navigation\n    const nextMonth = () => {\n        setMonth(m => m === 12 ? 1 : m + 1);\n        setYear(y => month === 12 ? y + 1 : y);\n    };\n\n    const prevMonth = () => {\n        setMonth(m => m === 1 ? 12 : m - 1);\n        setYear(y => month === 1 ? y - 1 : y);\n    };\n\n    // Filter events for current view\n    const getFilteredEvents = () => {\n        if (view === 0) { // Month view\n            return combinedBlockedEvents.filter(event => {\n                const eventStart = new Date(event.start_time);\n                return eventStart.getMonth() + 1 === month && eventStart.getFullYear() === year;\n            });\n        } else if (view === 1) { // Week view\n            const endOfWeek = new Date(startOfWeek);\n            endOfWeek.setDate(endOfWeek.getDate() + 6);\n            endOfWeek.setHours(23, 59, 59, 999);\n            \n            return combinedBlockedEvents.filter(event => {\n                const eventStart = new Date(event.start_time);\n                return eventStart >= startOfWeek && eventStart <= endOfWeek;\n            });\n        } else { // Day view\n            return combinedBlockedEvents.filter(event => {\n                const eventStart = new Date(event.start_time);\n                const eventDay = new Date(eventStart.getFullYear(), eventStart.getMonth(), eventStart.getDate());\n                const currentDay = new Date(selectedDay.getFullYear(), selectedDay.getMonth(), selectedDay.getDate());\n                return eventDay.getTime() === currentDay.getTime();\n            });\n        }\n    };\n\n    // Fetch rooms data when selectedRoomIds changes\n    useEffect(() => {\n        fetchAndCombineSchedules();\n    }, [formData.selectedRoomIds]);\n\n    // Handle time selection from calendar - memoized to prevent infinite loops\n    const handleTimeSelection = useCallback((selections) => {\n        setSelectedTimeslots(selections);\n        \n        // Use the first selection for start_time and end_time\n        if (selections && selections.length > 0) {\n            const firstSelection = selections[0];\n            setFormData(prev => {\n                const newStartTime = new Date(firstSelection.startTime);\n                const newEndTime = new Date(firstSelection.endTime);\n                \n                // Only update if times actually changed\n                if (prev.start_time?.getTime() === newStartTime.getTime() && \n                    prev.end_time?.getTime() === newEndTime.getTime()) {\n                    return prev; // Return previous state if unchanged\n                }\n                \n                return {\n                    ...prev,\n                    start_time: newStartTime,\n                    end_time: newEndTime\n                };\n            });\n        } else {\n            // Clear times if no selection\n            setFormData(prev => {\n                if (!prev.start_time && !prev.end_time) {\n                    return prev; // Already cleared\n                }\n                return {\n                    ...prev,\n                    start_time: null,\n                    end_time: null\n                };\n            });\n        }\n    }, [setFormData]);\n\n    // Refs to avoid dependency issues\n    const onCompleteRef = useRef(onComplete);\n    const prevValidityRef = useRef(null);\n    \n    // Keep onComplete ref up to date\n    useEffect(() => {\n        onCompleteRef.current = onComplete;\n    }, [onComplete]);\n\n    // Initialize completion state and validate when times change\n    useEffect(() => {\n        const hasTimes = !!(formData.start_time && formData.end_time);\n        const hasRooms = formData.selectedRoomIds && formData.selectedRoomIds.length > 0;\n        \n        // Validate: need both rooms and times\n        const isValid = hasRooms && hasTimes;\n        \n        if (!isInitialized) {\n            setIsInitialized(true);\n        }\n        \n        // Only call onComplete if validity actually changed\n        if (prevValidityRef.current !== isValid) {\n            prevValidityRef.current = isValid;\n            onCompleteRef.current(isValid);\n        }\n    }, [formData.start_time, formData.end_time, formData.selectedRoomIds, isInitialized]);\n\n    if (loading) {\n        return (\n            <div className=\"when-component\">\n                <div className=\"loading\">\n                    <p>Loading room schedules...</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (!formData.selectedRoomIds || formData.selectedRoomIds.length === 0) {\n        return (\n            <div className=\"when-component\">\n                <div className=\"no-rooms\">\n                    <p>No rooms available. Please go back and select rooms first.</p>\n                </div>\n            </div>\n        );\n    }\n\n    const filteredEvents = getFilteredEvents();\n    const currentMonth = new Date().getMonth() + 1;\n    const currentYear = new Date().getFullYear();\n    const currentDay = new Date().getDate();\n\n    return(\n        <div className=\"when-component\">\n            <div className=\"info-box\">\n                <div className=\"info-content\">\n                    <span className=\"info-text\">\n                        {showAvailability \n                            ? `Grey blocks show unavailable times across all selected rooms (${formData.selectedRoomIds.length} rooms). Click and drag on the calendar to select your event time.`\n                            : `Click and drag on the calendar to select your event time. Toggle \"Show Availability\" to see room availability.`\n                        }\n                    </span>\n                    {formData.start_time && formData.end_time && (\n                        <div className=\"selected-time-info\" style={{ marginTop: '0.5rem', fontWeight: '500' }}>\n                            Selected: {new Date(formData.start_time).toLocaleString()} - {new Date(formData.end_time).toLocaleString()}\n                        </div>\n                    )}\n                </div>\n            </div>\n            \n            <div className=\"calendar-wrapper\">\n                <div className=\"calendar-controls\">\n                    <div className=\"calendar-navigation\">\n                        {view === 0 && (\n                            <>\n                                <button onClick={prevMonth} className=\"nav-button\">\n                                    \n                                </button>\n                                <span className=\"date-display\">\n                                    {new Date(year, month - 1).toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n                                </span>\n                                <button onClick={nextMonth} className=\"nav-button\">\n                                    \n                                </button>\n                            </>\n                        )}\n                        \n                        {view === 1 && (\n                            <>\n                                <button onClick={() => updateWeek(-7)} className=\"nav-button\">\n                                    \n                                </button>\n                                <span className=\"date-display\">\n                                    {startOfWeek.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - {\n                                        new Date(startOfWeek.getTime() + 6 * 24 * 60 * 60 * 1000).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n                                    }\n                                </span>\n                                <button onClick={() => updateWeek(7)} className=\"nav-button\">\n                                    \n                                </button>\n                            </>\n                        )}\n                        \n                        {view === 2 && (\n                            <>\n                                <button onClick={() => updateDay(-1)} className=\"nav-button\">\n                                    \n                                </button>\n                                <span className=\"date-display\">\n                                    {selectedDay.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}\n                                </span>\n                                <button onClick={() => updateDay(1)} className=\"nav-button\">\n                                    \n                                </button>\n                            </>\n                        )}\n                    </div>\n                    \n                    <div className=\"calendar-controls-right\">\n                        {view === 1 && (\n                            <div className=\"availability-toggle\" style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginRight: '1rem' }}>\n                                <label style={{ fontSize: '0.875rem', cursor: 'pointer', userSelect: 'none' }} onClick={() => setShowAvailability(!showAvailability)}>\n                                    Show Availability\n                                </label>\n                                <Switch \n                                    options={[\"off\", \"on\"]} \n                                    onChange={(index) => setShowAvailability(index === 1)} \n                                    selectedPass={showAvailability ? 1 : 0} \n                                    setSelectedPass={(index) => setShowAvailability(index === 1)}\n                                />\n                            </div>\n                        )}\n                        <Switch \n                            options={[\"month\", \"week\", \"day\"]} \n                            onChange={setView} \n                            selectedPass={view} \n                            setSelectedPass={setView}\n                        />\n                        <Filter \n                            options={[\"all\", \"study\", \"campus\", \"social\", \"club\", \"meeting\", \"sports\"]} \n                            selected={filter.type} \n                            setSelected={(type)=>setFilter({...filter, type})} \n                            label={\"filter\"}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"calendar-content\" ref={contentRef}>\n                    {view === 0 && (\n                        <MonthDisplay \n                            month={month}\n                            year={year}\n                            events={filteredEvents}\n                            height={`${contentHeight}px`}\n                            currentMonth={currentMonth}\n                            currentYear={currentYear}\n                            currentDay={currentDay}\n                            onWeekClick={changeToWeek}\n                        />\n                    )}\n                    \n                    {view === 1 && (\n                        <WeeklyCalendar \n                            startOfWeek={startOfWeek}\n                            events={filteredEvents}\n                            height={`${contentHeight}px`}\n                            dayClick={changeToDay}\n                            autoEnableSelection={true}\n                            selectionMode=\"single\"\n                            allowCrossDaySelection={false}\n                            timeIncrement={15}\n                            singleSelectionOnly={true}\n                            startHour={6}\n                            endHour={24}\n                            showAvailability={showAvailability}\n                            onSelectionsChange={handleTimeSelection}\n                            initialSelections={selectedTimeslots}\n                        />\n                    )}\n                    \n                    {view === 2 && (\n                        <DailyCalendar \n                            selectedDay={selectedDay}\n                            events={filteredEvents}\n                            height={`${contentHeight}px`}\n                        />\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default When;\n\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport DynamicFormField from '../../../../../../components/DynamicFormField/DynamicFormField';\nimport ImageUpload from '../../../../../../components/ImageUpload/ImageUpload';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport RoomSelectorV2 from '../../../../../../pages/CreateEventV2/Steps/Where/RoomSelectorV2/RoomSelectorV2';\nimport When from '../../../../../../pages/CreateEventV2/Steps/When/When';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport CreateRegistrationFormModal from '../CreateRegistrationFormModal';\nimport { EVENT_DASHBOARD_CONFIG_PORTAL_ID } from '../EventDashboardHeader';\nimport './EventEditorTab.scss';\n\n// Separate component for popup content to receive handleClose prop from Popup\nfunction LocationTimePopupContent({ \n    popupStep, \n    popupFormData, \n    setPopupFormData, \n    onLocationSelected, \n    onTimeSelected, \n    onClose,\n    onBack,\n    handleClose \n}) {\n    // Use handleClose from Popup if available, otherwise use onClose\n    const closePopup = handleClose || onClose;\n\n    return (\n        <div className=\"location-time-popup-content\">\n            <div className=\"popup-header\">\n                <h3>\n                    {popupStep === 'location' ? 'Select Location' : 'Select Time'}\n                </h3>\n                <button className=\"popup-close\" onClick={closePopup}>\n                    <Icon icon=\"mdi:close\" />\n                </button>\n            </div>\n            \n            <div className=\"popup-body\">\n                {popupStep === 'location' ? (\n                    <div>\n                        <RoomSelectorV2\n                            formData={popupFormData}\n                            setFormData={setPopupFormData}\n                            onComplete={(isValid) => {\n                                // RoomSelectorV2 automatically updates location and classroom_id in popupFormData\n                            }}\n                        />\n                        <div className=\"popup-actions\">\n                            <button \n                                className=\"popup-button secondary\" \n                                onClick={closePopup}\n                            >\n                                Cancel\n                            </button>\n                            <button \n                                className=\"popup-button primary\" \n                                onClick={onLocationSelected}\n                                disabled={(!popupFormData.selectedRoomIds || popupFormData.selectedRoomIds.length === 0) && (!popupFormData.location || !popupFormData.location.trim())}\n                            >\n                                Next: Select Time\n                            </button>\n                        </div>\n                    </div>\n                ) : (\n                    <div>\n                        <When\n                            formData={popupFormData}\n                            setFormData={setPopupFormData}\n                            onComplete={(isValid) => {\n                                // Validation handled by When component\n                            }}\n                        />\n                        <div className=\"popup-actions\">\n                            <button \n                                className=\"popup-button secondary\" \n                                onClick={onBack}\n                            >\n                                Back\n                            </button>\n                            <button \n                                className=\"popup-button primary\" \n                                onClick={onTimeSelected}\n                                disabled={!popupFormData.start_time || !popupFormData.end_time}\n                            >\n                                Confirm\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nfunction EventEditorTab({ event, orgId, onRefresh }) {\n    const { addNotification } = useNotification();\n    const [isEditing, setIsEditing] = useState(false);\n    const [saving, setSaving] = useState(false);\n    const [showLocationTimePopup, setShowLocationTimePopup] = useState(false);\n    const [popupStep, setPopupStep] = useState('location'); // 'location' or 'time'\n    const [tempLocationData, setTempLocationData] = useState(null);\n    \n    // Form configuration\n    const formConfigData = useFetch('/api/event-system-config/form-config');\n    const { data: orgFormsData, refetch: refetchOrgForms } = useFetch(orgId ? `/org-event-management/${orgId}/forms` : null);\n    const orgForms = orgFormsData?.success ? (orgFormsData.data || []) : [];\n    const [showCreateFormModal, setShowCreateFormModal] = useState(false);\n    const [editingFormId, setEditingFormId] = useState(null);\n    \n    // Initialize form data from event\n    const [formData, setFormData] = useState({\n        name: '',\n        description: '',\n        type: '',\n        visibility: '',\n        expectedAttendance: 0,\n        contact: '',\n        externalLink: '',\n        registrationEnabled: false,\n        registrationRequired: false,\n        registrationDeadline: null,\n        registrationFormId: null,\n        maxAttendees: null,\n        checkInEnabled: false,\n        checkInMethod: 'both',\n        checkInRequireRegistration: false,\n        checkInAutoCheckIn: false,\n        checkInAllowOnPage: true,\n        image: null,\n        start_time: null,\n        end_time: null,\n        location: '',\n        classroom_id: null,\n        selectedRoomIds: []\n    });\n    \n    const [originalData, setOriginalData] = useState(null);\n    const [popupFormData, setPopupFormData] = useState({\n        selectedRoomIds: [],\n        start_time: null,\n        end_time: null\n    });\n\n    // Initialize form data from event prop\n    useEffect(() => {\n        if (event) {\n            const initialData = {\n                name: event.name || '',\n                description: event.description || '',\n                type: event.type || '',\n                visibility: event.visibility || '',\n                expectedAttendance: event.expectedAttendance || 0,\n                contact: event.contact || '',\n                externalLink: event.externalLink || '',\n                registrationEnabled: event.registrationEnabled ?? event.rsvpEnabled ?? false,\n                registrationRequired: event.registrationRequired ?? event.rsvpRequired ?? false,\n                registrationDeadline: event.registrationDeadline || event.rsvpDeadline ? new Date(event.registrationDeadline || event.rsvpDeadline) : null,\n                registrationFormId: event.registrationFormId || null,\n                maxAttendees: event.maxAttendees || null,\n                checkInEnabled: event.checkInEnabled || false,\n                checkInMethod: event.checkInSettings?.method || 'both',\n                checkInRequireRegistration: event.checkInSettings?.requireRegistration ?? event.checkInSettings?.requireRsvp ?? false,\n                checkInAutoCheckIn: event.checkInSettings?.autoCheckIn || false,\n                checkInAllowOnPage: event.checkInSettings?.allowOnPageCheckIn !== false,\n                image: null, // Will handle image separately\n                start_time: event.start_time ? new Date(event.start_time) : null,\n                end_time: event.end_time ? new Date(event.end_time) : null,\n                location: event.location || '',\n                classroom_id: event.classroom_id || null,\n                selectedRoomIds: event.classroom_id ? [event.classroom_id] : []\n            };\n            \n            // Map custom fields if they exist\n            if (event.customFields) {\n                Object.keys(event.customFields).forEach(key => {\n                    initialData[key] = event.customFields[key];\n                });\n            }\n            \n            setFormData(initialData);\n            setOriginalData(JSON.parse(JSON.stringify(initialData)));\n        }\n    }, [event]);\n\n    // Initialize popup form data when opening popup\n    useEffect(() => {\n        if (showLocationTimePopup && popupStep === 'location') {\n            setPopupFormData({\n                selectedRoomIds: formData.selectedRoomIds || [],\n                location: formData.location,\n                classroom_id: formData.classroom_id,\n                start_time: formData.start_time,\n                end_time: formData.end_time\n            });\n        }\n    }, [showLocationTimePopup, popupStep]);\n\n    const handleEdit = () => {\n        setIsEditing(true);\n    };\n\n    const handleCancel = () => {\n        // Reset to original data\n        if (originalData) {\n            setFormData(JSON.parse(JSON.stringify(originalData)));\n        }\n        setIsEditing(false);\n    };\n\n    const handleFieldChange = (fieldName, value) => {\n        setFormData(prev => ({\n            ...prev,\n            [fieldName]: value\n        }));\n    };\n\n    const handleLocationTimePopupOpen = () => {\n        setPopupStep('location');\n        setShowLocationTimePopup(true);\n    };\n\n    const handleLocationTimePopupClose = () => {\n        setShowLocationTimePopup(false);\n        setPopupStep('location');\n        setTempLocationData(null);\n    };\n\n    const handleLocationSelected = () => {\n        // Move to time selection step\n        // RoomSelectorV2 has already updated popupFormData with location and classroom_id\n        setPopupStep('time');\n        setTempLocationData({\n            selectedRoomIds: popupFormData.selectedRoomIds,\n            location: popupFormData.location,\n            classroom_id: popupFormData.classroom_id\n        });\n    };\n\n    const handleTimeSelected = () => {\n        // Update time always when set; update location/room only if user selected a room\n        if (popupFormData.start_time && popupFormData.end_time) {\n            setFormData(prev => {\n                const hasRoom = popupFormData.selectedRoomIds && popupFormData.selectedRoomIds.length > 0;\n                return {\n                    ...prev,\n                    start_time: popupFormData.start_time,\n                    end_time: popupFormData.end_time,\n                    ...(hasRoom ? {\n                        selectedRoomIds: popupFormData.selectedRoomIds,\n                        classroom_id: popupFormData.classroom_id || popupFormData.selectedRoomIds[0],\n                        location: popupFormData.location || prev.location\n                    } : {})\n                };\n            });\n        }\n        handleLocationTimePopupClose();\n    };\n\n    const validateForm = () => {\n        const errors = {};\n        \n        if (!formData.name || formData.name.trim() === '') {\n            errors.name = 'Event name is required';\n        }\n        \n        if (!formData.type) {\n            errors.type = 'Event type is required';\n        }\n        \n        if (!formData.visibility) {\n            errors.visibility = 'Visibility is required';\n        }\n        \n        if (!formData.start_time || !formData.end_time) {\n            errors.time = 'Date and time are required';\n        }\n        \n        // Location can be a selected room OR free text (e.g. external events)\n        const hasRoom = formData.selectedRoomIds && formData.selectedRoomIds.length > 0;\n        const hasLocationText = formData.location && formData.location.trim() !== '';\n        if (!hasRoom && !hasLocationText) {\n            errors.location = 'Location is required (select a room or enter an address/place)';\n        }\n        \n        return errors;\n    };\n\n    const handleSave = async () => {\n        const errors = validateForm();\n        if (Object.keys(errors).length > 0) {\n            console.log(errors);\n            addNotification({\n                title: 'Validation Error',\n                message: 'Please fix all errors before saving',\n                type: 'error'\n            });\n            return;\n        }\n\n        setSaving(true);\n        try {\n            // Prepare update data\n            const updateData = {\n                name: formData.name,\n                description: formData.description,\n                type: formData.type,\n                visibility: formData.visibility,\n                expectedAttendance: formData.expectedAttendance,\n                contact: formData.contact || '',\n                externalLink: formData.externalLink || '',\n                registrationEnabled: formData.registrationEnabled,\n                registrationRequired: formData.registrationRequired,\n                registrationDeadline: formData.registrationDeadline ? formData.registrationDeadline.toISOString() : null,\n                registrationFormId: formData.registrationFormId || null,\n                maxAttendees: formData.maxAttendees || null,\n                checkInEnabled: formData.checkInEnabled,\n                checkInSettings: {\n                    method: formData.checkInMethod,\n                    requireRegistration: formData.checkInRequireRegistration,\n                    autoCheckIn: formData.checkInAutoCheckIn,\n                    allowOnPageCheckIn: formData.checkInAllowOnPage\n                },\n                start_time: formData.start_time.toISOString(),\n                end_time: formData.end_time.toISOString(),\n                classroom_id: formData.classroom_id,\n                location: formData.location\n            };\n\n            // Add custom fields if any\n            const customFields = {};\n            if (formConfigData.data?.data?.fields) {\n                formConfigData.data.data.fields.forEach(field => {\n                    if (!['name', 'description', 'type', 'visibility', 'expectedAttendance',\n                          'contact', 'externalLink', 'registrationEnabled', 'registrationRequired', 'registrationDeadline', 'registrationFormId',\n                          'maxAttendees', 'start_time', 'end_time', 'location', 'classroom_id',\n                          'selectedRoomIds', 'image'].includes(field.name)) {\n                        if (formData[field.name] !== undefined) {\n                            customFields[field.name] = formData[field.name];\n                        }\n                    }\n                });\n            }\n            if (Object.keys(customFields).length > 0) {\n                updateData.customFields = customFields;\n            }\n\n            // Use org-event-management endpoint for org events\n            const endpoint = orgId \n                ? `/org-event-management/${orgId}/events/${event._id}`\n                : `/update-event/${event._id}`;\n            \n            const response = await apiRequest(endpoint, updateData, { method: 'PUT' });\n\n            if (response.success) {\n                // Handle image upload separately if image was changed\n                if (formData.image instanceof File) {\n                    const imageFormData = new FormData();\n                    imageFormData.append('image', formData.image);\n                    imageFormData.append('eventId', event._id);\n                    \n                    await apiRequest('/upload-event-image', imageFormData, { method: 'POST' });\n                }\n\n                addNotification({\n                    title: 'Success',\n                    message: 'Event updated successfully',\n                    type: 'success'\n                });\n                \n                // Update original data\n                setOriginalData(JSON.parse(JSON.stringify(formData)));\n                setIsEditing(false);\n                \n                if (onRefresh) {\n                    onRefresh();\n                }\n            } else {\n                throw new Error(response.message || 'Failed to update event');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to update event',\n                type: 'error'\n            });\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const formatDate = (date) => {\n        if (!date) return 'Not set';\n        return new Date(date).toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n\n    const formatTime = (date) => {\n        if (!date) return '';\n        return new Date(date).toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const formatDateTime = (date) => {\n        if (!date) return 'Not set';\n        return `${formatDate(date)} at ${formatTime(date)}`;\n    };\n\n    // Get form config fields (excluding fields already shown in other sections)\n    const formConfig = formConfigData.data?.data;\n    const regularFields = useMemo(() => {\n        if (!formConfig?.fields) return [];\n        \n        // Fields already shown in other sections\n        const excludedFields = [\n            // Basic Information\n            'name', 'description', 'type', 'visibility', 'expectedAttendance', 'image',\n            // Date & Time\n            'start_time', 'end_time',\n            // Location\n            'location', 'classroom_id', 'selectedRoomIds',\n            // Contact & Links\n            'contact', 'externalLink',\n            // RSVP Settings\n            'registrationEnabled', 'registrationRequired', 'registrationDeadline', 'registrationFormId', 'maxAttendees'\n        ];\n        \n        // Special steps that are handled separately\n        const excludedSteps = ['location', 'date-time'];\n        \n        return formConfig.fields.filter(field => \n            field.isActive && \n            !excludedSteps.includes(field.step) &&\n            !excludedFields.includes(field.name)\n        );\n    }, [formConfig]);\n\n    if (!event) {\n        return <div className=\"event-editor-tab\">Loading...</div>;\n    }\n\n    const configPortalTarget = typeof document !== 'undefined' ? document.getElementById(EVENT_DASHBOARD_CONFIG_PORTAL_ID) : null;\n    const configSections = (\n        <>\n            <div className=\"editor-section\">\n                <h3>Registration Settings</h3>\n                <div className=\"section-content\">\n                    <div className=\"field-group\">\n                        <label className=\"checkbox-label\">\n                            {isEditing ? (\n                                <>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={formData.registrationEnabled}\n                                        onChange={(e) => handleFieldChange('registrationEnabled', e.target.checked)}\n                                    />\n                                    <span>Enable registration</span>\n                                </>\n                            ) : (\n                                <div className=\"read-only-value\">\n                                    Registration {formData.registrationEnabled ? 'Enabled' : 'Disabled'}\n                                </div>\n                            )}\n                        </label>\n                    </div>\n                    {formData.registrationEnabled && (\n                        <>\n                            <div className=\"field-group\">\n                                <label className=\"checkbox-label\">\n                                    {isEditing ? (\n                                        <>\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={formData.registrationRequired}\n                                                onChange={(e) => handleFieldChange('registrationRequired', e.target.checked)}\n                                            />\n                                            <span>Require registration</span>\n                                        </>\n                                    ) : (\n                                        <div className=\"read-only-value\">\n                                            Registration {formData.registrationRequired ? 'Required' : 'Optional'}\n                                        </div>\n                                    )}\n                                </label>\n                            </div>\n                            <div className=\"field-row\">\n                                <div className=\"field-group\">\n                                    <label>Registration deadline</label>\n                                    {isEditing ? (\n                                        <input\n                                            type=\"datetime-local\"\n                                            value={formData.registrationDeadline ? new Date(formData.registrationDeadline).toISOString().slice(0, 16) : ''}\n                                            onChange={(e) => handleFieldChange('registrationDeadline', e.target.value ? new Date(e.target.value) : null)}\n                                        />\n                                    ) : (\n                                        <div className=\"read-only-value\">\n                                            {formData.registrationDeadline ? formatDateTime(formData.registrationDeadline) : 'Not set'}\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"field-group\">\n                                    <label>Max Attendees</label>\n                                    {isEditing ? (\n                                        <input\n                                            type=\"number\"\n                                            value={formData.maxAttendees || ''}\n                                            onChange={(e) => handleFieldChange('maxAttendees', e.target.value ? parseInt(e.target.value) : null)}\n                                            placeholder=\"No limit\"\n                                            min=\"1\"\n                                        />\n                                    ) : (\n                                        <div className=\"read-only-value\">\n                                            {formData.maxAttendees || 'No limit'}\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                            <div className=\"field-group\">\n                                <label>Registration form</label>\n                                {isEditing ? (\n                                    <div className=\"registration-form-select-row\">\n                                        <select\n                                            value={formData.registrationFormId || ''}\n                                            onChange={(e) => handleFieldChange('registrationFormId', e.target.value || null)}\n                                        >\n                                            <option value=\"\">None</option>\n                                            {orgForms.map((f) => (\n                                                <option key={f._id} value={f._id}>\n                                                    {f.title}\n                                                </option>\n                                            ))}\n                                        </select>\n                                        <button\n                                            type=\"button\"\n                                            className=\"create-form-btn\"\n                                            onClick={() => { setEditingFormId(null); setShowCreateFormModal(true); }}\n                                        >\n                                            <Icon icon=\"mdi:plus\" />\n                                            Create form\n                                        </button>\n                                        {formData.registrationFormId && (\n                                            <button\n                                                type=\"button\"\n                                                className=\"edit-form-btn\"\n                                                onClick={() => {\n                                                    const f = orgForms.find((x) => x._id === formData.registrationFormId);\n                                                    if (f) setEditingFormId(f._id);\n                                                    setShowCreateFormModal(true);\n                                                }}\n                                            >\n                                                <Icon icon=\"mdi:pencil\" />\n                                                Edit form\n                                            </button>\n                                        )}\n                                    </div>\n                                ) : (\n                                    <div className=\"read-only-value\">\n                                        {formData.registrationFormId && orgForms.length\n                                            ? (orgForms.find((f) => f._id === formData.registrationFormId)?.title || formData.registrationFormId)\n                                            : 'None'}\n                                    </div>\n                                )}\n                                <p className=\"field-hint\">Optional form attendees fill out when registering.</p>\n                            </div>\n                            {showCreateFormModal && (\n                                <CreateRegistrationFormModal\n                                    orgId={orgId}\n                                    formId={editingFormId || undefined}\n                                    initialForm={editingFormId ? orgForms.find((f) => f._id === editingFormId) : undefined}\n                                    onCreated={(newFormId) => {\n                                        refetchOrgForms();\n                                        if (!editingFormId && newFormId) handleFieldChange('registrationFormId', newFormId);\n                                    }}\n                                    onClose={() => { setShowCreateFormModal(false); setEditingFormId(null); }}\n                                />\n                            )}\n                        </>\n                    )}\n                </div>\n            </div>\n            <div className=\"editor-section checkin-settings-section\">\n                <h3>Check-In</h3>\n                <p className=\"section-description\">\n                    Let attendees mark that they&apos;re here using a QR code, link, or a button on the event page.\n                </p>\n                <div className=\"section-content\">\n                    <div className=\"field-group checkin-master-toggle\">\n                        <label className=\"checkbox-label\">\n                            {isEditing ? (\n                                <>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={formData.checkInEnabled}\n                                        onChange={(e) => handleFieldChange('checkInEnabled', e.target.checked)}\n                                    />\n                                    <span>Enable check-in for this event</span>\n                                </>\n                            ) : (\n                                <div className=\"read-only-value\">\n                                    Check-in {formData.checkInEnabled ? 'enabled' : 'disabled'}\n                                </div>\n                            )}\n                        </label>\n                    </div>\n                    {formData.checkInEnabled && (\n                        <>\n                            <div className=\"checkin-subsection\">\n                                <h4 className=\"subsection-title\">Ways to check in</h4>\n                                <div className=\"field-group\">\n                                    <label className=\"field-label\">QR code & link</label>\n                                    {isEditing ? (\n                                        <div className=\"radio-group\">\n                                            <label className=\"radio-label\">\n                                                <input\n                                                    type=\"radio\"\n                                                    name=\"checkInMethod\"\n                                                    value=\"qr\"\n                                                    checked={formData.checkInMethod === 'qr'}\n                                                    onChange={(e) => handleFieldChange('checkInMethod', e.target.value)}\n                                                />\n                                                <span>QR code only</span>\n                                            </label>\n                                            <label className=\"radio-label\">\n                                                <input\n                                                    type=\"radio\"\n                                                    name=\"checkInMethod\"\n                                                    value=\"link\"\n                                                    checked={formData.checkInMethod === 'link'}\n                                                    onChange={(e) => handleFieldChange('checkInMethod', e.target.value)}\n                                                />\n                                                <span>Link only</span>\n                                            </label>\n                                            <label className=\"radio-label\">\n                                                <input\n                                                    type=\"radio\"\n                                                    name=\"checkInMethod\"\n                                                    value=\"both\"\n                                                    checked={formData.checkInMethod === 'both'}\n                                                    onChange={(e) => handleFieldChange('checkInMethod', e.target.value)}\n                                                />\n                                                <span>Both</span>\n                                            </label>\n                                        </div>\n                                    ) : (\n                                        <div className=\"read-only-value\">\n                                            {formData.checkInMethod === 'qr' ? 'QR code only' :\n                                             formData.checkInMethod === 'link' ? 'Link only' : 'Both'}\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"field-group\">\n                                    <label className=\"checkbox-label\">\n                                        {isEditing ? (\n                                            <>\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={formData.checkInAllowOnPage}\n                                                    onChange={(e) => handleFieldChange('checkInAllowOnPage', e.target.checked)}\n                                                />\n                                                <span>Allow check-in from event page</span>\n                                            </>\n                                        ) : (\n                                            <div className=\"read-only-value\">\n                                                Event page check-in: {formData.checkInAllowOnPage ? 'Yes' : 'No'}\n                                            </div>\n                                        )}\n                                    </label>\n                                    <p className=\"field-hint\">Show a &quot;Check in&quot; button on the event page (web &amp; app) during the event.</p>\n                                </div>\n                            </div>\n                            <div className=\"checkin-subsection\">\n                                <h4 className=\"subsection-title\">Options</h4>\n                                <div className=\"field-group\">\n                                    <label className=\"checkbox-label\">\n                                        {isEditing ? (\n                                            <>\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={formData.checkInRequireRegistration}\n                                                    onChange={(e) => handleFieldChange('checkInRequireRegistration', e.target.checked)}\n                                                />\n                                                <span>Require registration to check in</span>\n                                            </>\n                                        ) : (\n                                            <div className=\"read-only-value\">\n                                                Require registration: {formData.checkInRequireRegistration ? 'Yes' : 'No'}\n                                            </div>\n                                        )}\n                                    </label>\n                                    <p className=\"field-hint\">Attendees must register before they can check in.</p>\n                                </div>\n                                <div className=\"field-group\">\n                                    <label className=\"checkbox-label\">\n                                        {isEditing ? (\n                                            <>\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={formData.checkInAutoCheckIn}\n                                                    onChange={(e) => handleFieldChange('checkInAutoCheckIn', e.target.checked)}\n                                                />\n                                                <span>Auto check-in when using link or QR</span>\n                                            </>\n                                        ) : (\n                                            <div className=\"read-only-value\">\n                                                Auto check-in: {formData.checkInAutoCheckIn ? 'On' : 'Off'}\n                                            </div>\n                                        )}\n                                    </label>\n                                    <p className=\"field-hint\">Skip the confirmation page and check in immediately when they open the link or scan the QR.</p>\n                                </div>\n                            </div>\n                        </>\n                    )}\n                </div>\n            </div>\n        </>\n    );\n\n    return (\n        <div className={`event-editor-tab ${isEditing ? 'editing' : 'locked'}`}>\n            <div className=\"editor-header\">\n                <h2>Event Details</h2>\n                {!isEditing ? (\n                    <button className=\"edit-button\" onClick={handleEdit}>\n                        <Icon icon=\"mdi:pencil\" />\n                        Edit\n                    </button>\n                ) : (\n                    <div className=\"editor-actions\">\n                        <button className=\"cancel-button\" onClick={handleCancel} disabled={saving}>\n                            Cancel\n                        </button>\n                        <button className=\"save-button\" onClick={handleSave} disabled={saving}>\n                            {saving ? 'Saving...' : 'Save Changes'}\n                        </button>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"editor-content\">\n                {/* Basic Information Section */}\n                <div className=\"editor-section\">\n                    <h3>Basic Information</h3>\n                    <div className=\"section-content\">\n                        <div className=\"field-group\">\n                            <label>Event Name</label>\n                            {isEditing ? (\n                                <input\n                                    type=\"text\"\n                                    value={formData.name}\n                                    onChange={(e) => handleFieldChange('name', e.target.value)}\n                                    placeholder=\"Event name\"\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">{formData.name || 'Not set'}</div>\n                            )}\n                        </div>\n\n                        <div className=\"field-group\">\n                            <label>Description</label>\n                            {isEditing ? (\n                                <textarea\n                                    value={formData.description || ''}\n                                    onChange={(e) => handleFieldChange('description', e.target.value)}\n                                    placeholder=\"Event description\"\n                                    rows={4}\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">{formData.description || 'Not set'}</div>\n                            )}\n                        </div>\n\n                        <div className=\"field-row\">\n                            <div className=\"field-group\">\n                                <label>Event Type</label>\n                                {isEditing ? (\n                                    <select\n                                        value={formData.type}\n                                        onChange={(e) => handleFieldChange('type', e.target.value)}\n                                    >\n                                        <option value=\"\">Select type</option>\n                                        <option value=\"study\">Study Event</option>\n                                        <option value=\"workshop\">Workshop</option>\n                                        <option value=\"campus\">Campus Event</option>\n                                        <option value=\"social\">Social Event</option>\n                                        <option value=\"club\">Club Event</option>\n                                        <option value=\"meeting\">Club Meeting</option>\n                                        <option value=\"sports\">Sports Event</option>\n                                    </select>\n                                ) : (\n                                    <div className=\"read-only-value\">{formData.type || 'Not set'}</div>\n                                )}\n                            </div>\n\n                            <div className=\"field-group\">\n                                <label>Visibility</label>\n                                {isEditing ? (\n                                    <select\n                                        value={formData.visibility}\n                                        onChange={(e) => handleFieldChange('visibility', e.target.value)}\n                                    >\n                                        <option value=\"\">Select visibility</option>\n                                        <option value=\"public\">Public</option>\n                                        <option value=\"internal\">Internal</option>\n                                        <option value=\"inviteOnly\">Invite Only</option>\n                                    </select>\n                                ) : (\n                                    <div className=\"read-only-value\">{formData.visibility || 'Not set'}</div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"field-group\">\n                            <label>Expected Attendance</label>\n                            {isEditing ? (\n                                <input\n                                    type=\"number\"\n                                    value={formData.expectedAttendance}\n                                    onChange={(e) => handleFieldChange('expectedAttendance', parseInt(e.target.value) || 0)}\n                                    min=\"1\"\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">{formData.expectedAttendance || 0}</div>\n                            )}\n                        </div>\n\n                        <div className=\"field-group\">\n                            <label>Event Image</label>\n                            {isEditing ? (\n                                <ImageUpload\n                                    uploadText=\"Drag your image here\"\n                                    onFileSelect={(file) => handleFieldChange('image', file)}\n                                    onFileClear={() => handleFieldChange('image', null)}\n                                    showPrompt={false}\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">\n                                    {event.image ? (\n                                        <img src={event.image} alt=\"Event\" style={{ maxWidth: '200px', maxHeight: '200px' }} />\n                                    ) : (\n                                        'No image'\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Date, Time & Location Section */}\n                <div className=\"editor-section\">\n                    <h3>Date, Time & Location</h3>\n                    <div className=\"section-content\">\n                        <div className=\"field-row\">\n                            <div className=\"field-group\">\n                                <label>Event Time</label>\n                                <div className=\"read-only-value\">\n                                    {formatDateTime(formData.start_time)} - {formatTime(formData.end_time)}\n                                </div>\n                            </div>\n                            <div className=\"field-group\">\n                                <label>Location</label>\n                                {isEditing ? (\n                                    <input\n                                        type=\"text\"\n                                        value={formData.location || ''}\n                                        onChange={(e) => handleFieldChange('location', e.target.value)}\n                                        placeholder=\"e.g. Room 101, Off-campus, or address\"\n                                    />\n                                ) : (\n                                    <div className=\"read-only-value\">{formData.location || 'Not set'}</div>\n                                )}\n                            </div>\n                        </div>\n                        {isEditing && (\n                            <div className=\"field-group\">\n                                <button \n                                    type=\"button\" \n                                    className=\"change-location-time-button\"\n                                    onClick={handleLocationTimePopupOpen}\n                                >\n                                    <Icon icon=\"mdi:calendar-clock\" />\n                                    Change Location & Time\n                                </button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Contact & Links Section */}\n                <div className=\"editor-section\">\n                    <h3>Contact & Links</h3>\n                    <div className=\"section-content\">\n                        <div className=\"field-group\">\n                            <label>Contact</label>\n                            {isEditing ? (\n                                <input\n                                    type=\"text\"\n                                    value={formData.contact || ''}\n                                    onChange={(e) => handleFieldChange('contact', e.target.value)}\n                                    placeholder=\"Contact information\"\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">{formData.contact || 'Not set'}</div>\n                            )}\n                        </div>\n\n                        <div className=\"field-group\">\n                            <label>External Link</label>\n                            {isEditing ? (\n                                <input\n                                    type=\"url\"\n                                    value={formData.externalLink || ''}\n                                    onChange={(e) => handleFieldChange('externalLink', e.target.value)}\n                                    placeholder=\"https://...\"\n                                />\n                            ) : (\n                                <div className=\"read-only-value\">\n                                    {formData.externalLink ? (\n                                        <a href={formData.externalLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                                            {formData.externalLink}\n                                        </a>\n                                    ) : (\n                                        'Not set'\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Custom Fields Section */}\n                {regularFields.length > 0 && (\n                    <div className=\"editor-section\">\n                        <h3>Additional Information</h3>\n                        <div className=\"section-content\">\n                            {regularFields.map(field => (\n                                <div key={field.name} className=\"field-group\">\n                                    <label>\n                                        {field.label}\n                                        {field.isRequired && <span className=\"required\">*</span>}\n                                    </label>\n                                    {isEditing ? (\n                                        <DynamicFormField\n                                            field={field}\n                                            value={formData[field.name]}\n                                            onChange={handleFieldChange}\n                                            formData={formData}\n                                        />\n                                    ) : (\n                                        <div className=\"read-only-value\">\n                                            {formData[field.name] !== null && formData[field.name] !== undefined\n                                                ? String(formData[field.name])\n                                                : 'Not set'}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {configPortalTarget && createPortal(\n                <div className=\"event-editor-config-panel\">{configSections}</div>,\n                configPortalTarget\n            )}\n\n            {/* Location & Time Popup */}\n            {showLocationTimePopup && (\n                <Popup isOpen={showLocationTimePopup} onClose={handleLocationTimePopupClose} customClassName=\"location-time-popup\">\n                    <LocationTimePopupContent\n                        popupStep={popupStep}\n                        popupFormData={popupFormData}\n                        setPopupFormData={setPopupFormData}\n                        onLocationSelected={handleLocationSelected}\n                        onTimeSelected={handleTimeSelected}\n                        onClose={handleLocationTimePopupClose}\n                        onBack={() => setPopupStep('location')}\n                    />\n                </Popup>\n            )}\n        </div>\n    );\n}\n\nexport default EventEditorTab;\n","import React from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport './AgendaBuilder.scss';\n\nfunction AgendaItem({ item, onEdit, onDelete }) {\n    const formatTime = (date) => {\n        if (!date) return 'TBD';\n        const time = date instanceof Date ? date : new Date(date);\n        return time.toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const getDurationMinutes = () => {\n        if (!item.startTime || !item.endTime) return null;\n        const start = item.startTime instanceof Date ? item.startTime : new Date(item.startTime);\n        const end = item.endTime instanceof Date ? item.endTime : new Date(item.endTime);\n        return Math.round((end - start) / 60000);\n    };\n\n    const getTypeIcon = (type) => {\n        const icons = {\n            Activity: 'mdi:run',\n            Break: 'mdi:coffee',\n            Setup: 'mdi:wrench',\n            Breakdown: 'mdi:package-down',\n            Transition: 'mdi:arrow-right',\n            Speaker: 'mdi:microphone',\n            Custom: 'mdi:star'\n        };\n        return icons[type] || 'mdi:circle';\n    };\n\n    const getTypeColor = (type) => {\n        const colors = {\n            Activity: '#4DAA57',\n            Break: '#ffc107',\n            Setup: '#6c757d',\n            Breakdown: '#6c757d',\n            Transition: '#17a2b8',\n            Speaker: '#dc3545',\n            Custom: '#6D8EFA'\n        };\n        return colors[type] || '#6c757d';\n    };\n\n    const startTime = item.startTime ? (typeof item.startTime === 'string' ? new Date(item.startTime) : item.startTime) : null;\n    const endTime = item.endTime ? (typeof item.endTime === 'string' ? new Date(item.endTime) : item.endTime) : null;\n    const durationMinutes = getDurationMinutes();\n\n    return (\n        <div className=\"agenda-item\">\n            <div className=\"item-content\">\n                <div className=\"item-header\">\n                    <div className=\"item-type-badge\" style={{ backgroundColor: getTypeColor(item.type) }}>\n                        <Icon icon={getTypeIcon(item.type)} />\n                        <span>{item.type}</span>\n                    </div>\n                    {!item.isPublic && (\n                        <span className=\"item-visibility\">\n                            <Icon icon=\"mdi:lock\" />\n                            <span>Internal</span>\n                        </span>\n                    )}\n                </div>\n                <h4 className=\"item-title\">{item.title}</h4>\n                {item.description && (\n                    <p className=\"item-description\">{item.description}</p>\n                )}\n                <div className=\"item-meta\">\n                    {startTime && endTime && (\n                        <span className=\"meta-item\">\n                            <Icon icon=\"mdi:clock-outline\" />\n                            {formatTime(startTime)} - {formatTime(endTime)}\n                        </span>\n                    )}\n                    {durationMinutes != null && (\n                        <span className=\"meta-item\">\n                            <Icon icon=\"mdi:timer-outline\" />\n                            {durationMinutes} min\n                        </span>\n                    )}\n                    {item.location && (\n                        <span className=\"meta-item\">\n                            <Icon icon=\"fluent:location-28-filled\" />\n                            {item.location}\n                        </span>\n                    )}\n                </div>\n            </div>\n            <div className=\"item-actions\">\n                <button className=\"action-btn edit\" onClick={onEdit} title=\"Edit\">\n                    <Icon icon=\"mdi:pencil\" />\n                </button>\n                <button className=\"action-btn delete\" onClick={onDelete} title=\"Delete\">\n                    <Icon icon=\"mdi:delete\" />\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default AgendaItem;\n","import React, { useState, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport './AgendaBuilder.scss';\n\nfunction AgendaItemEditor({ item, event, latestItemEnd, onSave, onCancel }) {\n    const [inputMode, setInputMode] = useState('duration'); // 'duration' | 'endTime'\n    const [formData, setFormData] = useState({\n        title: '',\n        description: '',\n        startTime: null,\n        endTime: null,\n        durationMinutes: 30,\n        type: 'Activity',\n        location: '',\n        isPublic: true\n    });\n\n    useEffect(() => {\n        if (item) {\n            let startTime = null;\n            let endTime = null;\n\n            if (item.startTime) {\n                startTime = typeof item.startTime === 'string' ? new Date(item.startTime) : item.startTime;\n            }\n            if (item.endTime) {\n                endTime = typeof item.endTime === 'string' ? new Date(item.endTime) : item.endTime;\n            }\n\n            if (!startTime || !endTime) {\n                const fallbackStart = latestItemEnd\n                    ? (latestItemEnd instanceof Date ? latestItemEnd : new Date(latestItemEnd))\n                    : event?.start_time\n                        ? new Date(event.start_time)\n                        : new Date();\n                const fallbackEnd = new Date(fallbackStart);\n                fallbackEnd.setMinutes(fallbackEnd.getMinutes() + 30);\n                startTime = startTime || fallbackStart;\n                endTime = endTime || fallbackEnd;\n            }\n\n            const durationMinutes = startTime && endTime\n                ? Math.max(1, Math.round((endTime - startTime) / 60000))\n                : 30;\n\n            setFormData({\n                title: item.title || '',\n                description: item.description || '',\n                startTime,\n                endTime,\n                durationMinutes,\n                type: item.type || 'Activity',\n                location: item.location || '',\n                isPublic: item.isPublic !== undefined ? item.isPublic : true\n            });\n        } else if (event?.start_time || latestItemEnd) {\n            const defaultStart = latestItemEnd\n                ? (latestItemEnd instanceof Date ? latestItemEnd : new Date(latestItemEnd))\n                : new Date(event.start_time);\n            const defaultEnd = new Date(defaultStart);\n            defaultEnd.setMinutes(defaultEnd.getMinutes() + 30);\n\n            setFormData((prev) => ({\n                ...prev,\n                startTime: defaultStart,\n                endTime: defaultEnd,\n                durationMinutes: 30\n            }));\n        }\n    }, [item, event, latestItemEnd]);\n\n    const formatDateTimeLocal = (dateValue) => {\n        if (!dateValue) return '';\n        const date = dateValue instanceof Date ? dateValue : new Date(dateValue);\n        if (isNaN(date.getTime())) return '';\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const hours = String(date.getHours()).padStart(2, '0');\n        const minutes = String(date.getMinutes()).padStart(2, '0');\n        return `${year}-${month}-${day}T${hours}:${minutes}`;\n    };\n\n    const handleChange = (field, value) => {\n        setFormData((prev) => {\n            const updated = { ...prev };\n\n            if (field === 'startTime') {\n                const dateValue = value ? new Date(value) : null;\n                updated.startTime = dateValue;\n                if (dateValue && updated.endTime) {\n                    const end = new Date(updated.endTime);\n                    if (end > dateValue) {\n                        updated.durationMinutes = Math.max(1, Math.round((end - dateValue) / 60000));\n                    }\n                }\n            } else if (field === 'endTime') {\n                const dateValue = value ? new Date(value) : null;\n                updated.endTime = dateValue;\n                if (dateValue && updated.startTime) {\n                    const start = new Date(updated.startTime);\n                    if (dateValue > start) {\n                        updated.durationMinutes = Math.max(1, Math.round((dateValue - start) / 60000));\n                    }\n                }\n            } else if (field === 'durationMinutes') {\n                const duration = parseInt(value, 10);\n                if (duration > 0 && updated.startTime) {\n                    updated.durationMinutes = duration;\n                    const start = new Date(updated.startTime);\n                    const end = new Date(start);\n                    end.setMinutes(end.getMinutes() + duration);\n                    updated.endTime = end;\n                } else {\n                    updated.durationMinutes = value;\n                }\n            } else {\n                updated[field] = value;\n            }\n\n            return updated;\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (!formData.title || formData.title.trim() === '') {\n            alert('Please enter a title.');\n            return;\n        }\n\n        let startTime = formData.startTime;\n        let endTime = formData.endTime;\n\n        if (inputMode === 'duration') {\n            const duration = parseInt(formData.durationMinutes, 10);\n            if (!duration || duration <= 0) {\n                alert('Please enter a valid duration.');\n                return;\n            }\n            startTime = formData.startTime ? new Date(formData.startTime) : null;\n            endTime = startTime ? new Date(startTime) : null;\n            if (endTime) endTime.setMinutes(endTime.getMinutes() + duration);\n        } else {\n            if (!startTime || !endTime) {\n                alert('Please enter a start time and end time.');\n                return;\n            }\n            startTime = new Date(startTime);\n            endTime = new Date(endTime);\n            if (endTime <= startTime) {\n                alert('End time must be after start time.');\n                return;\n            }\n        }\n\n        const itemData = {\n            ...item,\n            ...formData,\n            startTime: startTime instanceof Date ? startTime : new Date(startTime),\n            endTime: endTime instanceof Date ? endTime : new Date(endTime)\n        };\n        delete itemData.durationMinutes;\n\n        onSave(itemData);\n    };\n\n    const itemTypes = ['Activity', 'Break', 'Setup', 'Breakdown', 'Transition', 'Speaker', 'Custom'];\n\n    return (\n        <Popup isOpen={true} onClose={onCancel} customClassName=\"agenda-item-editor-popup\">\n            <div className=\"agenda-item-editor\">\n                <div className=\"editor-header\">\n                    <h3>\n                        <Icon icon=\"mdi:pencil\" />\n                        {item?.id && !item.id.startsWith('item-') ? 'Edit' : 'Create'} Agenda Item\n                    </h3>\n                    <button className=\"close-btn\" onClick={onCancel}>\n                        <Icon icon=\"mdi:close\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"editor-form\">\n                    <div className=\"form-group\">\n                        <label>\n                            Title <span className=\"required\">*</span>\n                        </label>\n                        <input\n                            type=\"text\"\n                            value={formData.title}\n                            onChange={(e) => handleChange('title', e.target.value)}\n                            required\n                            placeholder=\"Agenda item title\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Description</label>\n                        <textarea\n                            value={formData.description}\n                            onChange={(e) => handleChange('description', e.target.value)}\n                            rows={4}\n                            placeholder=\"Item description\"\n                        />\n                    </div>\n\n                    <div className=\"form-row\">\n                        <div className=\"form-group\">\n                            <label>Type</label>\n                            <select\n                                value={formData.type}\n                                onChange={(e) => handleChange('type', e.target.value)}\n                            >\n                                {itemTypes.map((type) => (\n                                    <option key={type} value={type}>\n                                        {type}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Location</label>\n                            <input\n                                type=\"text\"\n                                value={formData.location}\n                                onChange={(e) => handleChange('location', e.target.value)}\n                                placeholder=\"Location\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>How to specify time</label>\n                        <div className=\"input-mode-toggle\">\n                            <button\n                                type=\"button\"\n                                className={`mode-btn ${inputMode === 'duration' ? 'active' : ''}`}\n                                onClick={() => setInputMode('duration')}\n                            >\n                                <Icon icon=\"mdi:timer-outline\" />\n                                <span>Duration</span>\n                            </button>\n                            <button\n                                type=\"button\"\n                                className={`mode-btn ${inputMode === 'endTime' ? 'active' : ''}`}\n                                onClick={() => setInputMode('endTime')}\n                            >\n                                <Icon icon=\"mdi:clock-outline\" />\n                                <span>End Time</span>\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"form-row\">\n                        <div className=\"form-group\">\n                            <label>Start Time</label>\n                            <input\n                                type=\"datetime-local\"\n                                value={formData.startTime ? formatDateTimeLocal(formData.startTime) : ''}\n                                onChange={(e) => handleChange('startTime', e.target.value)}\n                                required\n                            />\n                        </div>\n\n                        {inputMode === 'duration' ? (\n                            <div className=\"form-group\">\n                                <label>Duration (minutes)</label>\n                                <input\n                                    type=\"number\"\n                                    min=\"1\"\n                                    value={formData.durationMinutes}\n                                    onChange={(e) => handleChange('durationMinutes', e.target.value)}\n                                    placeholder=\"e.g., 30\"\n                                    required\n                                />\n                                <p className=\"help-text\">End time is calculated from start + duration</p>\n                            </div>\n                        ) : (\n                            <div className=\"form-group\">\n                                <label>End Time</label>\n                                <input\n                                    type=\"datetime-local\"\n                                    value={formData.endTime ? formatDateTimeLocal(formData.endTime) : ''}\n                                    onChange={(e) => handleChange('endTime', e.target.value)}\n                                    required\n                                />\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"form-group checkbox-group\">\n                        <label>\n                            <input\n                                type=\"checkbox\"\n                                checked={formData.isPublic}\n                                onChange={(e) => handleChange('isPublic', e.target.checked)}\n                            />\n                            <span>Public (visible to attendees)</span>\n                        </label>\n                        <p className=\"help-text\">Uncheck to make this item internal-only</p>\n                    </div>\n\n                    <div className=\"form-actions\">\n                        <button type=\"button\" className=\"btn-cancel\" onClick={onCancel}>\n                            Cancel\n                        </button>\n                        <button type=\"submit\" className=\"btn-save\">\n                            <Icon icon=\"mdi:check\" />\n                            <span>Save Item</span>\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </Popup>\n    );\n}\n\nexport default AgendaItemEditor;\n","import React, { useState, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport './PublishConfirmModal.scss';\n\nfunction PublishConfirmModal({ \n    event, \n    orgId, \n    timeDifference, \n    onConfirm, \n    onCancel, \n    onPublishWithoutAdjusting,\n    isOpen = true\n}) {\n    const { addNotification } = useNotification();\n    const [checkingAvailability, setCheckingAvailability] = useState(false);\n    const [roomAvailable, setRoomAvailable] = useState(null);\n    const [roomName, setRoomName] = useState(null);\n\n    const isOver = timeDifference?.isOver || false;\n    const isUnder = timeDifference?.isUnder || false;\n    const diffMinutes = Math.abs(timeDifference?.difference || 0);\n\n    // Calculate proposed end time\n    const getProposedEndTime = () => {\n        if (!event?.start_time || !event?.end_time) return null;\n        const currentEnd = new Date(event.end_time);\n        const proposedEnd = new Date(currentEnd);\n        proposedEnd.setMinutes(proposedEnd.getMinutes() + timeDifference.difference);\n        return proposedEnd;\n    };\n\n    const proposedEndTime = getProposedEndTime();\n\n    // Check room availability when modal opens if time needs adjustment\n    useEffect(() => {\n        if ((isOver || isUnder) && event?.classroom_id && proposedEndTime) {\n            checkRoomAvailability();\n        } else if (!event?.classroom_id) {\n            // No room reserved, mark as available\n            setRoomAvailable(true);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const checkRoomAvailability = async () => {\n        if (!event?._id || !orgId || !proposedEndTime) return;\n\n        setCheckingAvailability(true);\n        try {\n            // First, get room name from classroom_id\n            try {\n                const roomResponse = await apiRequest(\n                    `/rooms/${event.classroom_id}`,\n                    null,\n                    { method: 'GET' }\n                );\n\n                if (roomResponse.success && roomResponse.room) {\n                    setRoomName(roomResponse.room.name);\n                }\n            } catch (roomError) {\n                console.warn('Could not fetch room name:', roomError);\n                // Continue without room name\n            }\n\n            // Check availability for the new time range\n            const availabilityResponse = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/check-room-availability`,\n                {\n                    startTime: event.start_time,\n                    endTime: proposedEndTime.toISOString()\n                },\n                { method: 'POST' }\n            );\n\n            if (availabilityResponse.success) {\n                setRoomAvailable(availabilityResponse.data.isAvailable);\n            } else {\n                setRoomAvailable(false);\n            }\n        } catch (error) {\n            console.error('Error checking room availability:', error);\n            setRoomAvailable(false);\n        } finally {\n            setCheckingAvailability(false);\n        }\n    };\n\n    const handleConfirm = () => {\n        if (roomAvailable === false) {\n            addNotification({\n                title: 'Room Unavailable',\n                message: 'The room is not available for the extended time. Please adjust your agenda or choose a different time.',\n                type: 'error'\n            });\n            return;\n        }\n\n        if (proposedEndTime) {\n            onConfirm(proposedEndTime.toISOString());\n        }\n    };\n\n    const formatTime = (date) => {\n        if (!date) return '';\n        const d = new Date(date);\n        return d.toLocaleString('en-US', {\n            month: 'short',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit',\n            hour12: true\n        });\n    };\n\n    return (\n        <Popup \n            isOpen={isOpen} \n            onClose={onCancel}\n            defaultStyling={true}\n            customClassName=\"publish-confirm-modal-popup\"\n        >\n            <div className=\"publish-confirm-modal\">\n                <div className=\"modal-header\">\n                    <h3>\n                        <Icon icon=\"mdi:publish\" />\n                        Publish Agenda\n                    </h3>\n                </div>\n\n                <div className=\"modal-content\">\n                    <div className=\"publish-info-note\">\n                        <Icon icon=\"mdi:information-outline\" />\n                        <span>Your agenda is already saved. Publishing makes it visible to attendees on the event page.</span>\n                    </div>\n                    {isOver && (\n                        <div className=\"time-warning-section over\">\n                            <Icon icon=\"mdi:alert-circle\" />\n                            <div className=\"warning-content\">\n                                <h4>Agenda exceeds event time</h4>\n                                <p>\n                                    Your agenda is <strong>{diffMinutes} minutes</strong> longer than the scheduled event time.\n                                </p>\n                            </div>\n                        </div>\n                    )}\n\n                    {isUnder && (\n                        <div className=\"time-warning-section under\">\n                            <Icon icon=\"mdi:alert-circle-outline\" />\n                            <div className=\"warning-content\">\n                                <h4>Agenda shorter than event time</h4>\n                                <p>\n                                    Your agenda is <strong>{diffMinutes} minutes</strong> shorter than the scheduled event time.\n                                </p>\n                            </div>\n                        </div>\n                    )}\n\n                    {(isOver || isUnder) && (\n                        <div className=\"time-comparison\">\n                            <div className=\"time-row\">\n                                <span className=\"time-label\">Current end time:</span>\n                                <span className=\"time-value\">{formatTime(event?.end_time)}</span>\n                            </div>\n                            <div className=\"time-row\">\n                                <span className=\"time-label\">Proposed end time:</span>\n                                <span className={`time-value ${isOver ? 'over' : 'under'}`}>\n                                    {formatTime(proposedEndTime)}\n                                </span>\n                            </div>\n                        </div>\n                    )}\n\n                    {event?.classroom_id && (isOver || isUnder) && (\n                        <div className=\"room-availability-section\">\n                            {checkingAvailability ? (\n                                <div className=\"availability-checking\">\n                                    <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                                    <span>Checking room availability...</span>\n                                </div>\n                            ) : roomAvailable === true ? (\n                                <div className=\"availability-status available\">\n                                    <Icon icon=\"mdi:check-circle\" />\n                                    <span>\n                                        {roomName ? `Room \"${roomName}\" is available` : 'Room is available'} for the extended time\n                                    </span>\n                                </div>\n                            ) : roomAvailable === false ? (\n                                <div className=\"availability-status unavailable\">\n                                    <Icon icon=\"mdi:alert-circle\" />\n                                    <span>\n                                        {roomName ? `Room \"${roomName}\" is unavailable` : 'Room is unavailable'} for the extended time\n                                    </span>\n                                </div>\n                            ) : null}\n                        </div>\n                    )}\n\n                    {!event?.classroom_id && (isOver || isUnder) && (\n                        <div className=\"no-room-notice\">\n                            <Icon icon=\"mdi:information\" />\n                            <span>No room reserved for this event. Time adjustment will proceed without room check.</span>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"modal-actions\">\n                    {(isOver || isUnder) && (\n                        <button \n                            className={`btn-adjust ${roomAvailable === false ? 'disabled' : ''}`}\n                            onClick={handleConfirm}\n                            disabled={roomAvailable === false || checkingAvailability}\n                        >\n                            Adjust Time & Publish\n                        </button>\n                    )}\n                    <button \n                        className=\"btn-publish-without\" \n                        onClick={(isOver || isUnder) ? onPublishWithoutAdjusting : handleConfirm}\n                    >\n                        {(isOver || isUnder) ? 'Publish Without Adjusting' : 'Publish'}\n                    </button>\n                </div>\n            </div>\n        </Popup>\n    );\n}\n\nexport default PublishConfirmModal;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport AgendaItem from './AgendaItem';\nimport AgendaItemEditor from './AgendaItemEditor';\nimport AgendaDailyCalendar from './AgendaDailyCalendar/AgendaDailyCalendar';\nimport PublishConfirmModal from './PublishConfirmModal';\nimport DeleteConfirmModal from '../../../../../../components/DeleteConfirmModal/DeleteConfirmModal';\nimport EmptyState from '../../../../../../components/EmptyState/EmptyState';\nimport { getStoredAgendaView } from '../../../../../../utils/agendaViewPreferences';\nimport './AgendaBuilder.scss';\n\nconst MINUTE_HEIGHT_PRESETS = [\n    { id: 'compact', label: 'Compact', value: 1 },\n    { id: 'normal', label: 'Normal', value: 3 },\n    { id: 'expanded', label: 'Expanded', value: 5 }\n];\n\nconst AGENDA_VIEW_STORAGE_KEY = 'meridian-agenda-view';\n\nfunction AgendaBuilder({ event, orgId, onRefresh, isTabActive = true }) {\n    const { addNotification } = useNotification();\n    const [items, setItems] = useState([]);\n    const [editingItem, setEditingItem] = useState(null);\n    const [saving, setSaving] = useState(false);\n    const [isPublished, setIsPublished] = useState(false);\n    const [publishing, setPublishing] = useState(false);\n    const [showPublishModal, setShowPublishModal] = useState(false);\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [itemToDelete, setItemToDelete] = useState(null);\n    const [viewMode, setViewMode] = useState(() => getStoredAgendaView().viewMode); // 'creator' | 'calendar'\n    const [calendarMinuteHeight, setCalendarMinuteHeight] = useState(() => getStoredAgendaView().calendarMinuteHeight); // 'compact' | 'normal' | 'expanded'\n\n    useEffect(() => {\n        localStorage.setItem(AGENDA_VIEW_STORAGE_KEY, JSON.stringify({\n            viewMode,\n            calendarMinuteHeight\n        }));\n    }, [viewMode, calendarMinuteHeight]);\n\n    const [headerOutOfView, setHeaderOutOfView] = useState(false);\n    const headerRef = useRef(null);\n\n    const { data: agendaData, loading, refetch } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/agenda` : null\n    );\n\n    useEffect(() => {\n        if (agendaData?.success && agendaData.data?.agenda) {\n            const agenda = agendaData.data.agenda;\n            setIsPublished(agenda.isPublished || false);\n            const eventStart = event?.start_time ? new Date(event.start_time) : new Date();\n            let cursor = new Date(eventStart);\n            const agendaItems = (agenda.items || []).map((item, index) => {\n                const normalizedItem = { ...item };\n                if (item.startTime && typeof item.startTime === 'string') {\n                    normalizedItem.startTime = new Date(item.startTime);\n                }\n                if (item.endTime && typeof item.endTime === 'string') {\n                    normalizedItem.endTime = new Date(item.endTime);\n                }\n                if (!normalizedItem.startTime || !normalizedItem.endTime) {\n                    const duration = parseInt(item.durationMinutes, 10) || 30;\n                    normalizedItem.startTime = new Date(cursor);\n                    normalizedItem.endTime = new Date(cursor);\n                    normalizedItem.endTime.setMinutes(normalizedItem.endTime.getMinutes() + duration);\n                    cursor = new Date(normalizedItem.endTime);\n                } else {\n                    cursor = new Date(normalizedItem.endTime);\n                }\n                return normalizedItem;\n            });\n            setItems(agendaItems);\n        }\n    }, [agendaData, event?.start_time]);\n\n    const saveAgenda = async (itemsToSave = items) => {\n        if (!event?._id || !orgId) {\n            return { success: false, message: 'Missing event ID or org ID' };\n        }\n\n        setSaving(true);\n        try {\n            const sanitizedItems = itemsToSave.map((item) => {\n                const { durationMinutes, ...rest } = item;\n                const sanitized = { ...rest };\n                if (item.startTime) {\n                    sanitized.startTime =\n                        typeof item.startTime === 'string'\n                            ? item.startTime\n                            : new Date(item.startTime).toISOString();\n                }\n                if (item.endTime) {\n                    sanitized.endTime =\n                        typeof item.endTime === 'string'\n                            ? item.endTime\n                            : new Date(item.endTime).toISOString();\n                }\n                return sanitized;\n            });\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/agenda`,\n                { items: sanitizedItems },\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                setIsPublished(false);\n                if (onRefresh) onRefresh();\n                return { success: true };\n            } else {\n                throw new Error(response.message || 'Failed to save agenda');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to save agenda',\n                type: 'error'\n            });\n            return { success: false, message: error.message || 'Failed to save agenda' };\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const getLatestItemEnd = () => {\n        if (items.length === 0) {\n            return event?.start_time ? new Date(event.start_time) : new Date();\n        }\n        const ordered = [...items].sort((a, b) => (a.order || 0) - (b.order || 0));\n        const last = ordered[ordered.length - 1];\n        return last.endTime ? new Date(last.endTime) : new Date(event?.start_time || Date.now());\n    };\n\n    const handleAddItem = () => {\n        const latestEnd = getLatestItemEnd();\n        const startTime = new Date(latestEnd);\n        const endTime = new Date(latestEnd);\n        endTime.setMinutes(endTime.getMinutes() + 30);\n\n        const newItem = {\n            id: `item-${Date.now()}`,\n            title: 'New Agenda Item',\n            description: '',\n            startTime,\n            endTime,\n            type: 'Activity',\n            location: '',\n            assignedRoles: [],\n            isPublic: true,\n            order: items.length\n        };\n\n        setEditingItem(newItem);\n    };\n\n    const handleEditItem = (item) => {\n        setEditingItem(item);\n    };\n\n    const handleDeleteItem = (itemId) => {\n        setItemToDelete(itemId);\n        setShowDeleteModal(true);\n    };\n\n    const confirmDeleteItem = async () => {\n        if (!itemToDelete || !event?._id || !orgId) return;\n\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/agenda/items/${itemToDelete}`,\n                {},\n                { method: 'DELETE' }\n            );\n\n            if (response.success) {\n                setItems(items.filter((item) => item.id !== itemToDelete));\n                setIsPublished(false);\n                if (onRefresh) onRefresh();\n                addNotification({\n                    title: 'Success',\n                    message: 'Agenda item deleted',\n                    type: 'success'\n                });\n            } else {\n                throw new Error(response.message || 'Failed to delete item');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to delete agenda item',\n                type: 'error'\n            });\n        } finally {\n            setShowDeleteModal(false);\n            setItemToDelete(null);\n        }\n    };\n\n    const handleSaveItem = async (itemData) => {\n        const { durationMinutes, ...rest } = itemData;\n        const sanitized = { ...rest };\n        if (itemData.startTime) {\n            sanitized.startTime =\n                itemData.startTime instanceof Date\n                    ? itemData.startTime\n                    : new Date(itemData.startTime);\n        }\n        if (itemData.endTime) {\n            sanitized.endTime =\n                itemData.endTime instanceof Date ? itemData.endTime : new Date(itemData.endTime);\n        }\n\n        const existingIndex = items.findIndex((item) => item.id === sanitized.id);\n        let updatedItems;\n\n        if (existingIndex >= 0) {\n            updatedItems = [...items];\n            updatedItems[existingIndex] = { ...sanitized, order: updatedItems[existingIndex].order };\n        } else {\n            updatedItems = [...items, { ...sanitized, order: items.length }];\n        }\n\n        setItems(updatedItems);\n        setEditingItem(null);\n        await saveAgenda(updatedItems);\n    };\n\n    const calculateTimeDifference = () => {\n        if (!event?.start_time || !event?.end_time || items.length === 0) {\n            return null;\n        }\n\n        const agendaDuration = items.reduce((total, item) => {\n            if (item.startTime && item.endTime) {\n                const start = new Date(item.startTime);\n                const end = new Date(item.endTime);\n                return total + Math.round((end - start) / 60000);\n            }\n            return total;\n        }, 0);\n\n        const eventStart = new Date(event.start_time);\n        const eventEnd = new Date(event.end_time);\n        const eventDuration = Math.round((eventEnd - eventStart) / 60000);\n        const difference = agendaDuration - eventDuration;\n\n        return {\n            agendaDuration,\n            eventDuration,\n            difference,\n            isOver: difference > 0,\n            isUnder: difference < 0,\n            isExact: difference === 0\n        };\n    };\n\n    const handlePublish = () => {\n        if (!event?._id || !orgId) return;\n        if (items.length === 0) {\n            addNotification({\n                title: 'Error',\n                message: 'Cannot publish an empty agenda',\n                type: 'error'\n            });\n            return;\n        }\n\n        const timeDiff = calculateTimeDifference();\n        if (timeDiff && !timeDiff.isExact) {\n            setShowPublishModal(true);\n        } else {\n            publishAgenda();\n        }\n    };\n\n    const publishAgenda = async (newEndTime = null) => {\n        if (!event?._id || !orgId) return;\n\n        setPublishing(true);\n        try {\n            const requestBody = newEndTime ? { newEndTime } : {};\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/agenda/publish`,\n                requestBody,\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                setIsPublished(true);\n                setShowPublishModal(false);\n                if (onRefresh) onRefresh();\n                addNotification({\n                    title: 'Success',\n                    message: newEndTime\n                        ? 'Agenda published and event time adjusted successfully'\n                        : 'Agenda published successfully',\n                    type: 'success'\n                });\n            } else {\n                throw new Error(response.message || 'Failed to publish agenda');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to publish agenda',\n                type: 'error'\n            });\n        } finally {\n            setPublishing(false);\n        }\n    };\n\n    const handlePublishConfirm = (newEndTime) => {\n        publishAgenda(newEndTime);\n    };\n\n    const handlePublishWithoutAdjusting = () => {\n        publishAgenda();\n    };\n\n    const updateHeaderVisibility = useCallback(() => {\n        const header = headerRef.current;\n        const scrollContainer = header?.closest('.dashboard-overlay') || header?.parentElement;\n        if (!header || !scrollContainer) return;\n\n        const headerRect = header.getBoundingClientRect();\n        const containerRect = scrollContainer.getBoundingClientRect();\n        const threshold = containerRect.top + 60;\n        setHeaderOutOfView(headerRect.bottom < threshold);\n    }, []);\n\n    useEffect(() => {\n        const header = headerRef.current;\n        const scrollContainer = header?.closest('.dashboard-overlay') || header?.parentElement;\n        if (!scrollContainer) return;\n\n        const runUpdate = () => requestAnimationFrame(updateHeaderVisibility);\n        updateHeaderVisibility();\n        scrollContainer.addEventListener('scroll', runUpdate, { passive: true });\n        window.addEventListener('resize', runUpdate);\n        return () => {\n            scrollContainer.removeEventListener('scroll', runUpdate);\n            window.removeEventListener('resize', runUpdate);\n        };\n    }, [updateHeaderVisibility, loading]);\n\n    if (loading) {\n        return (\n            <div className=\"agenda-builder loading\">\n                <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                <p>Loading agenda...</p>\n            </div>\n        );\n    }\n\n    const timeDiff = calculateTimeDifference();\n\n    return (\n        <div className=\"agenda-builder\">\n            <div ref={headerRef} className=\"agenda-header\">\n                <div className=\"header-left\">\n                    <h3>\n                        <Icon icon=\"mdi:calendar-clock\" />\n                        Event Agenda\n                    </h3>\n                    <div className=\"header-meta\">\n                        <p>{items.length} item{items.length !== 1 ? 's' : ''}</p>\n                        {timeDiff && !timeDiff.isExact && (\n                            <span className={`time-warning ${timeDiff.isOver ? 'over' : 'under'}`}>\n                                <Icon icon={timeDiff.isOver ? 'mdi:alert-circle' : 'mdi:alert-circle-outline'} />\n                                {timeDiff.isOver\n                                    ? `${Math.abs(timeDiff.difference)} min over`\n                                    : `${Math.abs(timeDiff.difference)} min under`}\n                            </span>\n                        )}\n                        {isPublished ? (\n                            <span className=\"publish-status published\" title=\"Agenda is visible to attendees\">\n                                <Icon icon=\"mdi:check-circle\" />\n                                Published\n                            </span>\n                        ) : (\n                            <>\n                                <span className=\"publish-status saved\" title=\"Your changes are saved to the database\">\n                                    <Icon icon=\"mdi:content-save-check\" />\n                                    Saved\n                                </span>\n                                <span className=\"publish-status draft\" title=\"Not visible to attendees. Click Publish when ready.\">\n                                    <Icon icon=\"mdi:eye-off-outline\" />\n                                    Draft\n                                </span>\n                            </>\n                        )}\n                    </div>\n                </div>\n                <div className=\"header-actions\">\n                    <div className=\"view-toggle\">\n                        <label className=\"view-label\">View:</label>\n                        <button\n                            className={`view-btn ${viewMode === 'creator' ? 'active' : ''}`}\n                            onClick={() => setViewMode('creator')}\n                            title=\"Creator View - Sequential list of items\"\n                        >\n                            <Icon icon=\"mdi:format-list-numbered\" />\n                            <span>List</span>\n                        </button>\n                        <button\n                            className={`view-btn ${viewMode === 'calendar' ? 'active' : ''}`}\n                            onClick={() => setViewMode('calendar')}\n                            title=\"Calendar View - Google-style timeline\"\n                        >\n                            <Icon icon=\"mdi:view-timeline\" />\n                            <span>Calendar</span>\n                        </button>\n                    </div>\n                    <button className=\"btn-primary\" onClick={handleAddItem}>\n                        <Icon icon=\"mdi:plus\" />\n                        <span>Add Item</span>\n                    </button>\n                    {!isPublished && items.length > 0 && (\n                        <button\n                            className=\"btn-publish\"\n                            onClick={handlePublish}\n                            disabled={publishing}\n                            title=\"Make the agenda visible to attendees. Your changes are already saved.\"\n                        >\n                            <Icon\n                                icon={publishing ? 'mdi:loading' : 'mdi:publish'}\n                                className={publishing ? 'spinner' : ''}\n                            />\n                            <span>{publishing ? 'Publishing...' : 'Publish'}</span>\n                        </button>\n                    )}\n\n                    {saving && (\n                        <span className=\"saving-indicator\">\n                            <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                            Saving...\n                        </span>\n                    )}\n                </div>\n            </div>\n\n            {headerOutOfView && isTabActive && createPortal(\n                <div className=\"agenda-floating-actions\">\n                    <button className=\"btn-primary\" onClick={handleAddItem}>\n                        <Icon icon=\"mdi:plus\" />\n                        <span>Add Item</span>\n                    </button>\n                    {!isPublished && items.length > 0 && (\n                        <button\n                            className=\"btn-publish\"\n                            onClick={handlePublish}\n                            disabled={publishing}\n                        >\n                            <Icon\n                                icon={publishing ? 'mdi:loading' : 'mdi:publish'}\n                                className={publishing ? 'spinner' : ''}\n                            />\n                            <span>{publishing ? 'Publishing...' : 'Publish'}</span>\n                        </button>\n                    )}\n                </div>,\n                document.body\n            )}\n\n            {viewMode === 'calendar' ? (\n                <div className=\"agenda-calendar-wrapper\">\n                    <div className=\"calendar-zoom-controls\">\n                        <label className=\"zoom-label\">Zoom:</label>\n                        {MINUTE_HEIGHT_PRESETS.map((preset) => (\n                            <button\n                                key={preset.id}\n                                type=\"button\"\n                                className={`zoom-btn ${calendarMinuteHeight === preset.id ? 'active' : ''}`}\n                                onClick={() => setCalendarMinuteHeight(preset.id)}\n                                title={`${preset.label} (${preset.value}px/min)`}\n                            >\n                                {preset.label}\n                            </button>\n                        ))}\n                    </div>\n                    <AgendaDailyCalendar\n                        agendaItems={items}\n                        event={event}\n                        minuteHeight={MINUTE_HEIGHT_PRESETS.find((p) => p.id === calendarMinuteHeight)?.value ?? 4}\n                        onEditItem={handleEditItem}\n                    />\n                </div>\n            ) : items.length === 0 ? (\n                <EmptyState\n                    icon=\"mdi:calendar-blank\"\n                    title=\"No agenda items yet\"\n                    description=\"Start building your event agenda by adding items.\"\n                    actions={[{ label: 'Add first item', onClick: handleAddItem, primary: true }]}\n                />\n            ) : (\n                <div className=\"agenda-items-container\">\n                    {[...items]\n                        .sort((a, b) => (a.order || 0) - (b.order || 0))\n                        .map((item) => (\n                            <AgendaItem\n                                key={item.id}\n                                item={item}\n                                onEdit={() => handleEditItem(item)}\n                                onDelete={() => handleDeleteItem(item.id)}\n                            />\n                            ))}\n                </div>\n            )}\n\n            {editingItem && (\n                <AgendaItemEditor\n                    item={editingItem}\n                    event={event}\n                    latestItemEnd={items.length > 0 ? getLatestItemEnd() : null}\n                    onSave={handleSaveItem}\n                    onCancel={() => setEditingItem(null)}\n                />\n            )}\n\n            {showPublishModal && timeDiff && (\n                <PublishConfirmModal\n                    event={event}\n                    orgId={orgId}\n                    timeDifference={timeDiff}\n                    onConfirm={handlePublishConfirm}\n                    onCancel={() => setShowPublishModal(false)}\n                    onPublishWithoutAdjusting={handlePublishWithoutAdjusting}\n                />\n            )}\n\n            <DeleteConfirmModal\n                isOpen={showDeleteModal}\n                onConfirm={confirmDeleteItem}\n                onCancel={() => {\n                    setShowDeleteModal(false);\n                    setItemToDelete(null);\n                }}\n                title=\"Delete Agenda Item\"\n                message=\"Are you sure you want to delete this agenda item? This will remove the item from the agenda.\"\n                warningDetails=\"This action cannot be undone.\"\n            />\n        </div>\n    );\n}\n\nexport default AgendaBuilder;\n","import React from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport './JobsManager.scss';\n\nfunction JobShiftScheduler({ roles, event }) {\n    if (!roles || roles.length === 0 || !event) return null;\n\n    const formatTime = (date) => {\n        if (!date) return 'TBD';\n        return new Date(date).toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const rolesWithShifts = roles.filter(role => role.shiftStart && role.shiftEnd);\n\n    if (rolesWithShifts.length === 0) {\n        return (\n            <div className=\"shift-scheduler\">\n                <h4>\n                    <Icon icon=\"mdi:calendar-clock\" />\n                    Shift Schedule\n                </h4>\n                <p className=\"no-shifts\">Shift Scheduling Coming Soon.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"shift-scheduler\">\n            <h4>\n                <Icon icon=\"mdi:calendar-clock\" />\n                Shift Schedule\n            </h4>\n            <div className=\"shifts-timeline\">\n                {rolesWithShifts.map(role => (\n                    <div key={role._id} className=\"shift-item\">\n                        <div className=\"shift-role\">\n                            <strong>{role.name}</strong>\n                            <span className=\"shift-time\">\n                                {formatTime(role.shiftStart)} - {formatTime(role.shiftEnd)}\n                            </span>\n                        </div>\n                        <div className=\"shift-coverage\">\n                            <span>\n                                {role.assignments?.filter(a => a.status === 'confirmed').length || 0} / {role.requiredCount}\n                            </span>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default JobShiftScheduler;\n","import React from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport HeaderContainer from '../../../../../../components/HeaderContainer/HeaderContainer';\nimport './JobPicker.scss';\n\nfunction JobPicker({\n    orgRoles,\n    roles,\n    creatingJobTemplate,\n    setCreatingJobTemplate,\n    newJobTemplate,\n    setNewJobTemplate,\n    onCreateJobTemplate,\n    onIncrementJob,\n    onDecrementJob,\n    onClose,\n}) {\n    return (\n        <HeaderContainer\n            classN=\"job-picker\"\n            icon=\"mdi:briefcase\"\n            header=\"Add Job Slots\"\n            right={\n                <div className=\"header-actions\">\n                    <button\n                        className=\"btn-secondary\"\n                        onClick={() => setCreatingJobTemplate(prev => !prev)}\n                    >\n                        <Icon icon=\"mdi:plus\" />\n                        {creatingJobTemplate ? 'Cancel' : 'New Template'}\n                    </button>\n                    <button className=\"close-btn\" onClick={onClose} type=\"button\" aria-label=\"Close\">\n                        <Icon icon=\"mdi:close\" />\n                    </button>\n                </div>\n            }\n        >\n            {creatingJobTemplate && (\n                <div className=\"job-template-form\">\n                    <div className=\"form-group\">\n                        <label>Template Name *</label>\n                        <input\n                            type=\"text\"\n                            value={newJobTemplate.name}\n                            onChange={(e) => setNewJobTemplate(prev => ({ ...prev, name: e.target.value }))}\n                            placeholder=\"e.g., Registration, Ticketing\"\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Description</label>\n                        <textarea\n                            rows={2}\n                            value={newJobTemplate.description}\n                            onChange={(e) => setNewJobTemplate(prev => ({ ...prev, description: e.target.value }))}\n                            placeholder=\"Describe this job template\"\n                        />\n                    </div>\n                    <div className=\"form-actions\">\n                        <button\n                            className=\"btn-save\"\n                            onClick={onCreateJobTemplate}\n                            disabled={!newJobTemplate.name.trim()}\n                        >\n                            <Icon icon=\"mdi:check\" />\n                            Create & Add Slot\n                        </button>\n                    </div>\n                </div>\n            )}\n            <div className=\"job-picker-list\">\n                {orgRoles.map(orgRole => {\n                    const existingRole = roles.find(role => {\n                        const orgRoleId = role.orgRoleId?._id || role.orgRoleId;\n                        return orgRoleId === orgRole._id;\n                    });\n                    const count = existingRole?.requiredCount || 0;\n\n                    return (\n                        <div key={orgRole._id} className=\"job-picker-item\">\n                            <div className=\"job-info\">\n                                <strong>{orgRole.name}</strong>\n                                {orgRole.description && <p>{orgRole.description}</p>}\n                            </div>\n                            <div className=\"job-actions\">\n                                <button\n                                    className=\"action-btn remove\"\n                                    onClick={() => onDecrementJob(orgRole)}\n                                    title=\"Remove slot\"\n                                    disabled={count <= 0}\n                                >\n                                    <Icon icon=\"mdi:minus\" />\n                                </button>\n                                <span className=\"job-count\">{count}</span>\n                                <button\n                                    className=\"action-btn add\"\n                                    onClick={() => onIncrementJob(orgRole)}\n                                    title=\"Add slot\"\n                                >\n                                    <Icon icon=\"mdi:plus\" />\n                                </button>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </HeaderContainer>\n    );\n}\n\nexport default JobPicker;\n","import React, { useState } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport HeaderContainer from '../../../../../../components/HeaderContainer/HeaderContainer';\nimport './JobSignup.scss';\n\nfunction JobSignup({ event, orgId, roles, onClose, onSuccess }) {\n    const { addNotification } = useNotification();\n    const [selectedRole, setSelectedRole] = useState('');\n    const [shiftStart, setShiftStart] = useState('');\n    const [shiftEnd, setShiftEnd] = useState('');\n    const [signingUp, setSigningUp] = useState(false);\n\n    const availableRoles = roles?.filter(role => {\n        const assignedCount = role.assignments?.filter(a => a.status === 'confirmed').length || 0;\n        return assignedCount < role.requiredCount;\n    }) || [];\n\n    const handleSignup = async () => {\n        if (!selectedRole) {\n            addNotification({\n                title: 'Error',\n                message: 'Please select a job',\n                type: 'error'\n            });\n            return;\n        }\n\n        if (!event?._id || !orgId) return;\n\n        setSigningUp(true);\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/volunteer-signups`,\n                {\n                    roleId: selectedRole,\n                    shiftStart: shiftStart || null,\n                    shiftEnd: shiftEnd || null\n                },\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                addNotification({\n                    title: 'Success',\n                    message: 'You have successfully signed up for this job',\n                    type: 'success'\n                });\n                if (onSuccess) onSuccess();\n                onClose();\n            } else {\n                throw new Error(response.message || 'Failed to sign up');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to sign up for job',\n                type: 'error'\n            });\n        } finally {\n            setSigningUp(false);\n        }\n    };\n\n    if (availableRoles.length === 0) {\n        return (\n            <HeaderContainer classN=\"volunteer-signup\" icon=\"mdi:account-plus\" header=\"Volunteer Signup\"\n            right={\n                <button className=\"close-btn\" onClick={onClose} type=\"button\" aria-label=\"Close\">\n                    <Icon icon=\"mdi:close\" />\n                </button>\n            }\n            >\n                <div className=\"no-roles-available\">\n                    <Icon icon=\"mdi:information\" />\n                    <p>No jobs available for signup. All jobs are fully staffed.</p>\n                </div>\n            </HeaderContainer>\n        );\n    }\n\n    return (\n        <HeaderContainer\n            classN=\"volunteer-signup\"\n            icon=\"mdi:account-plus\"\n            header=\"Volunteer Signup\"\n            right={\n                <button className=\"close-btn\" onClick={onClose} type=\"button\" aria-label=\"Close\">\n                    <Icon icon=\"mdi:close\" />\n                </button>\n            }\n        >\n            <div className=\"signup-form\">\n                    <div className=\"form-group\">\n                        <label>\n                            Select Job <span className=\"required\">*</span>\n                        </label>\n                        <select\n                            value={selectedRole}\n                            onChange={(e) => setSelectedRole(e.target.value)}\n                            required\n                        >\n                            <option value=\"\">Choose a job</option>\n                            {availableRoles.map(role => {\n                                const assignedCount = role.assignments?.filter(a => a.status === 'confirmed').length || 0;\n                                const remaining = role.requiredCount - assignedCount;\n                                return (\n                                    <option key={role._id} value={role._id}>\n                                        {role.name} ({remaining} spot{remaining !== 1 ? 's' : ''} available)\n                                    </option>\n                                );\n                            })}\n                        </select>\n                    </div>\n\n                    {selectedRole && (() => {\n                        const role = availableRoles.find(r => r._id === selectedRole);\n                        if (role && (!role.shiftStart || !role.shiftEnd)) {\n                            return (\n                                <>\n                                    <div className=\"form-group\">\n                                        <label>Shift Start (Optional)</label>\n                                        <input\n                                            type=\"datetime-local\"\n                                            value={shiftStart}\n                                            onChange={(e) => setShiftStart(e.target.value)}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Shift End (Optional)</label>\n                                        <input\n                                            type=\"datetime-local\"\n                                            value={shiftEnd}\n                                            onChange={(e) => setShiftEnd(e.target.value)}\n                                        />\n                                    </div>\n                                </>\n                            );\n                        }\n                        return null;\n                    })()}\n\n                    <div className=\"form-actions\">\n                        <button type=\"button\" className=\"btn-cancel\" onClick={onClose}>\n                            Cancel\n                        </button>\n                        <button \n                            type=\"button\" \n                            className=\"btn-save\"\n                            onClick={handleSignup}\n                            disabled={!selectedRole || signingUp}\n                        >\n                            {signingUp ? (\n                                <>\n                                    <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                                    <span>Signing Up...</span>\n                                </>\n                            ) : (\n                                <>\n                                    <Icon icon=\"mdi:check\" />\n                                    <span>Sign Up</span>\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </div>\n        </HeaderContainer>\n    );\n}\n\nexport default JobSignup;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport defaultAvatar from '../../../../../../assets/defaultAvatar.svg';\nimport './MemberDropdown.scss';\n\nfunction MemberDropdown({ \n    members, \n    selectedMemberId,\n    onMemberSelect,\n    disabled,\n    placeholder = \"Select member\"\n}) {\n    const [showDrop, setShowDrop] = useState(false);\n    const [isAnimating, setIsAnimating] = useState(false);\n    const [shouldRender, setShouldRender] = useState(false);\n    const dropdownRef = useRef(null);\n\n    const selectedMember = members.find(m => \n        (m.user_id?._id?.toString() || m.user_id?.toString()) === selectedMemberId\n    );\n\n    useEffect(() => {\n        if (showDrop) {\n            setShouldRender(true);\n            setIsAnimating(true);\n        } else {\n            setIsAnimating(false);\n            const timer = setTimeout(() => {\n                setShouldRender(false);\n            }, 200); // Match the animation duration\n            return () => clearTimeout(timer);\n        }\n    }, [showDrop]);\n\n    // Handle click outside to close dropdown\n    useEffect(() => {\n        const handleClickOutside = (event) => {\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n                setShowDrop(false);\n            }\n        };\n\n        if (showDrop) {\n            document.addEventListener('mousedown', handleClickOutside);\n        }\n\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [showDrop]);\n\n    const handleMemberClick = (member) => {\n        const memberId = member.user_id?._id || member.user_id;\n        if (onMemberSelect) {\n            onMemberSelect(memberId);\n        }\n        setShowDrop(false);\n    };\n\n    return (\n        <div className=\"member-dropdown\" ref={dropdownRef} onClick={(e) => {\n            if (!disabled) {\n                e.stopPropagation();\n                setShowDrop(!showDrop);\n            }\n        }}>\n            {selectedMember ? (\n                <>\n                    <img \n                        src={selectedMember.user_id?.picture || defaultAvatar} \n                        alt={selectedMember.user_id?.name || 'Member'} \n                    />\n                    <h1>{selectedMember.user_id?.name || 'Unknown'}</h1>\n                </>\n            ) : (\n                <h1>{placeholder}</h1>\n            )}\n            <Icon \n                icon={`${showDrop ? \"ic:round-keyboard-arrow-up\" : \"ic:round-keyboard-arrow-down\"}`} \n                width=\"20\" \n                height=\"20\" \n            />\n            {shouldRender && (\n                <div className={`dropdown ${!isAnimating ? 'dropdown-exit' : ''}`} onClick={(e) => e.stopPropagation()}>  \n                    <div className=\"member-list\">\n                        {members.length === 0 ? (\n                            <div className=\"no-members\">\n                                <p>No members available</p>\n                            </div>\n                        ) : (\n                            members.map((member) => {\n                                const memberId = member.user_id?._id?.toString() || member.user_id?.toString();\n                                const isSelected = memberId === selectedMemberId;\n                                return (\n                                    <div \n                                        className={`drop-option ${isSelected ? \"selected\" : \"\"}`} \n                                        key={memberId}\n                                        onClick={() => handleMemberClick(member)}\n                                    >\n                                        <img \n                                            src={member.user_id?.picture || defaultAvatar} \n                                            alt={member.user_id?.name || 'Member'} \n                                        />\n                                        <div className=\"member-info\">\n                                            <p>{member.user_id?.name || 'Unknown'}</p>\n                                            {member.role && (\n                                                <span className=\"member-role\">{member.role}</span>\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })\n                        )}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default MemberDropdown;\n","import React, { useState, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport DeleteConfirmModal from '../../../../../../components/DeleteConfirmModal/DeleteConfirmModal';\nimport JobShiftScheduler from './JobShiftScheduler';\nimport JobPicker from './JobPicker';\nimport JobSignup from './JobSignup';\nimport MemberDropdown from './MemberDropdown';\nimport EmptyState from '../../../../../../components/EmptyState/EmptyState';\nimport './JobsManager.scss';\n\nfunction JobsManager({ event, orgId, onRefresh }) {\n    const { addNotification } = useNotification();\n    const [copiedEmail, setCopiedEmail] = useState(null);\n\n    const handleCopyEmail = async (email) => {\n        try {\n            await navigator.clipboard.writeText(email);\n            setCopiedEmail(email);\n            addNotification({\n                title: 'Copied',\n                message: 'Email copied to clipboard',\n                type: 'success'\n            });\n            setTimeout(() => setCopiedEmail(null), 2000);\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: 'Failed to copy email',\n                type: 'error'\n            });\n        }\n    };\n    const [roles, setRoles] = useState([]);\n    const [signups, setSignups] = useState([]);\n    const [orgRoles, setOrgRoles] = useState([]);\n    const [showVolunteerSignup, setShowVolunteerSignup] = useState(false);\n    const [showJobPicker, setShowJobPicker] = useState(false);\n    const [creatingJobTemplate, setCreatingJobTemplate] = useState(false);\n    const [newJobTemplate, setNewJobTemplate] = useState({ name: '', description: '' });\n    const [loading, setLoading] = useState(true);\n    const [assigningMembers, setAssigningMembers] = useState({}); // Track which roles are currently assigning\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [roleToDelete, setRoleToDelete] = useState(null);\n    const [showRemoveAssignmentModal, setShowRemoveAssignmentModal] = useState(false);\n    const [assignmentToRemove, setAssignmentToRemove] = useState(null); // { role, assignmentId, memberName }\n\n    // Fetch roles\n    const { data: rolesData, refetch: refetchRoles } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/roles` : null\n    );\n\n    // Fetch volunteer signups\n    const { data: signupsData, refetch: refetchSignups } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/volunteer-signups` : null\n    );\n\n    // Fetch org-level role definitions\n    const { data: orgRolesData } = useFetch(\n        orgId ? `/org-event-management/${orgId}/event-roles` : null\n    );\n\n    // Fetch org members for assignment\n    const { data: membersData } = useFetch(\n        orgId ? `/org-roles/${orgId}/members` : null\n    );\n\n    const members = membersData?.members || [];\n\n    useEffect(() => {\n        if (rolesData?.success) {\n            setRoles(rolesData.data.roles || []);\n            setLoading(false);\n        }\n    }, [rolesData]);\n\n    useEffect(() => {\n        if (signupsData?.success) {\n            setSignups(signupsData.data.signups || []);\n        }\n    }, [signupsData]);\n\n    useEffect(() => {\n        if (orgRolesData?.success) {\n            setOrgRoles(orgRolesData.data.roles || []);\n        }\n    }, [orgRolesData]);\n\n    const handleAddRole = () => {\n        if (orgRoles.length === 0) {\n            addNotification({\n                title: 'No Job Templates',\n                message: 'Create job templates in Settings  Job Templates before assigning jobs to events.',\n                type: 'warning'\n            });\n            return;\n        }\n        setShowJobPicker(true);\n    };\n\n    const handleDeleteRole = (roleId) => {\n        setRoleToDelete(roleId);\n        setShowDeleteModal(true);\n    };\n\n    const confirmDeleteRole = async () => {\n        if (!roleToDelete || !event?._id || !orgId) return;\n\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/roles/${roleToDelete}`,\n                {},\n                { method: 'DELETE' }\n            );\n\n            if (response.success) {\n                setRoles(roles.filter(role => role._id !== roleToDelete));\n                refetchRoles();\n                if (onRefresh) onRefresh();\n                addNotification({\n                    title: 'Success',\n                    message: 'Job deleted successfully',\n                    type: 'success'\n                });\n            } else {\n                throw new Error(response.message || 'Failed to delete job');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to delete job',\n                type: 'error'\n            });\n        } finally {\n            setShowDeleteModal(false);\n            setRoleToDelete(null);\n        }\n    };\n\n    const handleIncrementJob = async (orgRole) => {\n        if (!event?._id || !orgId) return;\n\n        const existingRole = roles.find(role => {\n            const orgRoleId = role.orgRoleId?._id || role.orgRoleId;\n            return orgRoleId === orgRole._id;\n        });\n\n        try {\n            let response;\n            if (existingRole) {\n                response = await apiRequest(\n                    `/org-event-management/${orgId}/events/${event._id}/roles/${existingRole._id}`,\n                    { requiredCount: (existingRole.requiredCount || 0) + 1 },\n                    { method: 'PUT' }\n                );\n            } else {\n                response = await apiRequest(\n                    `/org-event-management/${orgId}/events/${event._id}/roles`,\n                    { orgRoleId: orgRole._id, requiredCount: 1 },\n                    { method: 'POST' }\n                );\n            }\n\n            if (response.success) {\n                refetchRoles();\n                if (onRefresh) onRefresh();\n            } else {\n                throw new Error(response.message || 'Failed to update job count');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to update job count',\n                type: 'error'\n            });\n        }\n    };\n\n    const handleDecrementJob = async (orgRole) => {\n        if (!event?._id || !orgId) return;\n\n        const existingRole = roles.find(role => {\n            const orgRoleId = role.orgRoleId?._id || role.orgRoleId;\n            return orgRoleId === orgRole._id;\n        });\n\n        if (!existingRole || !existingRole.requiredCount) return;\n\n        try {\n            if (existingRole.requiredCount <= 1) {\n                const response = await apiRequest(\n                    `/org-event-management/${orgId}/events/${event._id}/roles/${existingRole._id}`,\n                    {},\n                    { method: 'DELETE' }\n                );\n\n                if (!response.success) {\n                    throw new Error(response.message || 'Failed to remove job');\n                }\n            } else {\n                const response = await apiRequest(\n                    `/org-event-management/${orgId}/events/${event._id}/roles/${existingRole._id}`,\n                    { requiredCount: existingRole.requiredCount - 1 },\n                    { method: 'PUT' }\n                );\n\n                if (!response.success) {\n                    throw new Error(response.message || 'Failed to update job count');\n                }\n            }\n\n            refetchRoles();\n            if (onRefresh) onRefresh();\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to update job count',\n                type: 'error'\n            });\n        }\n    };\n\n    const handleCreateJobTemplate = async () => {\n        if (!orgId) return;\n        if (!newJobTemplate.name.trim()) return;\n\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/event-roles`,\n                {\n                    name: newJobTemplate.name.trim(),\n                    description: newJobTemplate.description.trim()\n                },\n                { method: 'POST' }\n            );\n\n            if (!response.success) {\n                throw new Error(response.message || 'Failed to create job template');\n            }\n\n            const createdRole = response.data?.role;\n            if (createdRole) {\n                setOrgRoles(prev => {\n                    const updated = [...prev, createdRole];\n                    return updated.sort((a, b) => a.name.localeCompare(b.name));\n                });\n                setNewJobTemplate({ name: '', description: '' });\n                setCreatingJobTemplate(false);\n                await handleIncrementJob(createdRole);\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to create job template',\n                type: 'error'\n            });\n        }\n    };\n\n    const handleAssignMember = async (role, memberId) => {\n        if (!memberId || !event?._id || !orgId || !role?._id) return;\n\n        // Check if member is already assigned to this role\n        const alreadyAssigned = role.assignments?.some(\n            a => a.memberId?._id?.toString() === memberId || a.memberId?.toString() === memberId\n        );\n\n        if (alreadyAssigned) {\n            addNotification({\n                title: 'Already Assigned',\n                message: 'This member is already assigned to this job',\n                type: 'warning'\n            });\n            return;\n        }\n\n        setAssigningMembers(prev => ({ ...prev, [role._id]: true }));\n\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/assignments`,\n                {\n                    roleId: role._id,\n                    memberId: memberId,\n                    status: 'confirmed' // Always start as confirmed\n                },\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                refetchRoles();\n                if (onRefresh) onRefresh();\n                addNotification({\n                    title: 'Success',\n                    message: 'Member assigned successfully',\n                    type: 'success'\n                });\n            } else {\n                throw new Error(response.message || 'Failed to assign member');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to assign member',\n                type: 'error'\n            });\n        } finally {\n            setAssigningMembers(prev => ({ ...prev, [role._id]: false }));\n        }\n    };\n\n    const handleRemoveAssignment = (role, assignmentId) => {\n        const assignment = role.assignments?.find(a => a._id === assignmentId);\n        const memberName = assignment?.memberId?.name || 'this member';\n        setAssignmentToRemove({ role, assignmentId, memberName });\n        setShowRemoveAssignmentModal(true);\n    };\n\n    const confirmRemoveAssignment = async () => {\n        if (!assignmentToRemove || !event?._id || !orgId || !assignmentToRemove.role?._id || !assignmentToRemove.assignmentId) return;\n\n        const { role, assignmentId } = assignmentToRemove;\n        setAssigningMembers(prev => ({ ...prev, [role._id]: true }));\n\n        try {\n            const response = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}/assignments/${assignmentId}`,\n                {},\n                { method: 'DELETE' }\n            );\n\n            if (response.success) {\n                refetchRoles();\n                if (onRefresh) onRefresh();\n                addNotification({\n                    title: 'Success',\n                    message: 'Member removed successfully',\n                    type: 'success'\n                });\n            } else {\n                throw new Error(response.message || 'Failed to remove member');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to remove member',\n                type: 'error'\n            });\n        } finally {\n            setAssigningMembers(prev => ({ ...prev, [role._id]: false }));\n            setShowRemoveAssignmentModal(false);\n            setAssignmentToRemove(null);\n        }\n    };\n\n\n    if (loading) {\n        return (\n            <div className=\"roles-manager loading\">\n                <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                <p>Loading jobs...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"roles-manager\">\n            <div className=\"roles-header\">\n                <div className=\"header-left\">\n                    <h3>\n                        <Icon icon=\"mdi:account-group\" />\n                        Event Jobs & Assignments\n                    </h3>\n                    <p>{roles.length} job{roles.length !== 1 ? 's' : ''} defined</p>\n                </div>\n                <div className=\"header-actions\">\n                    <button\n                        className=\"btn-secondary\"\n                        onClick={() => setShowVolunteerSignup(true)}\n                    >\n                        <Icon icon=\"mdi:account-plus\" />\n                        <span>Volunteer Signup</span>\n                    </button>\n                    <button \n                        className=\"btn-primary\"\n                        onClick={handleAddRole}\n                        disabled={orgRoles.length === 0}\n                    >\n                        <Icon icon=\"mdi:plus\" />\n                        <span>Add Job Slots</span>\n                    </button>\n                </div>\n            </div>\n\n            {orgRoles.length === 0 && (\n                <EmptyState\n                    icon=\"mdi:information-outline\"\n                    title=\"No job templates available\"\n                    description=\"Create job templates in Settings  Job Templates to assign jobs to this event.\"\n                />\n            )}\n\n            {roles.length === 0 ? (\n                <EmptyState\n                    icon=\"mdi:account-group-outline\"\n                    title=\"No event jobs assigned yet\"\n                    description=\"Add event jobs to keep everyone organized.\"\n                />\n            ) : (\n                <div className=\"roles-list\">\n                    {roles.map(role => {\n                        const confirmedCount = role.assignments?.filter(a => a.status === 'confirmed').length || 0;\n                        const isFullyStaffed = confirmedCount >= role.requiredCount;\n                        \n                        return (\n                            <div key={role._id} className={`role-card ${isFullyStaffed ? 'fully-staffed' : ''}`}>\n                                <div className=\"role-header\">\n                                    <div className=\"role-info\">\n                                        <h4>{role.name}</h4>\n                                        {role.description && (\n                                            <p>{role.description}</p>\n                                        )}\n                                    </div>\n                                    <div className=\"role-actions\">\n                                        <button \n                                            className=\"action-btn delete\"\n                                            onClick={() => handleDeleteRole(role._id)}\n                                            title=\"Delete Job\"\n                                        >\n                                            <Icon icon=\"mdi:delete\" />\n                                        </button>\n                                    </div>\n                                </div>\n                            {role.shiftStart && role.shiftEnd && (\n                                <div className=\"role-stats\">\n                                    <div className=\"stat-item\">\n                                        <Icon icon=\"mdi:clock-outline\" />\n                                        <span>\n                                            {new Date(role.shiftStart).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })} - \n                                            {new Date(role.shiftEnd).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\n                                        </span>\n                                    </div>\n                                </div>\n                            )}\n                                <div className=\"role-assignments\">\n                                    <div className=\"assignments-header\">\n                                        <h5>Assignments ({confirmedCount} / {role.requiredCount})</h5>\n                                        {!isFullyStaffed && (\n                                            <div className=\"member-selector\">\n                                                <MemberDropdown\n                                                    members={members.filter(member => {\n                                                        // Filter out already assigned members\n                                                        const memberId = member.user_id._id.toString();\n                                                        return !role.assignments?.some(\n                                                            a => (a.memberId?._id?.toString() || a.memberId?.toString()) === memberId\n                                                        );\n                                                    })}\n                                                    onMemberSelect={(memberId) => {\n                                                        if (memberId) {\n                                                            handleAssignMember(role, memberId);\n                                                        }\n                                                    }}\n                                                    disabled={assigningMembers[role._id]}\n                                                    placeholder=\"Select member\"\n                                                />\n                                            </div>\n                                        )}\n                                        {isFullyStaffed && (\n                                            <span className=\"fully-staffed-badge\">\n                                                <Icon icon=\"mdi:check-circle\" />\n                                                Fully Staffed\n                                            </span>\n                                        )}\n                                    </div>\n                                <div className=\"assignments-list\">\n                                    {/* Show confirmed assignments */}\n                                    {role.assignments\n                                        ?.filter(a => a.status === 'confirmed')\n                                        .map((assignment, index) => (\n                                            <div key={`assigned-${index}`} className=\"assignment-item\">\n                                                <div className=\"member-info\">\n                                                    <span className=\"member-name\">\n                                                        {assignment.memberId?.name || 'Unknown'}\n                                                    </span>\n                                                    {assignment.memberId?.email && (\n                                                        <span \n                                                            className=\"member-email clickable\"\n                                                            onClick={() => handleCopyEmail(assignment.memberId.email)}\n                                                            title=\"Click to copy email\"\n                                                        >\n                                                            {assignment.memberId.email}\n                                                            <Icon \n                                                                icon={copiedEmail === assignment.memberId.email ? \"mdi:check\" : \"mdi:content-copy\"} \n                                                                className=\"copy-icon\"\n                                                            />\n                                                        </span>\n                                                    )}\n                                                </div>\n                                                <div className=\"assignment-actions\">\n                                                    <span className={`status-badge ${assignment.status || 'confirmed'}`}>\n                                                        {assignment.status || 'confirmed'}\n                                                    </span>\n                                                    <button\n                                                        className=\"remove-assignment-btn\"\n                                                        onClick={() => handleRemoveAssignment(role, assignment._id)}\n                                                        title=\"Remove member\"\n                                                        disabled={assigningMembers[role._id]}\n                                                    >\n                                                        <Icon icon=\"mdi:close\" />\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    \n                                    {/* Show placeholder slots for unfilled positions */}\n                                    {Array.from({ length: Math.max(0, role.requiredCount - confirmedCount) }).map((_, index) => (\n                                        <div key={`placeholder-${index}`} className=\"assignment-item placeholder-slot\">\n                                            <div className=\"member-info\">\n                                                <Icon icon=\"mdi:account-outline\" className=\"placeholder-icon\" />\n                                                <span className=\"placeholder-text\">Open slot</span>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    );\n                    })}\n                </div>\n            )}\n\n            <JobShiftScheduler roles={roles} event={event} />\n\n\n            <Popup\n                isOpen={showJobPicker}\n                onClose={() => setShowJobPicker(false)}\n                customClassName=\"job-picker-popup medium-content\"\n                defaultStyling={false}\n                hideCloseButton\n            >\n                <JobPicker \n                    orgRoles={orgRoles}\n                    roles={roles}\n                    creatingJobTemplate={creatingJobTemplate}\n                    setCreatingJobTemplate={setCreatingJobTemplate}\n                    newJobTemplate={newJobTemplate}\n                    setNewJobTemplate={setNewJobTemplate}\n                    onCreateJobTemplate={handleCreateJobTemplate}\n                    onIncrementJob={handleIncrementJob}\n                    onDecrementJob={handleDecrementJob}\n                    onClose={() => setShowJobPicker(false)}\n                />\n            </Popup>\n\n            <Popup\n                isOpen={showVolunteerSignup}\n                onClose={() => setShowVolunteerSignup(false)}\n                customClassName=\"volunteer-signup-popup medium-content\"\n                defaultStyling={false}\n                hideCloseButton\n            >\n                <JobSignup\n                    event={event}\n                    orgId={orgId}\n                    roles={roles}\n                    onClose={() => setShowVolunteerSignup(false)}\n                    onSuccess={() => {\n                        refetchSignups();\n                        refetchRoles();\n                        if (onRefresh) onRefresh();\n                    }}\n                />\n            </Popup>\n\n            <DeleteConfirmModal\n                isOpen={showDeleteModal}\n                onConfirm={confirmDeleteRole}\n                onCancel={() => {\n                    setShowDeleteModal(false);\n                    setRoleToDelete(null);\n                }}\n                title=\"Delete Job\"\n                message=\"Are you sure you want to delete this job? All assignments will be removed.\"\n                warningDetails=\"All assigned members will be removed from this job.\"\n            />\n\n            <DeleteConfirmModal\n                isOpen={showRemoveAssignmentModal}\n                onConfirm={confirmRemoveAssignment}\n                onCancel={() => {\n                    setShowRemoveAssignmentModal(false);\n                    setAssignmentToRemove(null);\n                }}\n                title=\"Remove Assignment\"\n                message={`Are you sure you want to remove ${assignmentToRemove?.memberName || 'this member'} from this job?`}\n                warningDetails=\"The member will be unassigned from this job slot.\"\n                confirmLabel=\"Remove\"\n            />\n        </div>\n    );\n}\n\nexport default JobsManager;\n","import React, { useState, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../NotificationContext';\nimport apiRequest from '../../../../../utils/postRequest';\nimport HeaderContainer from '../../../../../components/HeaderContainer/HeaderContainer';\nimport './EventDashboard.scss';\n\nfunction EventAnalyticsDetail({ event, orgId, onRefresh }) {\n    const { addNotification } = useNotification();\n    const [analytics, setAnalytics] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [exporting, setExporting] = useState(false);\n\n    // Fetch detailed analytics using the correct route\n    const { data: analyticsData, refetch } = useFetch(\n        event?._id ? `/event-analytics/event/${event._id}?timeRange=30d` : null\n    );\n\n    useEffect(() => {\n        if (analyticsData?.success) {\n            setAnalytics(analyticsData.data);\n            setLoading(false);\n        } else if (analyticsData && !analyticsData.success) {\n            setLoading(false);\n        }\n    }, [analyticsData]);\n\n    useEffect(() => {\n        // Refresh analytics every 30 seconds for real-time updates\n        const interval = setInterval(() => {\n            refetch();\n        }, 30000);\n\n        return () => clearInterval(interval);\n    }, [refetch]);\n\n    const formatDate = (dateString) => {\n        return new Date(dateString).toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const formatNumber = (num) => {\n        return new Intl.NumberFormat().format(num);\n    };\n\n    // const handleExport = async () => {\n    //     if (!event?._id || !orgId) return;\n\n    //     setExporting(true);\n    //     try {\n    //         const response = await apiRequest(\n    //             `/org-event-management/${orgId}/events/${event._id}/export`,\n    //             { format: 'json' },\n    //             { method: 'POST' }\n    //         );\n\n    //         if (response.success && response.data?.report) {\n    //             // Create and download JSON file\n    //             const blob = new Blob([JSON.stringify(response.data.report, null, 2)], { type: 'application/json' });\n    //             const url = URL.createObjectURL(blob);\n    //             const a = document.createElement('a');\n    //             a.href = url;\n    //             a.download = `event-report-${event.name?.replace(/[^a-z0-9]/gi, '-') || event._id}.json`;\n    //             document.body.appendChild(a);\n    //             a.click();\n    //             document.body.removeChild(a);\n    //             URL.revokeObjectURL(url);\n\n    //             addNotification({\n    //                 title: 'Success',\n    //                 message: 'Report exported successfully',\n    //                 type: 'success'\n    //             });\n    //         } else {\n    //             throw new Error(response.message || 'Failed to export report');\n    //         }\n    //     } catch (error) {\n    //         addNotification({\n    //             title: 'Error',\n    //             message: error.message || 'Failed to export report',\n    //             type: 'error'\n    //         });\n    //     } finally {\n    //         setExporting(false);\n    //     }\n    // };\n\n    if (loading) {\n        return (\n            <div className=\"event-analytics-detail loading\">\n                <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                <p>Loading analytics...</p>\n            </div>\n        );\n    }\n\n    if (!analytics) {\n        return (\n            <div className=\"event-analytics-detail error\">\n                <Icon icon=\"mdi:alert-circle\" />\n                <p>Failed to load analytics</p>\n            </div>\n        );\n    }\n\n    const registrationHistory = analytics.registrationHistory || [];\n    const totalRegistrations = analytics.registrations || registrationHistory.length || 0;\n\n    // Get view data - viewHistory is filtered by timeRange on backend\n    const viewHistory = analytics.viewHistory || [];\n    const loggedInViews = viewHistory.filter(v => !v.isAnonymous && v.userId);\n    \n    // Count filtered views (these are already filtered by timeRange)\n    const filteredLoggedInViews = loggedInViews.length;\n    const filteredAnonymousViews = viewHistory.filter(v => v.isAnonymous).length;\n    const filteredTotalViews = filteredLoggedInViews + filteredAnonymousViews;\n    \n    // Use API's total counts for display (these are unfiltered totals)\n    const loggedInViewsCount = analytics.views || 0;\n    const anonymousViewsCount = analytics.anonymousViews || 0;\n    const totalViews = loggedInViewsCount + anonymousViewsCount;\n\n    const engagementRate = filteredTotalViews > 0\n        ? ((totalRegistrations / filteredTotalViews) * 100)\n        : (analytics.engagementRate || 0);\n\n    const uniqueViewsTotal = analytics.uniqueViews || 0;\n    const uniqueRegistrationsTotal = analytics.uniqueRegistrations || 0;\n    const conversionRate = uniqueViewsTotal > 0\n        ? ((uniqueRegistrationsTotal / uniqueViewsTotal) * 100).toFixed(1)\n        : 0;\n\n    const avgViewsPerUser = uniqueViewsTotal > 0\n        ? (totalViews / uniqueViewsTotal).toFixed(1)\n        : 0;\n\n    // Calculate recent activity (last 24 hours)\n    const now = new Date();\n    const last24Hours = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n    const recentViews = viewHistory.filter(v => new Date(v.timestamp) >= last24Hours).length;\n    const recentRegistrations = registrationHistory.filter(r => new Date(r.timestamp) >= last24Hours).length;\n\n    return (\n        <div className=\"event-analytics-detail\">\n            <div className=\"analytics-header\">\n                <h3>\n                    <Icon icon=\"mingcute:chart-fill\" />\n                    Event Analytics\n                </h3>\n                <div className=\"live-indicator\">\n                    <span className=\"live-dot\"></span>\n                    <span>Live</span>\n                </div>\n            </div>\n\n            <div className=\"analytics-grid\">\n                <HeaderContainer\n                    icon=\"mdi:eye\"\n                    header=\"Views\"\n                    classN=\"analytics-card\"\n                    size=\"1rem\"\n                >\n                    <div className=\"card-content\">\n                        <div className=\"views-grid\">\n                            <div className=\"views-squares-wrapper\">\n                                <div className=\"view-square-wrapper\">\n                                    <div className=\"view-square\">\n                                        <div className=\"view-square-content\">\n                                            <span className=\"view-value\">{formatNumber(loggedInViewsCount)}</span>\n                                            <span className=\"view-label\">Logged-in</span>\n                                            <span className=\"view-subtitle\">{formatNumber(analytics.uniqueViews || 0)} unique</span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"view-square-wrapper\">\n                                    <div className=\"view-square\">\n                                        <div className=\"view-square-content\">\n                                            <span className=\"view-value\">{formatNumber(anonymousViewsCount)}</span>\n                                            <span className=\"view-label\">Anonymous</span>\n                                            <span className=\"view-subtitle\">{formatNumber(analytics.uniqueAnonymousViews || 0)} unique</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"view-total-wrapper\">\n                                <div className=\"view-total\">\n                                    <div className=\"view-total-content\">\n                                        <span className=\"view-value\">{formatNumber(totalViews)}</span>\n                                        <span className=\"view-label\">Total Views</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </HeaderContainer>\n\n                <HeaderContainer\n                    icon=\"mingcute:trending-up-fill\"\n                    header=\"Engagement\"\n                    classN=\"analytics-card\"\n                    size=\"1rem\"\n                >\n                    <div className=\"card-content\">\n                        <div className=\"stat-large\">\n                            <span className=\"stat-value\">{engagementRate.toFixed(1)}%</span>\n                            <span className=\"stat-label\">Engagement Rate</span>\n                        </div>\n                        <div className=\"engagement-bar-container\">\n                            <div className=\"engagement-bar\">\n                                <div \n                                    className=\"engagement-fill\" \n                                    style={{ width: `${Math.min(engagementRate, 100)}%` }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"rsvp-segments-display\">\n                            <div className=\"rsvp-segment-item going\">\n                                <span className=\"segment-number\">{totalRegistrations}</span>\n                                <span className=\"segment-label\">Registrations</span>\n                            </div>\n                        </div>\n                    </div>\n                </HeaderContainer>\n\n                <HeaderContainer\n                    icon=\"mingcute:chart-line-fill\"\n                    header=\"Conversion & Activity\"\n                    classN=\"analytics-card\"\n                    size=\"1rem\"\n                >\n                    <div className=\"card-content\">\n                        <div className=\"conversion-metrics\">\n                            <div className=\"conversion-item\">\n                                <div className=\"conversion-value\">{conversionRate}%</div>\n                                <div className=\"conversion-label\">View-to-Registration</div>\n                                <div className=\"conversion-subtitle\">Unique conversion rate</div>\n                            </div>\n                            <div className=\"conversion-item\">\n                                <div className=\"conversion-value\">{totalRegistrations}</div>\n                                <div className=\"conversion-label\">Registrations</div>\n                                <div className=\"conversion-subtitle\">Total registered</div>\n                            </div>\n                            <div className=\"conversion-item\">\n                                <div className=\"conversion-value\">{avgViewsPerUser}</div>\n                                <div className=\"conversion-label\">Avg Views/User</div>\n                                <div className=\"conversion-subtitle\">Per unique viewer</div>\n                            </div>\n                        </div>\n                        <div className=\"recent-activity\">\n                            <div className=\"activity-header\">\n                                <Icon icon=\"mdi:clock-outline\" />\n                                <span>Last 24 Hours</span>\n                            </div>\n                            <div className=\"activity-stats\">\n                                <div className=\"activity-stat\">\n                                    <span className=\"activity-value\">{recentViews}</span>\n                                    <span className=\"activity-label\">Views</span>\n                                </div>\n                                <div className=\"activity-stat\">\n                                    <span className=\"activity-value\">{recentRegistrations}</span>\n                                    <span className=\"activity-label\">Registrations</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </HeaderContainer>\n            </div>\n\n            {loggedInViews.length > 0 && (\n                <HeaderContainer\n                    icon=\"mingcute:eye-fill\"\n                    header=\"Logged-in Views\"\n                    classN=\"logged-in-views-section\"\n                    size=\"1.25rem\"\n                >\n                    <div className=\"logged-in-views-list\">\n                        {loggedInViews.slice(0, 20).map((view, index) => (\n                            <div key={index} className=\"history-item\">\n                                <div className=\"history-icon\">\n                                    <Icon icon=\"mingcute:eye-fill\" />\n                                </div>\n                                <div className=\"history-content\">\n                                    <p className=\"history-time\">{formatDate(view.timestamp)}</p>\n                                    <p className=\"history-detail\">User viewed this event</p>\n                                </div>\n                            </div>\n                        ))}\n                        {loggedInViews.length > 20 && (\n                            <div className=\"views-more\">\n                                <span>+{loggedInViews.length - 20} more views</span>\n                            </div>\n                        )}\n                    </div>\n                </HeaderContainer>\n            )}\n\n            {/* <div className=\"analytics-actions\">\n                <button \n                    className=\"btn-export\" \n                    onClick={handleExport}\n                    disabled={exporting}\n                >\n                    <Icon icon={exporting ? \"mdi:loading\" : \"mdi:download\"} className={exporting ? \"spinner\" : \"\"} />\n                    <span>{exporting ? 'Exporting...' : 'Export Report'}</span>\n                </button>\n            </div> */}\n        </div>\n    );\n}\n\nexport default EventAnalyticsDetail;\n","import React, { useState } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport './EventCheckIn.scss';\n\nfunction QRCodeDisplay({ qrCode, eventName }) {\n    const [copied, setCopied] = useState(false);\n\n    const handleDownload = () => {\n        const link = document.createElement('a');\n        link.href = qrCode;\n        link.download = `${eventName || 'event'}-checkin-qr.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    };\n\n    const handleShare = async () => {\n        if (navigator.share) {\n            try {\n                await navigator.share({\n                    title: `Check-in QR Code - ${eventName}`,\n                    text: `Scan this QR code to check in to ${eventName}`,\n                    files: [await fetch(qrCode).then(r => r.blob())]\n                });\n            } catch (error) {\n                if (error.name !== 'AbortError') {\n                    console.error('Error sharing QR code:', error);\n                }\n            }\n        } else {\n            // Fallback: copy image to clipboard\n            try {\n                const response = await fetch(qrCode);\n                const blob = await response.blob();\n                await navigator.clipboard.write([\n                    new ClipboardItem({ 'image/png': blob })\n                ]);\n                setCopied(true);\n                setTimeout(() => setCopied(false), 2000);\n            } catch (error) {\n                console.error('Error copying QR code:', error);\n            }\n        }\n    };\n\n    return (\n        <div className=\"qr-code-display\">\n            <div className=\"qr-code-image-container\">\n                <img src={qrCode} alt=\"Check-in QR Code\" className=\"qr-code-image\" />\n            </div>\n            <div className=\"qr-code-actions\">\n                <button className=\"action-button\" onClick={handleDownload}>\n                    <Icon icon=\"mdi:download\" />\n                    Download\n                </button>\n                <button className=\"action-button\" onClick={handleShare}>\n                    <Icon icon={copied ? 'mdi:check' : 'mdi:share'} />\n                    {copied ? 'Copied!' : 'Share'}\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default QRCodeDisplay;\n","import React, { useState } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport './EventCheckIn.scss';\n\nfunction CheckInLink({ checkInUrl, eventName }) {\n    const [copied, setCopied] = useState(false);\n\n    const handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(checkInUrl);\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n        } catch (error) {\n            console.error('Error copying link:', error);\n            // Fallback for older browsers\n            const textArea = document.createElement('textarea');\n            textArea.value = checkInUrl;\n            document.body.appendChild(textArea);\n            textArea.select();\n            document.execCommand('copy');\n            document.body.removeChild(textArea);\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n        }\n    };\n\n    const handleShare = async () => {\n        if (navigator.share) {\n            try {\n                await navigator.share({\n                    title: `Check-in Link - ${eventName}`,\n                    text: `Check in to ${eventName}`,\n                    url: checkInUrl\n                });\n            } catch (error) {\n                if (error.name !== 'AbortError') {\n                    console.error('Error sharing link:', error);\n                }\n            }\n        } else {\n            // Fallback: copy to clipboard\n            handleCopy();\n        }\n    };\n\n    return (\n        <div className=\"checkin-link-display\">\n            <div className=\"link-container\">\n                <input \n                    type=\"text\" \n                    value={checkInUrl} \n                    readOnly \n                    className=\"link-input\"\n                    onClick={(e) => e.target.select()}\n                />\n            </div>\n            <div className=\"link-actions\">\n                <button className=\"action-button\" onClick={handleCopy}>\n                    <Icon icon={copied ? 'mdi:check' : 'mdi:content-copy'} />\n                    {copied ? 'Copied!' : 'Copy'}\n                </button>\n                <button className=\"action-button\" onClick={handleShare}>\n                    <Icon icon=\"mdi:share\" />\n                    Share\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default CheckInLink;\n","import React, { useState, useMemo } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { formatDistanceToNow } from 'date-fns';\nimport './EventCheckIn.scss';\n\nfunction CheckInList({ attendees, onManualCheckIn, onRemoveCheckIn, onOpenManualCheckInModal }) {\n    const [searchQuery, setSearchQuery] = useState('');\n    const [filterMethod, setFilterMethod] = useState('all'); // 'all', 'self', 'manual'\n\n    const filteredAttendees = useMemo(() => {\n        let filtered = attendees;\n\n        // Filter by search query\n        if (searchQuery) {\n            const query = searchQuery.toLowerCase();\n            filtered = filtered.filter(attendee => {\n                const user = attendee.userId;\n                const name = user?.name || user?.username || 'Unknown';\n                return name.toLowerCase().includes(query);\n            });\n        }\n\n        // Filter by method\n        if (filterMethod === 'self') {\n            filtered = filtered.filter(a => !a.checkedInBy);\n        } else if (filterMethod === 'manual') {\n            filtered = filtered.filter(a => a.checkedInBy);\n        }\n\n        return filtered;\n    }, [attendees, searchQuery, filterMethod]);\n\n    const formatCheckInTime = (date) => {\n        if (!date) return 'Unknown';\n        try {\n            return formatDistanceToNow(new Date(date), { addSuffix: true });\n        } catch (error) {\n            return 'Unknown';\n        }\n    };\n\n    const getUserDisplayName = (attendee) => {\n        const user = attendee.userId;\n        return user?.name || user?.username || 'Unknown User';\n    };\n\n    const getUserPicture = (attendee) => {\n        const user = attendee.userId;\n        return user?.picture || null;\n    };\n\n    if (attendees.length === 0) {\n        return (\n            <div className=\"checkin-list-empty\">\n                <Icon icon=\"mdi:account-off\" />\n                <p>No attendees have checked in yet.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"checkin-list\">\n            {/* Search and Filter */}\n            <div className=\"checkin-list-controls\">\n                <div className=\"search-input-wrapper\">\n                    <Icon icon=\"mdi:magnify\" className=\"search-icon\" />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Search attendees...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"search-input\"\n                    />\n                </div>\n                <div className=\"filter-buttons\">\n                    <button\n                        className={`filter-button ${filterMethod === 'all' ? 'active' : ''}`}\n                        onClick={() => setFilterMethod('all')}\n                    >\n                        All\n                    </button>\n                    <button\n                        className={`filter-button ${filterMethod === 'self' ? 'active' : ''}`}\n                        onClick={() => setFilterMethod('self')}\n                    >\n                        Self Check-In\n                    </button>\n                    <button\n                        className={`filter-button ${filterMethod === 'manual' ? 'active' : ''}`}\n                        onClick={() => setFilterMethod('manual')}\n                    >\n                        Manual\n                    </button>\n                </div>\n            </div>\n\n            {/* Attendees List */}\n            <div className=\"attendees-list\">\n                {filteredAttendees.length === 0 ? (\n                    <div className=\"checkin-list-empty\">\n                        <Icon icon=\"mdi:magnify\" />\n                        <p>No attendees match your search.</p>\n                    </div>\n                ) : (\n                    filteredAttendees.map((attendee, index) => {\n                        const user = attendee.userId;\n                        const checkedInBy = attendee.checkedInBy;\n                        const isManual = !!checkedInBy;\n                        const attendeeUserId = (user && (user._id || user.id)) ? String(user._id || user.id) : null;\n                        return (\n                            <div key={index} className=\"attendee-item\">\n                                <div className=\"attendee-info\">\n                                    <div className=\"attendee-avatar\">\n                                        {getUserPicture(attendee) ? (\n                                            <img \n                                                src={getUserPicture(attendee)} \n                                                alt={getUserDisplayName(attendee)}\n                                            />\n                                        ) : (\n                                            <Icon icon=\"mdi:account-circle\" />\n                                        )}\n                                    </div>\n                                    <div className=\"attendee-details\">\n                                        <div className=\"attendee-name\">\n                                            {getUserDisplayName(attendee)}\n                                        </div>\n                                        <div className=\"attendee-meta\">\n                                            <span className=\"checkin-time\">\n                                                <Icon icon=\"mdi:clock-outline\" />\n                                                {formatCheckInTime(attendee.checkedInAt)}\n                                            </span>\n                                            <span className={`checkin-method ${isManual ? 'manual' : 'self'}`}>\n                                                <Icon icon={isManual ? 'mdi:account-check' : 'mdi:qrcode-scan'} />\n                                                {isManual ? 'Manual' : 'Self Check-In'}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"attendee-actions\">\n                                    {isManual && checkedInBy && (\n                                        <div className=\"checked-in-by\">\n                                            Checked in by {checkedInBy?.name || checkedInBy?.username || 'Organizer'}\n                                        </div>\n                                    )}\n                                    {onRemoveCheckIn && attendeeUserId && (\n                                        <button\n                                            type=\"button\"\n                                            className=\"remove-checkin-btn\"\n                                            onClick={() => onRemoveCheckIn(attendeeUserId)}\n                                            title=\"Remove check-in\"\n                                        >\n                                            <Icon icon=\"mdi:logout\" />\n                                            Remove\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        );\n                    })\n                )}\n            </div>\n\n            {/* Manual Check-In Button (if onManualCheckIn provided) */}\n            {onManualCheckIn && onOpenManualCheckInModal && (\n                <div className=\"manual-checkin-section\">\n                    <button type=\"button\" className=\"manual-checkin-button\" onClick={onOpenManualCheckInModal}>\n                        <Icon icon=\"mdi:account-plus\" />\n                        Manually Check In Attendee\n                    </button>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default CheckInList;\n","import React, { useState, useEffect } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport QRCodeDisplay from '../../../../../../components/EventCheckIn/QRCodeDisplay';\nimport CheckInLink from '../../../../../../components/EventCheckIn/CheckInLink';\nimport CheckInList from '../../../../../../components/EventCheckIn/CheckInList';\nimport EmptyState from '../../../../../../components/EmptyState/EmptyState';\nimport HeaderContainer from '../../../../../../components/HeaderContainer/HeaderContainer';\nimport KpiCard from '../../../../../../components/Analytics/Dashboard/KpiCard';\nimport { useEventRoom } from '../../../../../../WebSocketContext';\nimport './EventCheckInTab.scss';\n\nfunction EventCheckInTab({ event, orgId, onRefresh, isTabActive = false }) {\n    const { addNotification } = useNotification();\n    const [refreshing, setRefreshing] = useState(false);\n    const [qrCodeData, setQrCodeData] = useState(null);\n    const [checkInLink, setCheckInLink] = useState(null);\n    const [attendees, setAttendees] = useState([]);\n    const [stats, setStats] = useState(null);\n    const [showManualCheckInModal, setShowManualCheckInModal] = useState(false);\n    const [enablingCheckIn, setEnablingCheckIn] = useState(false);\n    const [disablingCheckIn, setDisablingCheckIn] = useState(false);\n\n    // Fetch QR code if check-in is enabled and method includes QR\n    const { data: qrResponse, refetch: refetchQR } = useFetch(\n        event?.checkInEnabled && \n        (event?.checkInSettings?.method === 'qr' || event?.checkInSettings?.method === 'both') &&\n        event?._id && orgId\n            ? `/events/${event._id}/check-in/qr`\n            : null\n    );\n\n    // Fetch check-in link if check-in is enabled and method includes link\n    const { data: linkResponse, refetch: refetchLink } = useFetch(\n        event?.checkInEnabled && \n        (event?.checkInSettings?.method === 'link' || event?.checkInSettings?.method === 'both') &&\n        event?._id && orgId\n            ? `/events/${event._id}/check-in/link`\n            : null\n    );\n\n    // Fetch checked-in attendees\n    const { data: attendeesResponse, refetch: refetchAttendees } = useFetch(\n        event?.checkInEnabled && event?._id && orgId\n            ? `/events/${event._id}/check-in/attendees`\n            : null\n    );\n\n    // Fetch all registrations when manual check-in modal is open (to pick someone to check in)\n    const { data: allRegistrationsResponse, loading: loadingRegistrations } = useFetch(\n        showManualCheckInModal && event?._id ? `/attendees/${event._id}` : null\n    );\n\n    // Live updates: only open websocket when check-in tab is active and check-in is enabled; disconnect when leaving tab\n    const shouldConnect = Boolean(isTabActive && event?.checkInEnabled && event?._id);\n    useEventRoom(shouldConnect ? event._id : null, () => {\n        refetchAttendees?.();\n        onRefresh?.();\n    });\n\n    useEffect(() => {\n        if (qrResponse?.success) {\n            setQrCodeData(qrResponse.qrCode);\n        }\n    }, [qrResponse]);\n\n    useEffect(() => {\n        if (linkResponse?.success) {\n            setCheckInLink(linkResponse.checkInUrl);\n        }\n    }, [linkResponse]);\n\n    useEffect(() => {\n        if (attendeesResponse?.success) {\n            setAttendees(attendeesResponse.attendees || []);\n            setStats(attendeesResponse.stats || null);\n        }\n    }, [attendeesResponse]);\n\n    const handleRefresh = async () => {\n        setRefreshing(true);\n        try {\n            await Promise.all([\n                refetchQR(),\n                refetchLink(),\n                refetchAttendees()\n            ]);\n            if (onRefresh) {\n                onRefresh();\n            }\n        } catch (error) {\n            console.error('Error refreshing check-in data:', error);\n        } finally {\n            setRefreshing(false);\n        }\n    };\n\n    const [linkCopied, setLinkCopied] = useState(false);\n    const handleCopyCheckInLink = async () => {\n        if (!checkInLink) return;\n        try {\n            await navigator.clipboard.writeText(checkInLink);\n            setLinkCopied(true);\n            setTimeout(() => setLinkCopied(false), 2000);\n            addNotification({\n                title: 'Copied',\n                message: 'Check-in link copied to clipboard',\n                type: 'success'\n            });\n        } catch (err) {\n            addNotification({\n                title: 'Error',\n                message: err?.message || 'Failed to copy link',\n                type: 'error'\n            });\n        }\n    };\n\n    const handleManualCheckIn = async (userId) => {\n        try {\n            const response = await apiRequest(\n                `/events/${event._id}/check-in/${userId}`,\n                {},\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                addNotification({\n                    title: 'Success',\n                    message: 'User checked in successfully',\n                    type: 'success'\n                });\n                setShowManualCheckInModal(false);\n                await refetchAttendees();\n                if (onRefresh) {\n                    onRefresh();\n                }\n            } else {\n                throw new Error(response.message || 'Failed to check in user');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to check in user',\n                type: 'error'\n            });\n        }\n    };\n\n    const getAttendeeUserId = (a) => (a.userId && (a.userId._id || a.userId.id || a.userId)) ? String(a.userId._id || a.userId.id || a.userId) : null;\n    const checkedInIds = new Set((attendees || []).map(getAttendeeUserId).filter(Boolean));\n    const allRegistrations = allRegistrationsResponse?.success ? (allRegistrationsResponse.attendees || []) : [];\n    const notCheckedIn = allRegistrations.filter((r) => {\n        const id = getAttendeeUserId(r);\n        return id && !checkedInIds.has(id);\n    });\n\n    const handleRemoveCheckIn = async (userId) => {\n        try {\n            const response = await apiRequest(\n                `/events/${event._id}/check-out/${userId}`,\n                {},\n                { method: 'POST' }\n            );\n\n            if (response.success) {\n                addNotification({\n                    title: 'Success',\n                    message: 'Check-in removed',\n                    type: 'success'\n                });\n                await refetchAttendees();\n                if (onRefresh) {\n                    onRefresh();\n                }\n            } else {\n                throw new Error(response.message || 'Failed to remove check-in');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to remove check-in',\n                type: 'error'\n            });\n        }\n    };\n\n    if (!event) {\n        return <div className=\"event-checkin-tab\">Loading...</div>;\n    }\n\n    const handleEnableCheckIn = async () => {\n        setEnablingCheckIn(true);\n        try {\n            const response = await apiRequest(\n                `/events/${event._id}/check-in/enable`,\n                {},\n                { method: 'POST' }\n            );\n            if (response.success) {\n                addNotification({\n                    title: 'Success',\n                    message: 'Check-in is now enabled for this event.',\n                    type: 'success'\n                });\n                if (onRefresh) {\n                    onRefresh();\n                }\n            } else {\n                throw new Error(response.message || 'Failed to enable check-in');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to enable check-in',\n                type: 'error'\n            });\n        } finally {\n            setEnablingCheckIn(false);\n        }\n    };\n\n    const handleDisableCheckIn = async () => {\n        if (!event?._id) return;\n        setDisablingCheckIn(true);\n        try {\n            const response = await apiRequest(\n                `/events/${event._id}/check-in/disable`,\n                {},\n                { method: 'POST' }\n            );\n            if (response.success) {\n                addNotification({\n                    title: 'Success',\n                    message: 'Check-in is now disabled for this event.',\n                    type: 'success'\n                });\n                if (onRefresh) {\n                    onRefresh();\n                }\n            } else {\n                throw new Error(response.message || 'Failed to disable check-in');\n            }\n        } catch (error) {\n            addNotification({\n                title: 'Error',\n                message: error.message || 'Failed to disable check-in',\n                type: 'error'\n            });\n        } finally {\n            setDisablingCheckIn(false);\n        }\n    };\n\n    if (!event.checkInEnabled) {\n        return (\n            <div className=\"event-checkin-tab\">\n                <EmptyState\n                    icon=\"mdi:qrcode-scan\"\n                    title=\"Check-In Not Enabled\"\n                    description=\"Enable check-in to start tracking attendance with QR code, link, or manual check-in. You can change QR/link options in the Edit tab after enabling.\"\n                    actions={\n                        <button\n                            type=\"button\"\n                            className=\"enable-checkin-button\"\n                            onClick={handleEnableCheckIn}\n                            disabled={enablingCheckIn}\n                        >\n                            <Icon icon={enablingCheckIn ? 'mdi:loading' : 'mdi:qrcode-scan'} className={enablingCheckIn ? 'spin' : ''} />\n                            {enablingCheckIn ? 'Enabling...' : 'Enable check-in'}\n                        </button>\n                    }\n                />\n            </div>\n        );\n    }\n\n    const method = event.checkInSettings?.method || 'both';\n    const showQR = method === 'qr' || method === 'both';\n    const showLink = method === 'link' || method === 'both';\n\n    return (\n        <div className=\"event-checkin-tab\">\n            <div className=\"checkin-header\">\n                <h2>\n                    <Icon icon=\"mdi:qrcode-scan\" />\n                    Event Check-In\n                </h2>\n                <div className=\"checkin-header-actions\">\n                    <button\n                        type=\"button\"\n                        className=\"disable-checkin-button\"\n                        onClick={handleDisableCheckIn}\n                        disabled={disablingCheckIn}\n                        title=\"Turn off check-in for this event\"\n                    >\n                        <Icon icon={disablingCheckIn ? 'mdi:loading' : 'mdi:account-off'} className={disablingCheckIn ? 'spin' : ''} />\n                        {disablingCheckIn ? 'Disabling...' : 'Disable check-in'}\n                    </button>\n                    <button \n                        className=\"refresh-button\" \n                        onClick={handleRefresh}\n                        disabled={refreshing}\n                    >\n                        <Icon icon={refreshing ? 'mdi:loading' : 'mdi:refresh'} className={refreshing ? 'spin' : ''} />\n                        {refreshing ? 'Refreshing...' : 'Refresh'}\n                    </button>\n                </div>\n            </div>\n\n            {/* Statistics */}\n            {stats && (\n                <div className=\"checkin-stats\">\n                    <KpiCard\n                        title=\"Checked In\"\n                        value={stats.totalCheckedIn}\n                        icon=\"mdi:account-check\"\n                        iconVariant=\"approved\"\n                    />\n                    <KpiCard\n                        title=\"Total Registrations\"\n                        value={stats.totalRegistrations ?? stats.totalRSVPs ?? 0}\n                        icon=\"mdi:account-group\"\n                    />\n                    <KpiCard\n                        title=\"Check-In Rate\"\n                        value={`${stats.checkInRate}%`}\n                        icon=\"mdi:chart-line\"\n                    />\n                </div>\n            )}\n\n            {/* QR Code + Checked-In Attendees side by side */}\n            <div className=\"checkin-methods\">\n                {(showQR || showLink) && (\n                    <HeaderContainer\n                        icon={showQR ? 'mdi:qrcode' : 'mdi:link'}\n                        header={showQR ? 'QR Code' : 'Check-in link'}\n                        classN=\"checkin-section checkin-section-qr\"\n                        right={checkInLink ? (\n                            <button\n                                type=\"button\"\n                                className=\"copy-checkin-link-btn\"\n                                onClick={handleCopyCheckInLink}\n                                title=\"Copy check-in link\"\n                            >\n                                <Icon icon={linkCopied ? 'mdi:check' : 'mdi:link-variant'} />\n                                {linkCopied ? 'Copied' : 'Copy link'}\n                            </button>\n                        ) : showLink && !checkInLink ? (\n                            <span className=\"checkin-link-loading\">Loading link</span>\n                        ) : null}\n                    >\n                        <div className=\"checkin-section-content\">\n                            {showQR ? (\n                                qrCodeData ? (\n                                    <QRCodeDisplay qrCode={qrCodeData} eventName={event.name} />\n                                ) : (\n                                    <div className=\"loading-placeholder\">Loading QR code...</div>\n                                )\n                            ) : (\n                                checkInLink ? (\n                                    <CheckInLink checkInUrl={checkInLink} eventName={event.name} />\n                                ) : (\n                                    <div className=\"loading-placeholder\">Loading link...</div>\n                                )\n                            )}\n                        </div>\n                    </HeaderContainer>\n                )}\n\n                {/* Checked-In Attendees List */}\n                <HeaderContainer\n                    icon=\"mdi:account-check\"\n                    header=\"Checked-In Attendees\"\n                    subheader={<span>{attendees.length} attendees</span>}\n                    classN=\"checkin-section checkin-section-attendees\"\n                >\n                    <div className=\"checkin-section-content\">\n                        {attendees.length === 0 ? (\n                            <EmptyState\n                                icon=\"mdi:account-check-outline\"\n                                title=\"No attendees have checked in yet\"\n                                description=\"Checked-in attendees will appear here. You can manually check in someone from the list of registrations.\"\n                                actions={\n                                    <button\n                                        type=\"button\"\n                                        className=\"manual-checkin-button\"\n                                        onClick={() => setShowManualCheckInModal(true)}\n                                    >\n                                        <Icon icon=\"mdi:account-plus\" />\n                                        Manually check in attendee\n                                    </button>\n                                }\n                            />\n                        ) : (\n                            <CheckInList \n                                attendees={attendees}\n                                onManualCheckIn={handleManualCheckIn}\n                                onRemoveCheckIn={handleRemoveCheckIn}\n                                onOpenManualCheckInModal={() => setShowManualCheckInModal(true)}\n                            />\n                        )}\n                    </div>\n                </HeaderContainer>\n            </div>\n\n            {/* Manual check-in modal: pick a registrant not yet checked in */}\n            <Popup\n                isOpen={showManualCheckInModal}\n                onClose={() => setShowManualCheckInModal(false)}\n                customClassName=\"manual-checkin-modal\"\n            >\n                <div className=\"manual-checkin-modal-content\">\n                    <h3>\n                        <Icon icon=\"mdi:account-plus\" />\n                        Manually Check In Attendee\n                    </h3>\n                    <p className=\"manual-checkin-modal-hint\">Select a registrant who has not checked in yet.</p>\n                    {loadingRegistrations ? (\n                        <p className=\"manual-checkin-modal-loading\">Loading registrations...</p>\n                    ) : notCheckedIn.length === 0 ? (\n                        <p className=\"manual-checkin-modal-empty\">Everyone registered has already checked in.</p>\n                    ) : (\n                        <ul className=\"manual-checkin-modal-list\">\n                            {notCheckedIn.map((reg) => {\n                                const uid = getAttendeeUserId(reg);\n                                const name = reg.userId?.name || reg.userId?.username || 'Unknown';\n                                return (\n                                    <li key={uid}>\n                                        <button\n                                            type=\"button\"\n                                            className=\"manual-checkin-modal-item\"\n                                            onClick={() => handleManualCheckIn(uid)}\n                                        >\n                                            {name}\n                                        </button>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                    )}\n                    <button type=\"button\" className=\"manual-checkin-modal-close\" onClick={() => setShowManualCheckInModal(false)}>\n                        Cancel\n                    </button>\n                </div>\n            </Popup>\n        </div>\n    );\n}\n\nexport default EventCheckInTab;\n","import React, { useMemo, useState } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../../NotificationContext';\nimport apiRequest from '../../../../../../utils/postRequest';\nimport CreateRegistrationFormModal from '../CreateRegistrationFormModal';\nimport Popup from '../../../../../../components/Popup/Popup';\nimport EmptyState from '../../../../../../components/EmptyState/EmptyState';\nimport './RegistrationsTab.scss';\n\nconst VIEW_MODES = [\n    { id: 'table', label: 'Table', icon: 'mdi:table' },\n    { id: 'cards', label: 'Cards', icon: 'mdi:card-multiple' },\n    { id: 'summary', label: 'Summary', icon: 'mdi:chart-bar' }\n];\n\nfunction RegistrationsTab({ event, orgId, onRefresh }) {\n    const { addNotification } = useNotification();\n    const [updatingForm, setUpdatingForm] = useState(false);\n    const [viewMode, setViewMode] = useState('table');\n    const [removingId, setRemovingId] = useState(null);\n    const [confirmRemove, setConfirmRemove] = useState(null);\n\n    const { data, loading, error, refetch } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/registration-responses` : null\n    );\n    const { data: formsData, refetch: refetchForms } = useFetch(orgId ? `/org-event-management/${orgId}/forms` : null);\n    const orgForms = formsData?.success ? (formsData.data || []) : [];\n    const [showCreateFormModal, setShowCreateFormModal] = useState(false);\n    const [editingFormId, setEditingFormId] = useState(null);\n\n    const { registrations = [], formResponses = [], registrationFormId } = data?.data || {};\n    const hasForm = Boolean(registrationFormId);\n    const currentForm = hasForm ? orgForms.find((f) => f._id === registrationFormId) : null;\n    const questions = useMemo(() => {\n        const snap = formResponses[0]?.formSnapshot;\n        return snap?.questions || [];\n    }, [formResponses]);\n\n    const summaryByQuestion = useMemo(() => {\n        if (!hasForm || !questions.length || !formResponses.length) return [];\n        const total = formResponses.length;\n        return questions.map((q, qIdx) => {\n            const counts = {};\n            formResponses.forEach((r) => {\n                const val = r.answers?.[qIdx];\n                if (val === undefined || val === null) return;\n                const key = Array.isArray(val) ? val.join(', ') : String(val).trim();\n                const displayKey = key || '(empty)';\n                counts[displayKey] = (counts[displayKey] || 0) + 1;\n            });\n            const isChoice = q.type === 'multiple_choice' || q.type === 'select_multiple';\n            const entries = Object.entries(counts).map(([answer, count]) => ({ answer, count }));\n            entries.sort((a, b) => b.count - a.count);\n            const answered = entries.reduce((sum, e) => sum + e.count, 0);\n            return {\n                question: q,\n                total,\n                answered,\n                entries,\n                isChoice\n            };\n        });\n    }, [hasForm, questions, formResponses]);\n\n    const exportCsv = () => {\n        const headers = ['Name', 'Email', 'Registered At', ...questions.map(q => q.question || '')];\n        const rows = formResponses.map((r) => {\n            const name = getResponseDisplayName(r);\n            const email = getResponseEmail(r);\n            const date = r.submittedAt ? new Date(r.submittedAt).toLocaleString() : '';\n            const answers = (r.answers || []).map(a => (Array.isArray(a) ? a.join('; ') : String(a)));\n            return [name, email, date, ...answers];\n        });\n        const csv = [headers.join(','), ...rows.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(','))].join('\\n');\n        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.download = `registrations-${event?.name?.replace(/\\W/g, '-') || event?._id}.csv`;\n        link.click();\n        URL.revokeObjectURL(link.href);\n    };\n\n    const copyEmail = (email) => {\n        if (!email) return;\n        navigator.clipboard.writeText(email).then(\n            () => addNotification({ title: 'Copied', message: 'Email copied to clipboard', type: 'success' }),\n            () => addNotification({ title: 'Copy failed', message: 'Could not copy to clipboard', type: 'error' })\n        );\n    };\n\n    const copyRegistrationLink = async () => {\n        if (!event?._id) return;\n        const eventUrl = `${window.location.origin}/event/${event._id}`;\n        try {\n            await navigator.clipboard.writeText(eventUrl);\n            addNotification({ title: 'Copied', message: 'Registration link copied to clipboard', type: 'success' });\n        } catch {\n            const textArea = document.createElement('textarea');\n            textArea.value = eventUrl;\n            textArea.style.position = 'fixed';\n            textArea.style.left = '-999999px';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n                addNotification({ title: 'Copied', message: 'Registration link copied to clipboard', type: 'success' });\n            } catch {\n                addNotification({ title: 'Copy failed', message: 'Could not copy link to clipboard', type: 'error' });\n            }\n            document.body.removeChild(textArea);\n        }\n    };\n\n    const removeRegistration = async (payload) => {\n        const { responseId, userId } = payload || {};\n        const id = responseId || userId;\n        if (!orgId || !event?._id || !id) return;\n        setRemovingId(id);\n        try {\n            const url = responseId\n                ? `/org-event-management/${orgId}/events/${event._id}/registration-responses/${responseId}`\n                : `/org-event-management/${orgId}/events/${event._id}/registrations/${userId}`;\n            const res = await apiRequest(url, null, { method: 'DELETE' });\n            if (res?.success) {\n                addNotification({ title: 'Removed', message: 'Registration removed', type: 'success' });\n                setConfirmRemove(null);\n                onRefresh?.();\n                refetch?.();\n            } else {\n                addNotification({ title: 'Remove failed', message: res?.message || res?.error || 'Failed to remove', type: 'error' });\n            }\n        } catch (err) {\n            addNotification({ title: 'Remove failed', message: err?.message || 'Failed to remove', type: 'error' });\n        } finally {\n            setRemovingId(null);\n        }\n    };\n\n    const getDisplayName = (user) => user?.name || user?.username || '';\n    const getEmail = (user) => user?.email || '';\n    const getResponseDisplayName = (r) =>\n        r.submittedBy ? getDisplayName(r.submittedBy) : (r.guestName || 'Guest');\n    const getResponseEmail = (r) => (r.submittedBy ? getEmail(r.submittedBy) : (r.guestEmail || r.guestUsername || ''));\n\n    if (loading) {\n        return (\n            <div className=\"registrations-tab loading\">\n                <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                <p>Loading registrations...</p>\n            </div>\n        );\n    }\n\n    if (error || (data && !data.success)) {\n        return (\n            <div className=\"registrations-tab error\">\n                <Icon icon=\"mdi:alert-circle\" />\n                <p>{error || data?.message || 'Failed to load registrations'}</p>\n            </div>\n        );\n    }\n\n    const count = event?.registrationCount ?? registrations.length;\n    const registrationEnabled = event?.registrationEnabled ?? false;\n\n    const handleEnableRegistration = async () => {\n        if (!orgId || !event?._id) return;\n        setUpdatingForm(true);\n        try {\n            const res = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}`,\n                { registrationEnabled: true },\n                { method: 'PUT' }\n            );\n            if (res?.success) {\n                addNotification({ title: 'Registration enabled', message: 'Registration is now enabled for this event', type: 'success' });\n                onRefresh?.();\n                refetch?.();\n            } else {\n                addNotification({\n                    title: 'Enable failed',\n                    message: res?.message || res?.error || 'Failed to enable registration',\n                    type: 'error'\n                });\n            }\n        } catch (err) {\n            addNotification({\n                title: 'Enable failed',\n                message: err?.message || 'Failed to enable registration',\n                type: 'error'\n            });\n        } finally {\n            setUpdatingForm(false);\n        }\n    };\n\n    const handleDisableRegistration = async () => {\n        if (!orgId || !event?._id) return;\n        setUpdatingForm(true);\n        try {\n            const res = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}`,\n                { registrationEnabled: false },\n                { method: 'PUT' }\n            );\n            if (res?.success) {\n                addNotification({ title: 'Registration disabled', message: 'Registration is now disabled for this event', type: 'success' });\n                onRefresh?.();\n                refetch?.();\n            } else {\n                addNotification({\n                    title: 'Disable failed',\n                    message: res?.message || res?.error || 'Failed to disable registration',\n                    type: 'error'\n                });\n            }\n        } catch (err) {\n            addNotification({\n                title: 'Disable failed',\n                message: err?.message || 'Failed to disable registration',\n                type: 'error'\n            });\n        } finally {\n            setUpdatingForm(false);\n        }\n    };\n\n    const handleDeleteForm = async () => {\n        if (!orgId || !event?._id) return;\n        setUpdatingForm(true);\n        try {\n            const res = await apiRequest(\n                `/org-event-management/${orgId}/events/${event._id}`,\n                { registrationFormId: null },\n                { method: 'PUT' }\n            );\n            if (res?.success) {\n                addNotification({ title: 'Form removed', message: 'Registration form has been removed from this event', type: 'success' });\n                onRefresh?.();\n                refetch?.();\n            } else {\n                addNotification({\n                    title: 'Remove failed',\n                    message: res?.message || res?.error || 'Failed to remove form',\n                    type: 'error'\n                });\n            }\n        } catch (err) {\n            addNotification({\n                title: 'Remove failed',\n                message: err?.message || 'Failed to remove registration form',\n                type: 'error'\n            });\n        } finally {\n            setUpdatingForm(false);\n        }\n    };\n\n    return (\n        <div className=\"registrations-tab\">\n            {!registrationEnabled && (\n                <div className=\"registrations-disabled-banner\">\n                    <div className=\"registrations-disabled-content\">\n                        <Icon icon=\"mdi:account-off\" className=\"disabled-icon\" />\n                        <div className=\"disabled-text\">\n                            <strong>Registration is disabled</strong>\n                            <p>Enable registration to allow attendees to register for this event.</p>\n                        </div>\n                    </div>\n                    <button\n                        type=\"button\"\n                        className=\"enable-registration-btn\"\n                        onClick={handleEnableRegistration}\n                        disabled={updatingForm}\n                    >\n                        <Icon icon={updatingForm ? 'mdi:loading' : 'mdi:account-plus'} className={updatingForm ? 'spin' : ''} />\n                        {updatingForm ? 'Enabling...' : 'Enable Registration'}\n                    </button>\n                </div>\n            )}\n\n            <div className=\"registrations-tab-header\">\n                <div className=\"registrations-summary\">\n                    <span className=\"count\">{count}</span>\n                    <span className=\"label\">Registrations</span>\n                    {registrationEnabled && (\n                        <span className=\"registration-status-badge\">\n                            <Icon icon=\"mdi:check-circle\" />\n                            Enabled\n                        </span>\n                    )}\n                </div>\n                <div className=\"registrations-tab-actions\">\n                    {registrationEnabled && (\n                        <>\n                            <button\n                                type=\"button\"\n                                className=\"disable-registration-btn\"\n                                onClick={handleDisableRegistration}\n                                disabled={updatingForm}\n                                title=\"Disable registration\"\n                            >\n                                <Icon icon={updatingForm ? 'mdi:loading' : 'mdi:account-off'} className={updatingForm ? 'spin' : ''} />\n                                {updatingForm ? 'Disabling...' : 'Disable'}\n                            </button>\n                            <button\n                                type=\"button\"\n                                className=\"copy-registration-link-btn\"\n                                onClick={copyRegistrationLink}\n                                title=\"Copy registration link\"\n                            >\n                                <Icon icon=\"mdi:link-variant\" />\n                                Copy Link\n                            </button>\n\n                        </>\n                    )}\n                    {hasForm && formResponses.length > 0 && (\n                        <>\n                            <div className=\"view-mode-toggle\" role=\"tablist\">\n                                {VIEW_MODES.map((m) => (\n                                    <button\n                                        key={m.id}\n                                        type=\"button\"\n                                        role=\"tab\"\n                                        aria-selected={viewMode === m.id}\n                                        className={viewMode === m.id ? 'active' : ''}\n                                        onClick={() => setViewMode(m.id)}\n                                        title={m.label}\n                                    >\n                                        <Icon icon={m.icon} />\n                                        <span>{m.label}</span>\n                                    </button>\n                                ))}\n                            </div>\n                            <button type=\"button\" className=\"export-csv-btn\" onClick={exportCsv}>\n                                <Icon icon=\"mdi:download\" />\n                                Export CSV\n                            </button>\n                        </>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"registrations-form-selector\">\n                {hasForm ? (\n                    <>\n                        <div className=\"registrations-form-info\">\n                            <div className=\"registrations-form-info-content\">\n                                <label>Registration form</label>\n                                <span className=\"form-title\">{currentForm?.title || 'Untitled Form'}</span>\n                            </div>\n                            <div className=\"registrations-form-actions\">\n                                <button\n                                    type=\"button\"\n                                    className=\"edit-form-btn\"\n                                    onClick={() => {\n                                        setEditingFormId(registrationFormId);\n                                        setShowCreateFormModal(true);\n                                    }}\n                                    disabled={updatingForm}\n                                >\n                                    <Icon icon=\"mdi:pencil\" />\n                                    Edit\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    className=\"delete-form-btn\"\n                                    onClick={handleDeleteForm}\n                                    disabled={updatingForm}\n                                >\n                                    <Icon icon={updatingForm ? 'mdi:loading' : 'mdi:delete-outline'} className={updatingForm ? 'spin' : ''} />\n                                    Delete\n                                </button>\n                            </div>\n                        </div>\n                        {updatingForm && (\n                            <span className=\"registrations-form-selector-saving\">\n                                <Icon icon=\"mdi:loading\" className=\"spin\" />\n                                Saving\n                            </span>\n                        )}\n                    </>\n                ) : (\n                    <div className=\"registrations-form-empty\">\n                        <div className=\"registrations-form-empty-content\">\n                            <Icon icon=\"mdi:form-select\" className=\"empty-icon\" />\n                            <div className=\"empty-text\">\n                                <label>Registration form</label>\n                                <p>Create a registration form to collect information from attendees when they register for this event.</p>\n                            </div>\n                        </div>\n                        <button\n                            type=\"button\"\n                            className=\"create-form-btn\"\n                            onClick={() => { setEditingFormId(null); setShowCreateFormModal(true); }}\n                        >\n                            <Icon icon=\"mdi:plus\" />\n                            Create form\n                        </button>\n                    </div>\n                )}\n                {showCreateFormModal && (\n                    <CreateRegistrationFormModal\n                        orgId={orgId}\n                        formId={editingFormId || undefined}\n                        initialForm={editingFormId ? orgForms.find((f) => f._id === editingFormId) : undefined}\n                        onCreated={async (newFormId) => {\n                            refetchForms?.();\n                            if (!editingFormId && event?._id && orgId) {\n                                setUpdatingForm(true);\n                                try {\n                                    const res = await apiRequest(\n                                        `/org-event-management/${orgId}/events/${event._id}`,\n                                        { registrationFormId: newFormId },\n                                        { method: 'PUT' }\n                                    );\n                                    if (res?.success) {\n                                        addNotification({ title: 'Form created', message: 'The registration form is now active for this event.', type: 'success' });\n                                        onRefresh?.();\n                                        refetch?.();\n                                    }\n                                } catch (err) {\n                                    addNotification({ title: 'Form created', message: 'There was an issue linking the form to the event.', type: 'warning' });\n                                } finally {\n                                    setUpdatingForm(false);\n                                }\n                            } else if (editingFormId) {\n                                onRefresh?.();\n                                refetch?.();\n                            }\n                        }}\n                        onClose={() => { setShowCreateFormModal(false); setEditingFormId(null); }}\n                    />\n                )}\n            </div>\n\n            {hasForm && formResponses.length > 0 ? (\n                <>\n                    {viewMode === 'table' && (\n                        <div className=\"registrations-table-wrapper\">\n                            <table className=\"registrations-table\">\n                                <thead>\n                                    <tr>\n                                        <th>Name</th>\n                                        <th>Email</th>\n                                        <th>Submitted</th>\n                                        {questions.map((q, idx) => (\n                                            <th key={idx}>{q.question || `Q${idx + 1}`}</th>\n                                        ))}\n                                        <th className=\"th-actions\">Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {formResponses.map((r, i) => (\n                                        <tr key={r._id || i}>\n                                            <td>{getResponseDisplayName(r)}</td>\n                                            <td>{getResponseEmail(r)}</td>\n                                            <td>{r.submittedAt ? new Date(r.submittedAt).toLocaleString() : ''}</td>\n                                            {(r.answers || []).map((ans, j) => (\n                                                <td key={j}>\n                                                    {Array.isArray(ans) ? ans.join(', ') : String(ans ?? '')}\n                                                </td>\n                                            ))}\n                                            <td className=\"td-actions\">\n                                                <button type=\"button\" className=\"action-btn copy-email\" onClick={() => copyEmail(r.submittedBy?.email || r.guestEmail)} title=\"Copy email\">\n                                                    <Icon icon=\"mdi:email-outline\" />\n                                                </button>\n                                                <button\n                                                    type=\"button\"\n                                                    className=\"action-btn remove\"\n                                                    onClick={() => setConfirmRemove({ responseId: r._id, name: getResponseDisplayName(r) })}\n                                                    title=\"Remove registration\"\n                                                    disabled={removingId === r._id}\n                                                >\n                                                    <Icon icon={removingId === r._id ? 'mdi:loading' : 'mdi:account-minus'} className={removingId === r._id ? 'spin' : ''} />\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    )}\n                    {viewMode === 'cards' && (\n                        <div className=\"registrations-cards\">\n                            {formResponses.map((r, i) => (\n                                <div key={r._id || i} className=\"registration-card\">\n                                    <div className=\"registration-card-header\">\n                                        <div className=\"registration-card-user\">\n                                            <span className=\"name\">{getResponseDisplayName(r)}</span>\n                                            <span className=\"email\">{getResponseEmail(r)}</span>\n                                        </div>\n                                        <div className=\"registration-card-meta\">\n                                            {r.submittedAt ? new Date(r.submittedAt).toLocaleString() : ''}\n                                        </div>\n                                        <div className=\"registration-card-actions\">\n                                            <button type=\"button\" className=\"action-btn copy-email\" onClick={() => copyEmail(r.submittedBy?.email || r.guestEmail)} title=\"Copy email\">\n                                                <Icon icon=\"mdi:email-outline\" />\n                                            </button>\n                                            <button\n                                                type=\"button\"\n                                                className=\"action-btn remove\"\n                                                onClick={() => setConfirmRemove({ responseId: r._id, name: getResponseDisplayName(r) })}\n                                                title=\"Remove registration\"\n                                                disabled={removingId === r._id}\n                                            >\n                                                <Icon icon={removingId === r._id ? 'mdi:loading' : 'mdi:account-minus'} className={removingId === r._id ? 'spin' : ''} />\n                                            </button>\n                                        </div>\n                                    </div>\n                                    <div className=\"registration-card-answers\">\n                                        {(r.answers || []).map((ans, j) => (\n                                            <div key={j} className=\"registration-card-answer\">\n                                                <span className=\"q\">{questions[j]?.question || `Q${j + 1}`}</span>\n                                                <span className=\"a\">{Array.isArray(ans) ? ans.join(', ') : String(ans ?? '')}</span>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                    {viewMode === 'summary' && (\n                        <div className=\"registrations-summary-view\">\n                            <p className=\"summary-intro\">{formResponses.length} response{formResponses.length !== 1 ? 's' : ''}  breakdown by question</p>\n                            {summaryByQuestion.map((item, idx) => (\n                                <div key={idx} className=\"summary-question-block\">\n                                    <h4 className=\"summary-question-title\">{item.question?.question || `Question ${idx + 1}`}</h4>\n                                    <p className=\"summary-question-meta\">\n                                        {item.answered} of {item.total} answered\n                                    </p>\n                                    {item.isChoice ? (\n                                        <div className=\"summary-bars\">\n                                            {item.entries.map(({ answer, count }) => {\n                                                const pct = item.answered ? Math.round((count / item.answered) * 100) : 0;\n                                                return (\n                                                    <div key={answer} className=\"summary-bar-row\">\n                                                        <span className=\"summary-bar-label\" title={answer}>{answer}</span>\n                                                        <div className=\"summary-bar-track\">\n                                                            <div className=\"summary-bar-fill\" style={{ width: `${pct}%` }} />\n                                                        </div>\n                                                        <span className=\"summary-bar-count\">{count}</span>\n                                                    </div>\n                                                );\n                                            })}\n                                        </div>\n                                    ) : (\n                                        <div className=\"summary-text-responses\">\n                                            {item.entries.length === 0 ? (\n                                                <span className=\"summary-no-answers\">No answers</span>\n                                            ) : (\n                                                <>\n                                                    <ul className=\"summary-text-list\">\n                                                        {item.entries.slice(0, 6).map(({ answer, count }) => (\n                                                            <li key={answer}>\n                                                                <span className=\"summary-text-answer\">{answer.length > 100 ? `${answer.slice(0, 100)}` : answer}</span>\n                                                                {count > 1 && <span className=\"summary-text-count\">{count}</span>}\n                                                            </li>\n                                                        ))}\n                                                    </ul>\n                                                    {item.entries.length > 6 && (\n                                                        <p className=\"summary-text-more\">\n                                                            +{item.entries.length - 6} other answers  see Table or Cards for full list\n                                                        </p>\n                                                    )}\n                                                </>\n                                            )}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </>\n            ) : (\n                <div className=\"registrations-list-simple\">\n                    {registrations.length === 0 ? (\n                        <EmptyState\n                            icon=\"mdi:account-group-outline\"\n                            title=\"No registrations yet\"\n                            description=\"Registrations will appear here once people sign up for this event.\"\n                        />\n                    ) : (\n                        <ul>\n                            {registrations.map((reg, i) => {\n                                const uid = reg.userId?._id || reg.userId;\n                                const uidStr = uid?.toString?.() || uid;\n                                return (\n                                    <li key={uidStr || i}>\n                                        <span className=\"user\">{getDisplayName(typeof reg.userId === 'object' ? reg.userId : null)}</span>\n                                        <span className=\"meta\">\n                                            {reg.registeredAt ? new Date(reg.registeredAt).toLocaleDateString() : ''}\n                                            {reg.guestCount > 1 ? `  ${reg.guestCount} guests` : ''}\n                                            {reg.checkedIn ? '  Checked in' : ''}\n                                        </span>\n                                        <span className=\"list-actions\">\n                                            <button type=\"button\" className=\"action-btn copy-email\" onClick={() => copyEmail(reg.userId?.email)} title=\"Copy email\">\n                                                <Icon icon=\"mdi:email-outline\" />\n                                            </button>\n                                            <button\n                                                type=\"button\"\n                                                className=\"action-btn remove\"\n                                                onClick={() => setConfirmRemove({ userId: uidStr, name: getDisplayName(reg.userId) })}\n                                                title=\"Remove registration\"\n                                                disabled={removingId === uidStr}\n                                            >\n                                                <Icon icon={removingId === uidStr ? 'mdi:loading' : 'mdi:account-minus'} className={removingId === uidStr ? 'spin' : ''} />\n                                            </button>\n                                        </span>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                    )}\n                </div>\n            )}\n\n            {confirmRemove && (\n                <Popup isOpen onClose={() => setConfirmRemove(null)} customClassName=\"registrations-confirm-remove-modal\">\n                    <div className=\"registrations-confirm-remove-inner\">\n                        <h3>Remove registration?</h3>\n                        <p>This will remove <strong>{confirmRemove.name}</strong> from the event. They will need to register again to rejoin.</p>\n                        <div className=\"registrations-confirm-remove-actions\">\n                            <button type=\"button\" className=\"btn-cancel\" onClick={() => setConfirmRemove(null)}>Cancel</button>\n                            <button\n                                type=\"button\"\n                                className=\"btn-remove\"\n                                onClick={() => removeRegistration(confirmRemove)}\n                                disabled={removingId != null}\n                            >\n                                {removingId ? 'Removing' : 'Remove'}\n                            </button>\n                        </div>\n                    </div>\n                </Popup>\n            )}\n        </div>\n    );\n}\n\nexport default RegistrationsTab;\n","import React from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport './EventDashboard.scss';\n\nfunction ComingSoon({ feature = 'Feature', description }) {\n    const defaultDescriptions = {\n        'Communications': 'Send messages and reminders to volunteers and attendees. Manage all event communications from one place.',\n        'Outreach': 'Send messages and reminders to volunteers and attendees. Manage all event communications from one place.',\n        'Equipment': 'Track equipment checkout, returns, and inventory for your event. Manage all equipment needs from one place.',\n    };\n\n    const displayDescription = description || defaultDescriptions[feature] || 'This feature is currently under development.';\n\n    return (\n        <div className=\"coming-soon-container\">\n            <div className=\"coming-soon-content\">\n                <div className=\"coming-soon-icon\">\n                    <Icon icon=\"mdi:rocket-launch-outline\" />\n                </div>\n                <h3>Coming Soon</h3>\n                <h4>{feature}</h4>\n                <p>{displayDescription}</p>\n                <div className=\"coming-soon-badge\">\n                    <Icon icon=\"mdi:clock-outline\" />\n                    <span>In Development</span>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ComingSoon;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Icon } from '@iconify-icon/react';\nimport { useFetch } from '../../../../../hooks/useFetch';\nimport { useNotification } from '../../../../../NotificationContext';\nimport { useGradient } from '../../../../../hooks/useGradient';\nimport TabbedContainer from '../../../../../components/TabbedContainer';\nimport EventDashboardHeader from './EventDashboardHeader';\nimport EventOverview from './EventOverview';\nimport EventEditorTab from './EventEditorTab/EventEditorTab';\nimport AgendaBuilder from './EventAgendaBuilder/AgendaBuilder';\nimport JobsManager from './EventJobsManager/JobsManager';\nimport EventAnalyticsDetail from './EventAnalyticsDetail';\nimport EventCheckInTab from './EventCheckInTab/EventCheckInTab';\nimport RegistrationsTab from './RegistrationsTab/RegistrationsTab';\nimport ComingSoon from './ComingSoon';\n// Temporarily disabled - EquipmentManager functionality commented out\n// import EquipmentManager from './EventEquipment/EquipmentManager';\nimport './EventDashboard.scss';\n\nfunction EventDashboard({ event, orgId, onClose, className = '' }) {\n    const { addNotification } = useNotification();\n    const { AtlasMain } = useGradient();\n    const [dashboardData, setDashboardData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [refreshTrigger, setRefreshTrigger] = useState(0);\n    const [activeTab, setActiveTab] = useState('overview');\n\n    // Fetch dashboard data\n    const { data, loading: dataLoading, error, refetch } = useFetch(\n        event?._id && orgId ? `/org-event-management/${orgId}/events/${event._id}/dashboard` : null\n    );\n\n    useEffect(() => {\n        if (data?.success) {\n            setDashboardData(data.data);\n            setLoading(false);\n        } else if (error || (data && !data.success)) {\n            addNotification({\n                title: 'Error',\n                message: error || data?.message || 'Failed to load event dashboard',\n                type: 'error'\n            });\n            setLoading(false);\n        } else if (dataLoading) {\n            setLoading(true);\n        }\n    }, [data, error, dataLoading, addNotification]);\n\n    useEffect(() => {\n        if (refreshTrigger > 0) {\n            refetch();\n        }\n    }, [refreshTrigger, refetch]);\n\n    const handleRefresh = () => {\n        setRefreshTrigger(prev => prev + 1);\n    };\n\n    const dashboardRef = useRef(null);\n    const stickyTabsRef = useRef({ spacer: null, tabsWrapper: null });\n\n    const updateStickyTabs = useCallback(() => {\n        const dashboard = dashboardRef.current;\n        if (!dashboard) return;\n\n        const scrollContainer = dashboard.closest('.dashboard-overlay') || dashboard.parentElement;\n        const tabsWrapper = dashboard.querySelector('.tabbed-container__tabs-wrapper');\n        if (!scrollContainer || !tabsWrapper) return;\n\n        const containerRect = scrollContainer.getBoundingClientRect();\n        const spacer = stickyTabsRef.current.spacer;\n        const isStuck = tabsWrapper.style.position === 'fixed';\n\n        if (isStuck && spacer && spacer.style.display !== 'none') {\n            const spacerRect = spacer.getBoundingClientRect();\n            if (spacerRect.top > containerRect.top) {\n                tabsWrapper.style.position = '';\n                tabsWrapper.style.top = '';\n                tabsWrapper.style.left = '';\n                tabsWrapper.style.width = '';\n                tabsWrapper.style.zIndex = '';\n                tabsWrapper.style.background = '';\n                tabsWrapper.style.borderBottom = '';\n                spacer.style.display = 'none';\n                spacer.style.height = '0';\n            }\n        } else {\n            const rect = tabsWrapper.getBoundingClientRect();\n            if (rect.top <= containerRect.top) {\n                let spacerEl = stickyTabsRef.current.spacer;\n                if (!spacerEl) {\n                    spacerEl = document.createElement('div');\n                    spacerEl.className = 'event-dashboard-tabs-sticky-spacer';\n                    tabsWrapper.parentNode.insertBefore(spacerEl, tabsWrapper);\n                    stickyTabsRef.current.spacer = spacerEl;\n                }\n                spacerEl.style.height = `${rect.height}px`;\n                spacerEl.style.display = 'block';\n\n                tabsWrapper.style.position = 'fixed';\n                tabsWrapper.style.top = `${containerRect.top}px`;\n                tabsWrapper.style.left = `calc(${containerRect.left}px + 1.5rem)`;\n                tabsWrapper.style.width = `${containerRect.width}px`;\n                tabsWrapper.style.zIndex = '100';\n                tabsWrapper.style.background = 'var(--background)';\n                tabsWrapper.style.borderBottom = '1px solid var(--lighterborder)';\n            }\n        }\n    }, []);\n\n    useEffect(() => {\n        if (loading || !dashboardData) return;\n\n        const dashboard = dashboardRef.current;\n        if (!dashboard) return;\n\n        const scrollContainer = dashboard.closest('.dashboard-overlay') || dashboard.parentElement;\n        const tabsWrapper = dashboard.querySelector('.tabbed-container__tabs-wrapper');\n        if (!scrollContainer || !tabsWrapper) return;\n\n        const runUpdate = () => {\n            requestAnimationFrame(updateStickyTabs);\n        };\n\n        updateStickyTabs();\n        scrollContainer.addEventListener('scroll', runUpdate, { passive: true });\n        window.addEventListener('resize', runUpdate);\n\n        return () => {\n            scrollContainer.removeEventListener('scroll', runUpdate);\n            window.removeEventListener('resize', runUpdate);\n            const { spacer } = stickyTabsRef.current;\n            if (spacer && spacer.parentNode) {\n                spacer.parentNode.removeChild(spacer);\n            }\n            if (tabsWrapper) {\n                tabsWrapper.style.position = '';\n                tabsWrapper.style.top = '';\n                tabsWrapper.style.left = '';\n                tabsWrapper.style.width = '';\n                tabsWrapper.style.zIndex = '';\n                tabsWrapper.style.background = '';\n                tabsWrapper.style.borderBottom = '';\n            }\n        };\n    }, [loading, dashboardData, updateStickyTabs]);\n\n    if (loading) {\n        return (\n            <div className={`event-dashboard ${className}`}>\n                <div className=\"loading-container\">\n                    <Icon icon=\"mdi:loading\" className=\"spinner\" />\n                    <p>Loading event dashboard...</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (!dashboardData) {\n        return (\n            <div className={`event-dashboard ${className}`}>\n                <div className=\"error-container\">\n                    <Icon icon=\"mdi:alert-circle\" />\n                    <p>Failed to load event dashboard</p>\n                    <button onClick={onClose}>Close</button>\n                </div>\n            </div>\n        );\n    }\n\n    const tabs = [\n        {\n            id: 'overview',\n            label: 'Overview',\n            icon: 'mingcute:chart-bar-fill',\n            description: 'Event statistics and quick actions',\n            content: <EventOverview \n                        event={dashboardData.event}\n                        stats={dashboardData.stats}\n                        agenda={dashboardData.agenda}\n                        roles={dashboardData.roles}\n                        equipment={dashboardData.equipment}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                    />\n        },\n        {\n            id: 'agenda',\n            label: 'Agenda',\n            icon: 'mdi:calendar-clock',\n            description: 'Build and manage event agenda',\n            content: <AgendaBuilder\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                        isTabActive={activeTab === 'agenda'}\n                    />\n        },\n        {\n            id: 'jobs',\n            label: 'Jobs',\n            icon: 'mdi:briefcase',\n            description: 'Manage event jobs and assignments',\n            content: <JobsManager\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                    />\n        },\n        {\n            id: 'analytics',\n            label: 'Analytics',\n            icon: 'mingcute:chart-line-fill',\n            description: 'Detailed event analytics and insights',\n            content: <EventAnalyticsDetail\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                    />\n        },\n        {\n            id: 'edit',\n            label: 'Edit',\n            icon: 'mdi:pencil',\n            description: 'Edit event details and settings',\n            content: <EventEditorTab\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                    />\n        },\n        {\n            id: 'registrations',\n            label: 'Registrations',\n            icon: 'mdi:clipboard-list-outline',\n            description: 'View registrations and form responses',\n            content: <RegistrationsTab\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                    />\n        },\n        {\n            id: 'checkin',\n            label: 'Check-In',\n            icon: 'mdi:qrcode-scan',\n            description: 'Manage event check-in and attendance',\n            content: <EventCheckInTab\n                        event={dashboardData.event}\n                        orgId={orgId}\n                        onRefresh={handleRefresh}\n                        isTabActive={activeTab === 'checkin'}\n                    />\n        },\n        {\n            id: 'equipment',\n            label: 'Equipment',\n            icon: 'mdi:package-variant',\n            description: 'Manage equipment checkout and tracking',\n            comingSoon: true,\n            content: <ComingSoon feature=\"Equipment\" />\n            // Temporarily disabled - EquipmentManager functionality commented out\n            // content: (\n            //     <div className=\"equipment-coming-soon-wrapper\">\n            //         <div className=\"equipment-disabled-overlay\">\n            //             <ComingSoon feature=\"Equipment\" />\n            //         </div>\n            //         <div className=\"equipment-manager-disabled\">\n            //             <EquipmentManager\n            //                 event={dashboardData.event}\n            //                 orgId={orgId}\n            //                 onRefresh={handleRefresh}\n            //             />\n            //         </div>\n            //     </div>\n            // )\n        },\n        {\n            id: 'communications',\n            label: 'Communications',\n            icon: 'mdi:message-text',\n            description: 'Message volunteers and attendees',\n            comingSoon: true,\n            content: <ComingSoon feature=\"Communications\" />\n        }\n    ];\n\n    return (\n        <div ref={dashboardRef} className={`event-dashboard ${className}`}>\n            <EventDashboardHeader\n                    event={dashboardData.event}\n                    stats={dashboardData.stats}\n                    onClose={onClose}\n                    onRefresh={handleRefresh}\n                    orgId={orgId}\n                    activeTab={activeTab}\n            />\n            <div className=\"event-dashboard-content\">\n                <TabbedContainer\n                    tabs={tabs}\n                    defaultTab=\"overview\"\n                    activeTab={activeTab}\n                    onTabChange={setActiveTab}\n                    tabStyle=\"default\"\n                    size=\"medium\"\n                    animated={true}\n                    showTabIcons={true}\n                    showTabLabels={true}\n                    fullWidth={false}\n                    scrollable={true}\n                    lazyLoad={true}\n                    keepAlive={true}\n                    className=\"event-dashboard-tabs\"\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default EventDashboard;\n"],"names":["EVENT_DASHBOARD_CONFIG_PORTAL_ID","_ref","_stats$registrationCo","event","stats","onClose","onRefresh","orgId","activeTab","showConfigPanel","setShowConfigPanel","useState","panelRef","useRef","useEffect","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","AtlasMain","useGradient","addNotification","useNotification","formatTime","dateString","Date","toLocaleTimeString","hour","minute","eventStatus","getEventStatus","start_time","now","_jsxs","className","children","_jsx","src","alt","onClick","Icon","icon","ref","type","v","title","style","display","id","async","_id","eventUrl","window","location","origin","navigator","clipboard","writeText","message","err","textArea","createElement","value","position","left","body","appendChild","select","execCommand","removeChild","disabled","handlePreview","open","name","registrationCount","getTimeUntilEvent","diff","days","Math","floor","hours","minutes","toLocaleDateString","weekday","year","month","day","formatDate","end_time","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","_dailyData","eventId","expectedAttendance","isCumulative","setIsCumulative","chartRef","data","growthData","loading","error","useFetch","chart","ctx","gradient","createLinearGradient","addColorStop","requiredGradient","datasets","length","backgroundColor","update","success","dailyData","requiredGrowth","targetAttendance","isFrozen","labels","map","date","actualData","cumulativeRSVPs","dailyRSVPs","requiredData","required","round","requiredPerDay","chartData","label","fill","borderColor","pointBackgroundColor","pointBorderColor","tension","borderWidth","pointRadius","pointHoverRadius","borderDash","currentRSVPs","min","width","maxWidth","overflow","Line","options","responsive","maintainAspectRatio","interaction","mode","intersect","scales","x","grid","drawBorder","color","border","ticks","autoSkip","maxTicksLimit","maxRotation","minRotation","font","size","family","padding","offset","y","beginAtZero","plugins","legend","usePointStyle","tooltip","enabled","titleColor","bodyColor","cornerRadius","displayColors","titleFont","weight","bodyFont","callbacks","context","index","dataIndex","parsed","dataset","agenda","roles","rolesSummary","equipment","rolesData","setRolesData","rolesResponse","jobsStatus","calculateJobsFilled","ready","filled","totalRequired","totalFilled","forEach","role","_role$assignments","requiredCount","confirmed","assignments","filter","a","status","jobsPercentage","jobsLowCoverage","readinessChecks","description","isPublished","showProgress","progressData","percentage","lowCoverage","readyCount","check","totalChecks","agendaItemsWithTimes","useMemo","items","item","startTime","endTime","showScheduleCalendar","_check$progressData","RSVPGrowthChart","AgendaDailyCalendar","agendaItems","minuteHeight","RoomCard","_ref2","room","isSelected","onToggle","image","average_rating","FilledStar","toFixed","capacity","attributes","slice","attr","idx","attrLower","toLowerCase","trim","selectedAttributeIcons","attributeIcons","getAttributeIcon","formData","setFormData","onComplete","rooms","setRooms","setLoading","selectedRoomIds","setSelectedRoomIds","Set","searchQuery","setSearchQuery","debouncedSearchQuery","setDebouncedSearchQuery","selectedTags","setSelectedTags","sortBy","setSortBy","showFilterPopup","setShowFilterPopup","page","setPage","hasMore","setHasMore","totalRooms","setTotalRooms","setFormDataRef","Map","onCompleteRef","Array","isArray","timer","setTimeout","wasSearching","willBeSearching","hasInitialized","clearTimeout","isFetching","response","apiRequest","method","params","query","limit","_response$pagination","_response$pagination2","newRooms","building","number_of_ratings","prev","pagination","total","totalPages","topRatedResponse","topRatedRooms","roomsData","totalCount","Object","keys","allRoomIds","values","sampleSize","sampleRoomIds","batchResponse","queries","exhaustive","fetchedRooms","schedule","Boolean","sort","b","ratingA","ratingB","console","fetchRooms","availableAttributes","attributeSet","add","from","filteredRooms","filtered","every","tag","_room$attributes","includes","localeCompare","selectedRooms","setSelectedRooms","selectedArray","loadedRooms","find","missingIds","fetchSelectedRoomDetails","prevSelectionRef","selectionKey","JSON","stringify","firstSelectedRoom","classroomId","classroom_id","loadMore","useCallback","handleRoomToggle","roomId","newSet","has","delete","handleTagToggle","t","observerTarget","observer","IntersectionObserver","entries","isIntersecting","threshold","currentTarget","observe","unobserve","placeholder","onChange","Loader","_Fragment","Popup","isOpen","defaultStyling","combinedBlockedEvents","setCombinedBlockedEvents","isInitialized","setIsInitialized","view","setView","contentHeight","setContentHeight","startOfWeek","setStartOfWeek","setDate","getDate","getDay","selectedDay","setSelectedDay","setMonth","getMonth","setYear","getFullYear","setFilter","showAvailability","setShowAvailability","selectedTimeslots","setSelectedTimeslots","startDay","endDay","duration","contentRef","clientHeight","combineRoomSchedules","dayMap","combinedSchedule","roomData","_roomData$data","weekly_schedule","slot","push","start","end","class_name","intervals","merged","i","lastMerged","max","mergeIntervals","fetchAndCombineSchedules","Error","roomsWithData","_item$room","roomInfo","blockedEvents","events","today","currentWeekStart","week","dayKey","slots","dayOffset","eventDate","startHours","startMinutes","setHours","endHours","endMinutes","generateBlockedEvents","updateWeek","newStart","updateDay","newDate","handleTimeSelection","selections","firstSelection","_prev$start_time","_prev$end_time","newStartTime","newEndTime","getTime","prevValidityRef","hasTimes","isValid","filteredEvents","getFilteredEvents","eventStart","endOfWeek","eventDay","currentDay","currentMonth","currentYear","marginTop","fontWeight","toLocaleString","prevMonth","m","nextMonth","alignItems","gap","marginRight","fontSize","cursor","userSelect","Switch","selectedPass","setSelectedPass","Filter","selected","setSelected","MonthDisplay","height","onWeekClick","WeeklyCalendar","dayClick","autoEnableSelection","selectionMode","allowCrossDaySelection","timeIncrement","singleSelectionOnly","startHour","endHour","onSelectionsChange","initialSelections","DailyCalendar","LocationTimePopupContent","popupStep","popupFormData","setPopupFormData","onLocationSelected","onTimeSelected","onBack","handleClose","closePopup","RoomSelectorV2","When","_formConfigData$data2","_orgForms$find","isEditing","setIsEditing","saving","setSaving","showLocationTimePopup","setShowLocationTimePopup","setPopupStep","tempLocationData","setTempLocationData","formConfigData","orgFormsData","refetch","refetchOrgForms","orgForms","showCreateFormModal","setShowCreateFormModal","editingFormId","setEditingFormId","visibility","contact","externalLink","registrationEnabled","registrationRequired","registrationDeadline","registrationFormId","maxAttendees","checkInEnabled","checkInMethod","checkInRequireRegistration","checkInAutoCheckIn","checkInAllowOnPage","originalData","setOriginalData","_ref3","_event$registrationEn","_ref4","_event$registrationRe","_event$checkInSetting","_ref5","_event$checkInSetting2","_event$checkInSetting3","_event$checkInSetting4","_event$checkInSetting5","_event$checkInSetting6","initialData","rsvpEnabled","rsvpRequired","rsvpDeadline","checkInSettings","requireRegistration","requireRsvp","autoCheckIn","allowOnPageCheckIn","customFields","key","parse","handleFieldChange","fieldName","handleLocationTimePopupClose","formatDateTime","formConfig","regularFields","fields","excludedFields","excludedSteps","field","isActive","step","configPortalTarget","getElementById","configSections","checked","toISOString","parseInt","f","CreateRegistrationFormModal","formId","undefined","initialForm","onCreated","newFormId","handleCancel","errors","validateForm","time","hasRoom","hasLocationText","log","_formConfigData$data","_formConfigData$data$","updateData","endpoint","File","imageFormData","FormData","append","handleEdit","rows","ImageUpload","uploadText","onFileSelect","file","onFileClear","showPrompt","maxHeight","handleLocationTimePopupOpen","href","rel","isRequired","DynamicFormField","String","createPortal","customClassName","handleLocationSelected","handleTimeSelected","onEdit","onDelete","durationMinutes","getDurationMinutes","Activity","Break","Setup","Breakdown","Transition","Speaker","Custom","getTypeIcon","isPublic","latestItemEnd","onSave","onCancel","inputMode","setInputMode","fallbackStart","fallbackEnd","setMinutes","getMinutes","defaultStart","defaultEnd","formatDateTimeLocal","dateValue","isNaN","padStart","getHours","handleChange","updated","startsWith","onSubmit","preventDefault","alert","itemData","timeDifference","onConfirm","onPublishWithoutAdjusting","checkingAvailability","setCheckingAvailability","roomAvailable","setRoomAvailable","roomName","setRoomName","isOver","isUnder","diffMinutes","abs","difference","proposedEndTime","getProposedEndTime","currentEnd","proposedEnd","checkRoomAvailability","roomResponse","roomError","warn","availabilityResponse","isAvailable","handleConfirm","hour12","MINUTE_HEIGHT_PRESETS","_MINUTE_HEIGHT_PRESET","_MINUTE_HEIGHT_PRESET2","isTabActive","setItems","editingItem","setEditingItem","setIsPublished","publishing","setPublishing","showPublishModal","setShowPublishModal","showDeleteModal","setShowDeleteModal","itemToDelete","setItemToDelete","viewMode","setViewMode","getStoredAgendaView","calendarMinuteHeight","setCalendarMinuteHeight","localStorage","setItem","headerOutOfView","setHeaderOutOfView","headerRef","agendaData","_agendaData$data","normalizedItem","getLatestItemEnd","ordered","order","last","handleAddItem","latestEnd","newItem","assignedRoles","handleEditItem","calculateTimeDifference","agendaDuration","reduce","eventEnd","eventDuration","isExact","handlePublish","timeDiff","publishAgenda","arguments","requestBody","updateHeaderVisibility","header","scrollContainer","closest","parentElement","headerRect","getBoundingClientRect","top","bottom","runUpdate","requestAnimationFrame","passive","preset","p","onEditItem","EmptyState","actions","primary","AgendaItem","handleDeleteItem","itemId","AgendaItemEditor","rest","sanitized","existingIndex","findIndex","updatedItems","itemsToSave","sanitizedItems","saveAgenda","PublishConfirmModal","handlePublishWithoutAdjusting","DeleteConfirmModal","warningDetails","rolesWithShifts","shiftStart","shiftEnd","orgRoles","creatingJobTemplate","setCreatingJobTemplate","newJobTemplate","setNewJobTemplate","onCreateJobTemplate","onIncrementJob","onDecrementJob","HeaderContainer","classN","right","orgRole","existingRole","_role$orgRoleId","orgRoleId","count","onSuccess","selectedRole","setSelectedRole","setShiftStart","setShiftEnd","signingUp","setSigningUp","availableRoles","_role$assignments2","assignedCount","remaining","r","roleId","_selectedMember$user_","_selectedMember$user_2","_selectedMember$user_3","members","selectedMemberId","onMemberSelect","showDrop","setShowDrop","isAnimating","setIsAnimating","shouldRender","setShouldRender","dropdownRef","selectedMember","_m$user_id","_m$user_id$_id","_m$user_id2","user_id","toString","stopPropagation","picture","defaultAvatar","member","_member$user_id2","_member$user_id2$_id","_member$user_id3","_member$user_id4","_member$user_id5","_member$user_id6","memberId","_member$user_id","handleMemberClick","copiedEmail","setCopiedEmail","setRoles","signups","setSignups","setOrgRoles","showVolunteerSignup","setShowVolunteerSignup","showJobPicker","setShowJobPicker","assigningMembers","setAssigningMembers","roleToDelete","setRoleToDelete","showRemoveAssignmentModal","setShowRemoveAssignmentModal","assignmentToRemove","setAssignmentToRemove","refetchRoles","signupsData","refetchSignups","orgRolesData","membersData","handleIncrementJob","handleAddRole","_role$assignments3","_role$assignments5","confirmedCount","isFullyStaffed","handleDeleteRole","MemberDropdown","_role$assignments4","some","_a$memberId3","_a$memberId3$_id","_a$memberId4","_a$memberId","_a$memberId$_id","_a$memberId2","handleAssignMember","assignment","_assignment$memberId2","_assignment$memberId3","email","handleCopyEmail","handleRemoveAssignment","assignmentId","_assignment$memberId","memberName","_","JobShiftScheduler","hideCloseButton","JobPicker","_response$data","createdRole","_role$orgRoleId2","JobSignup","_assignmentToRemove$r","confirmLabel","analytics","setAnalytics","exporting","setExporting","analyticsData","interval","setInterval","clearInterval","formatNumber","num","Intl","NumberFormat","format","registrationHistory","totalRegistrations","registrations","viewHistory","loggedInViews","isAnonymous","userId","filteredTotalViews","loggedInViewsCount","views","anonymousViewsCount","anonymousViews","totalViews","engagementRate","uniqueViewsTotal","uniqueViews","uniqueRegistrationsTotal","uniqueRegistrations","conversionRate","avgViewsPerUser","last24Hours","recentViews","timestamp","recentRegistrations","uniqueAnonymousViews","qrCode","eventName","copied","setCopied","handleDownload","link","download","click","share","text","files","fetch","then","blob","write","ClipboardItem","checkInUrl","handleCopy","readOnly","url","attendees","onManualCheckIn","onRemoveCheckIn","onOpenManualCheckInModal","filterMethod","setFilterMethod","filteredAttendees","attendee","user","username","checkedInBy","formatCheckInTime","formatDistanceToNow","addSuffix","getUserDisplayName","getUserPicture","isManual","attendeeUserId","checkedInAt","_stats$totalRegistrat","refreshing","setRefreshing","qrCodeData","setQrCodeData","checkInLink","setCheckInLink","setAttendees","setStats","showManualCheckInModal","setShowManualCheckInModal","enablingCheckIn","setEnablingCheckIn","disablingCheckIn","setDisablingCheckIn","qrResponse","refetchQR","linkResponse","refetchLink","attendeesResponse","refetchAttendees","allRegistrationsResponse","loadingRegistrations","shouldConnect","useEventRoom","linkCopied","setLinkCopied","handleManualCheckIn","getAttendeeUserId","checkedInIds","notCheckedIn","handleEnableCheckIn","showQR","showLink","Promise","all","KpiCard","totalCheckedIn","iconVariant","totalRSVPs","checkInRate","QRCodeDisplay","CheckInLink","subheader","CheckInList","reg","_reg$userId","_reg$userId2","uid","VIEW_MODES","_event$registrationCo","updatingForm","setUpdatingForm","removingId","setRemovingId","confirmRemove","setConfirmRemove","formsData","refetchForms","formResponses","hasForm","currentForm","questions","_formResponses$","snap","formSnapshot","summaryByQuestion","q","qIdx","counts","_r$answers","val","answers","displayKey","join","isChoice","answer","answered","sum","question","copyEmail","getDisplayName","getResponseDisplayName","submittedBy","guestName","getResponseEmail","guestEmail","guestUsername","res","exportCsv","_event$name","headers","submittedAt","csv","c","replace","Blob","URL","createObjectURL","revokeObjectURL","ans","j","_r$submittedBy","responseId","_r$submittedBy2","_questions$j","_item$question","pct","_uid$toString","uidStr","call","registeredAt","guestCount","checkedIn","payload","removeRegistration","feature","displayDescription","dashboardData","setDashboardData","refreshTrigger","setRefreshTrigger","setActiveTab","dataLoading","handleRefresh","dashboardRef","stickyTabsRef","spacer","tabsWrapper","updateStickyTabs","dashboard","querySelector","containerRect","zIndex","background","borderBottom","rect","spacerEl","parentNode","insertBefore","tabs","content","EventOverview","AgendaBuilder","JobsManager","EventAnalyticsDetail","EventEditorTab","RegistrationsTab","EventCheckInTab","comingSoon","ComingSoon","EventDashboardHeader","TabbedContainer","defaultTab","onTabChange","tabStyle","animated","showTabIcons","showTabLabels","fullWidth","scrollable","lazyLoad","keepAlive"],"sourceRoot":""}